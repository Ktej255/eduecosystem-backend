============================= test session starts =============================
platform win32 -- Python 3.13.2, pytest-9.0.1, pluggy-1.6.0 -- C:\Users\Sarit\AppData\Local\Programs\Python\Python313\python.exe
cachedir: .pytest_cache
rootdir: D:\Graphology\Master Software\Eduecosystem\backend
configfile: pytest.ini
testpaths: app/tests, tests
plugins: anyio-4.11.0, asyncio-1.3.0, cov-7.0.0, mock-3.15.1
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 178 items / 18 deselected / 160 selected
run-last-failure: rerun previous 160 failures (skipped 12 files)

app/tests/api/api_v1/test_peer_reviews_flow.py::test_peer_review_flow ERROR [  0%]
app/tests/api/test_live_class_interactive.py::test_create_poll ERROR     [  1%]
app/tests/api/test_live_class_interactive.py::test_get_polls ERROR       [  1%]
app/tests/api/test_live_class_interactive.py::test_ask_question ERROR    [  2%]
app/tests/api/test_live_class_interactive.py::test_send_chat_message ERROR [  3%]
app/tests/test_email_notifications.py::TestEmailTemplates::test_create_template FAILED [  3%]
app/tests/test_email_notifications.py::TestEmailIntegration::test_enrollment_triggers_email ERROR [  4%]
app/tests/websocket/test_websocket_manager.py::test_websocket_batching FAILED [  5%]
tests/api/api_v1/test_sso_integration.py::test_sso_full_flow ERROR       [  5%]
tests/api/api_v1/test_sso_integration.py::test_sso_saml_flow ERROR       [  6%]
tests/api/test_admin.py::test_admin_stats_endpoint ERROR                 [  6%]
tests/api/test_admin.py::test_admin_only_access ERROR                    [  7%]
tests/api/test_admin.py::test_list_all_users ERROR                       [  8%]
tests/api/test_admin.py::test_search_users ERROR                         [  8%]
tests/api/test_admin.py::test_ban_user ERROR                             [  9%]
tests/api/test_admin.py::test_unban_user ERROR                           [ 10%]
tests/api/test_admin.py::test_promote_to_admin ERROR                     [ 10%]
tests/api/test_admin.py::test_delete_user ERROR                          [ 11%]
tests/api/test_admin.py::test_cannot_delete_admin ERROR                  [ 11%]
tests/api/test_admin.py::test_get_user_details ERROR                     [ 12%]
tests/api/test_admin.py::test_admin_logs ERROR                           [ 13%]
tests/api/test_admin.py::test_filter_users_by_role ERROR                 [ 13%]
tests/api/test_admin.py::test_filter_banned_users ERROR                  [ 14%]
tests/api/test_admin.py::test_unauthorized_admin_access ERROR            [ 15%]
tests/api/test_analytics.py::test_dashboard_analytics_basic ERROR        [ 15%]
tests/api/test_analytics.py::test_analytics_with_shadow_sessions ERROR   [ 16%]
tests/api/test_analytics.py::test_analytics_handwriting_count ERROR      [ 16%]
tests/api/test_analytics.py::test_analytics_insights_generation ERROR    [ 17%]
tests/api/test_analytics.py::test_analytics_attention_tracking ERROR     [ 18%]
tests/api/test_analytics.py::test_detailed_analytics ERROR               [ 18%]
tests/api/test_analytics.py::test_analytics_with_activity_heatmap ERROR  [ 19%]
tests/api/test_analytics.py::test_analytics_empty_state ERROR            [ 20%]
tests/api/test_analytics.py::test_unauthorized_analytics_access ERROR    [ 20%]
tests/api/test_announcements.py::test_create_announcement ERROR          [ 21%]
tests/api/test_announcements.py::test_get_course_announcements ERROR     [ 21%]
tests/api/test_announcements.py::test_mark_announcement_as_read ERROR    [ 22%]
tests/api/test_announcements.py::test_get_unread_announcements_count ERROR [ 23%]
tests/api/test_announcements.py::test_pin_announcement ERROR             [ 23%]
tests/api/test_announcements.py::test_delete_announcement ERROR          [ 24%]
tests/api/test_certificate_templates.py::test_create_certificate_template ERROR [ 25%]
tests/api/test_certificate_templates.py::test_get_my_templates ERROR     [ 25%]
tests/api/test_certificate_templates.py::test_update_template ERROR      [ 26%]
tests/api/test_certificate_templates.py::test_set_default_template ERROR [ 26%]
tests/api/test_certificate_templates.py::test_delete_template ERROR      [ 27%]
tests/api/test_certificate_templates.py::test_cannot_delete_default_template ERROR [ 28%]
tests/api/test_certificates.py::test_get_my_certificates ERROR           [ 28%]
tests/api/test_certificates.py::test_download_certificate ERROR          [ 29%]
tests/api/test_collaborative_projects.py::test_create_team_and_join ERROR [ 30%]
tests/api/test_discussions.py::test_create_discussion_category ERROR     [ 30%]
tests/api/test_discussions.py::test_create_discussion_thread ERROR       [ 31%]
tests/api/test_discussions.py::test_reply_to_thread ERROR                [ 31%]
tests/api/test_discussions.py::test_vote_on_post ERROR                   [ 32%]
tests/api/test_discussions.py::test_mark_answer ERROR                    [ 33%]
tests/api/test_discussions.py::test_search_threads ERROR                 [ 33%]
tests/api/test_discussions.py::test_get_thread_with_posts ERROR          [ 34%]
tests/api/test_discussions.py::test_filter_unanswered_threads ERROR      [ 35%]
tests/api/test_grapho.py::test_upload_handwriting ERROR                  [ 35%]
tests/api/test_groups.py::test_join_wolf_pack ERROR                      [ 36%]
tests/api/test_groups.py::test_multiple_users_same_streak_same_group ERROR [ 36%]
tests/api/test_groups.py::test_get_my_group ERROR                        [ 37%]
tests/api/test_groups.py::test_group_leaderboard ERROR                   [ 38%]
tests/api/test_groups.py::test_group_stats_calculation ERROR             [ 38%]
tests/api/test_groups.py::test_group_max_members_enforcement ERROR       [ 39%]
tests/api/test_groups.py::test_join_group_twice ERROR                    [ 40%]
tests/api/test_learning_paths.py::test_create_learning_path ERROR        [ 40%]
tests/api/test_learning_paths.py::test_add_courses_to_path ERROR         [ 41%]
tests/api/test_learning_paths.py::test_add_course_with_prerequisite ERROR [ 41%]
tests/api/test_learning_paths.py::test_enroll_in_path ERROR              [ 42%]
tests/api/test_learning_paths.py::test_check_course_access_without_prerequisite_completion ERROR [ 43%]
tests/api/test_learning_paths.py::test_get_my_path_enrollments ERROR     [ 43%]
tests/api/test_learning_paths.py::test_update_path_course_order ERROR    [ 44%]
tests/api/test_live_classes.py::test_create_live_class ERROR             [ 45%]
tests/api/test_live_classes.py::test_get_course_live_classes ERROR       [ 45%]
tests/api/test_live_classes.py::test_start_live_class ERROR              [ 46%]
tests/api/test_live_classes.py::test_join_live_class ERROR               [ 46%]
tests/api/test_live_classes.py::test_complete_live_class_with_recording ERROR [ 47%]
tests/api/test_live_classes.py::test_get_live_class_attendance ERROR     [ 48%]
tests/api/test_live_classes.py::test_filter_upcoming_live_classes ERROR  [ 48%]
tests/api/test_lms.py::test_list_courses ERROR                           [ 49%]
tests/api/test_lms.py::test_list_courses_with_category_filter ERROR      [ 50%]
tests/api/test_lms.py::test_list_courses_with_level_filter ERROR         [ 50%]
tests/api/test_lms.py::test_list_courses_with_search ERROR               [ 51%]
tests/api/test_lms.py::test_create_course_instructor_only ERROR          [ 51%]
tests/api/test_lms.py::test_create_course_student_forbidden ERROR        [ 52%]
tests/api/test_lms.py::test_get_course_details ERROR                     [ 53%]
tests/api/test_lms.py::test_update_course_instructor ERROR               [ 53%]
tests/api/test_lms.py::test_delete_course_instructor ERROR               [ 54%]
tests/api/test_lms.py::test_add_module_to_course ERROR                   [ 55%]
tests/api/test_lms.py::test_add_lesson_to_module ERROR                   [ 55%]
tests/api/test_lms.py::test_update_module ERROR                          [ 56%]
tests/api/test_lms.py::test_delete_module ERROR                          [ 56%]
tests/api/test_lms.py::test_delete_lesson ERROR                          [ 57%]
tests/api/test_lms.py::test_enroll_in_free_course ERROR                  [ 58%]
tests/api/test_lms.py::test_duplicate_enrollment_prevented ERROR         [ 58%]
tests/api/test_lms.py::test_get_my_courses ERROR                         [ 59%]
tests/api/test_lms.py::test_get_course_progress ERROR                    [ 60%]
tests/api/test_lms.py::test_update_lesson_progress ERROR                 [ 60%]
tests/api/test_lms.py::test_course_progress_percentage_updates ERROR     [ 61%]
tests/api/test_lms.py::test_enroll_requires_authentication ERROR         [ 61%]
tests/api/test_lms.py::test_enroll_in_nonexistent_course ERROR           [ 62%]
tests/api/test_lms.py::test_get_certificate_not_completed ERROR          [ 63%]
tests/api/test_lms.py::test_get_my_certificates_empty ERROR              [ 63%]
tests/api/test_lms.py::test_certificate_requires_authentication ERROR    [ 64%]
tests/api/test_lms.py::test_download_certificate_unauthorized ERROR      [ 65%]
tests/api/test_monitoring.py::test_exam_monitoring_flow ERROR            [ 65%]
tests/api/test_notes.py::test_create_lesson_note ERROR                   [ 66%]
tests/api/test_notes.py::test_get_lesson_notes ERROR                     [ 66%]
tests/api/test_notes.py::test_search_notes ERROR                         [ 67%]
tests/api/test_notes.py::test_bookmark_lesson ERROR                      [ 68%]
tests/api/test_notes.py::test_unbookmark_lesson ERROR                    [ 68%]
tests/api/test_notes.py::test_bookmark_course ERROR                      [ 69%]
tests/api/test_notes.py::test_get_my_bookmarks ERROR                     [ 70%]
tests/api/test_peer_reviews.py::test_create_peer_review_assignment ERROR [ 70%]
tests/api/test_peer_reviews.py::test_peer_review_flow ERROR              [ 71%]
tests/api/test_question_banks.py::test_create_question_bank ERROR        [ 71%]
tests/api/test_question_banks.py::test_list_question_banks ERROR         [ 72%]
tests/api/test_question_banks.py::test_update_question_bank ERROR        [ 73%]
tests/api/test_question_banks.py::test_delete_question_bank ERROR        [ 73%]
tests/api/test_question_banks.py::test_create_bank_question ERROR        [ 74%]
tests/api/test_question_banks.py::test_generate_quiz_from_banks ERROR    [ 75%]
tests/api/test_shadow_mode.py::test_start_shadow_session ERROR           [ 75%]
tests/api/test_shadow_mode.py::test_start_session_with_active_session ERROR [ 76%]
tests/api/test_shadow_mode.py::test_end_shadow_session ERROR             [ 76%]
tests/api/test_shadow_mode.py::test_end_session_without_active ERROR     [ 77%]
tests/api/test_shadow_mode.py::test_get_shadow_progress ERROR            [ 78%]
tests/api/test_shadow_mode.py::test_get_current_session ERROR            [ 78%]
tests/api/test_shadow_mode.py::test_coin_calculation_accuracy ERROR      [ 79%]
tests/api/test_shadow_mode.py::test_session_with_notes ERROR             [ 80%]
tests/integration/test_api_integration.py::test_login_success PASSED     [ 80%]
tests/integration/test_api_integration.py::test_login_wrong_password PASSED [ 81%]
tests/integration/test_api_integration.py::test_get_current_user PASSED  [ 81%]
tests/integration/test_api_integration.py::test_create_course FAILED     [ 82%]
tests/integration/test_api_integration.py::test_enroll_in_course FAILED  [ 83%]
tests/integration/test_api_integration.py::test_gamification_coins PASSED [ 83%]
tests/integration/test_api_integration.py::test_achievements_list PASSED [ 84%]
tests/integration/test_api_integration.py::test_learning_groups_list FAILED [ 85%]
tests/integration/test_subscription_lifecycle.py::test_subscription_lifecycle_integration ERROR [ 85%]
tests/integration/test_websocket.py::TestDiscussionWebSocket::test_websocket_connection_authorized ERROR [ 86%]
tests/integration/test_websocket.py::TestDiscussionWebSocket::test_typing_indicator ERROR [ 86%]
tests/integration/test_websocket.py::TestDiscussionWebSocket::test_multiple_users_discussion ERROR [ 87%]
tests/integration/test_websocket.py::TestLiveClassWebSocket::test_live_class_connection ERROR [ 88%]
tests/integration/test_websocket.py::TestLiveClassWebSocket::test_chat_message_broadcast ERROR [ 88%]
tests/integration/test_websocket.py::TestLiveClassWebSocket::test_reaction_broadcast ERROR [ 89%]
tests/integration/test_websocket.py::TestLiveClassWebSocket::test_participant_tracking ERROR [ 90%]
tests/integration/test_websocket.py::TestNotificationsWebSocket::test_notifications_connection FAILED [ 90%]
tests/integration/test_websocket.py::TestQuizWebSocket::test_quiz_connection FAILED [ 91%]
tests/integration/test_websocket.py::TestQuizWebSocket::test_answer_submission_broadcast FAILED [ 91%]
tests/integration/test_websocket.py::TestWebSocketConnectionManager::test_heartbeat_mechanism ERROR [ 92%]
tests/integration/test_websocket.py::TestWebSocketConnectionManager::test_connection_cleanup_on_disconnect ERROR [ 93%]
tests/test_reviews.py::test_course_reviews_workflow ERROR                [ 93%]
tests/test_sso_oauth.py::test_oauth_login_flow FAILED                    [ 94%]
tests/test_subscriptions_flow.py::test_subscribe_user ERROR              [ 95%]
tests/test_subscriptions_flow.py::test_subscribe_with_trial ERROR        [ 95%]
tests/test_subscriptions_flow.py::test_subscribe_yearly ERROR            [ 96%]
tests/test_subscriptions_flow.py::test_duplicate_subscription ERROR      [ 96%]
tests/test_subscriptions_flow.py::test_cancel_subscription_at_period_end ERROR [ 97%]
tests/test_subscriptions_flow.py::test_cancel_subscription_immediately ERROR [ 98%]
tests/test_subscriptions_flow.py::test_check_access ERROR                [ 98%]
tests/test_subscriptions_flow.py::test_get_user_subscription ERROR       [ 99%]
tests/test_two_factor_flow.py::test_2fa_login_verification ERROR         [100%]

=================================== ERRORS ====================================
___________________ ERROR at setup of test_peer_review_flow ___________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_peer_review_flow>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0BA3B620>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
---------------------------- Captured stdout setup ----------------------------
DEBUG: Starting create_test_db
DEBUG: Tables created
_____________________ ERROR at setup of test_create_poll ______________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_create_poll>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0BF17ED0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
______________________ ERROR at setup of test_get_polls _______________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_get_polls>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0C22C410>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_____________________ ERROR at setup of test_ask_question _____________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_ask_question>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0B9E6EA0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
__________________ ERROR at setup of test_send_chat_message ___________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_send_chat_message>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0B9E7BB0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
____ ERROR at setup of TestEmailIntegration.test_enrollment_triggers_email ____

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_enrollment_triggers_email>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0C2CB790>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
____________________ ERROR at setup of test_sso_full_flow _____________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_sso_full_flow>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CD90E20>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
____________________ ERROR at setup of test_sso_saml_flow _____________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_sso_saml_flow>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CD8EF50>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________________ ERROR at setup of test_admin_stats_endpoint _________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_admin_stats_endpoint>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CD8F850>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
__________________ ERROR at setup of test_admin_only_access ___________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_admin_only_access>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDC9220>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
____________________ ERROR at setup of test_list_all_users ____________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_list_all_users>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CD67890>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_____________________ ERROR at setup of test_search_users _____________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_search_users>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CD64500>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_______________________ ERROR at setup of test_ban_user _______________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_ban_user>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CCA3980>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
______________________ ERROR at setup of test_unban_user ______________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_unban_user>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDC8500>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
___________________ ERROR at setup of test_promote_to_admin ___________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_promote_to_admin>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDC9C70>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_____________________ ERROR at setup of test_delete_user ______________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_delete_user>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDCA5D0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________________ ERROR at setup of test_cannot_delete_admin __________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_cannot_delete_admin>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0C25D9A0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
___________________ ERROR at setup of test_get_user_details ___________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_get_user_details>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CD67200>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
______________________ ERROR at setup of test_admin_logs ______________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_admin_logs>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CD67E30>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________________ ERROR at setup of test_filter_users_by_role _________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_filter_users_by_role>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDC9E50>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________________ ERROR at setup of test_filter_banned_users __________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_filter_banned_users>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDC87D0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
______________ ERROR at setup of test_unauthorized_admin_access _______________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_unauthorized_admin_access>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDCAF30>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
______________ ERROR at setup of test_dashboard_analytics_basic _______________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_dashboard_analytics_basic>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CD676B0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
____________ ERROR at setup of test_analytics_with_shadow_sessions ____________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_analytics_with_shadow_sessions>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CD64230>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_____________ ERROR at setup of test_analytics_handwriting_count ______________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_analytics_handwriting_count>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDCB4D0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
____________ ERROR at setup of test_analytics_insights_generation _____________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_analytics_insights_generation>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDC87D0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_____________ ERROR at setup of test_analytics_attention_tracking _____________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_analytics_attention_tracking>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDC9E50>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
__________________ ERROR at setup of test_detailed_analytics __________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_detailed_analytics>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDCB890>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
___________ ERROR at setup of test_analytics_with_activity_heatmap ____________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_analytics_with_activity_heatmap>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDCAD50>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
________________ ERROR at setup of test_analytics_empty_state _________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_analytics_empty_state>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDC8140>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
____________ ERROR at setup of test_unauthorized_analytics_access _____________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_unauthorized_analytics_access>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDC89B0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________________ ERROR at setup of test_create_announcement __________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_create_announcement>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0C25D9A0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_______________ ERROR at setup of test_get_course_announcements _______________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_get_course_announcements>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CD645F0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
______________ ERROR at setup of test_mark_announcement_as_read _______________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_mark_announcement_as_read>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE48230>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
____________ ERROR at setup of test_get_unread_announcements_count ____________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_get_unread_announcements_count>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CD677A0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
___________________ ERROR at setup of test_pin_announcement ___________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_pin_announcement>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CD672F0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________________ ERROR at setup of test_delete_announcement __________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_delete_announcement>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDC8500>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_____________ ERROR at setup of test_create_certificate_template ______________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_create_certificate_template>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDC9C70>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
___________________ ERROR at setup of test_get_my_templates ___________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_get_my_templates>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDCBE30>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
___________________ ERROR at setup of test_update_template ____________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_update_template>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE48B90>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________________ ERROR at setup of test_set_default_template _________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_set_default_template>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDCA210>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
___________________ ERROR at setup of test_delete_template ____________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_delete_template>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDC8050>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
____________ ERROR at setup of test_cannot_delete_default_template ____________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_cannot_delete_default_template>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDCB5C0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________________ ERROR at setup of test_get_my_certificates __________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_get_my_certificates>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CD64230>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________________ ERROR at setup of test_download_certificate _________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_download_certificate>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CD675C0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________________ ERROR at setup of test_create_team_and_join _________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_create_team_and_join>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE494F0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
______________ ERROR at setup of test_create_discussion_category ______________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_create_discussion_category>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CD677A0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_______________ ERROR at setup of test_create_discussion_thread _______________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_create_discussion_thread>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CD64140>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
___________________ ERROR at setup of test_reply_to_thread ____________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_reply_to_thread>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDC8500>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_____________________ ERROR at setup of test_vote_on_post _____________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_vote_on_post>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDC9C70>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_____________________ ERROR at setup of test_mark_answer ______________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_mark_answer>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDCBE30>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
____________________ ERROR at setup of test_search_threads ____________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_search_threads>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE49E50>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
________________ ERROR at setup of test_get_thread_with_posts _________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_get_thread_with_posts>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDCBE30>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
______________ ERROR at setup of test_filter_unanswered_threads _______________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_filter_unanswered_threads>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDC9C70>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
__________________ ERROR at setup of test_upload_handwriting __________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_upload_handwriting>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDC8500>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
____________________ ERROR at setup of test_join_wolf_pack ____________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_join_wolf_pack>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CD64230>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
________ ERROR at setup of test_multiple_users_same_streak_same_group _________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_multiple_users_same_streak_same_group>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CD677A0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_____________________ ERROR at setup of test_get_my_group _____________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_get_my_group>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE4A7B0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
__________________ ERROR at setup of test_group_leaderboard ___________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_group_leaderboard>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CD675C0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_______________ ERROR at setup of test_group_stats_calculation ________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_group_stats_calculation>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0C25D7C0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
____________ ERROR at setup of test_group_max_members_enforcement _____________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_group_max_members_enforcement>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDCB5C0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
___________________ ERROR at setup of test_join_group_twice ___________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_join_group_twice>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDC8050>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________________ ERROR at setup of test_create_learning_path _________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_create_learning_path>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDCA210>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________________ ERROR at setup of test_add_courses_to_path __________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_add_courses_to_path>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE4B110>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_____________ ERROR at setup of test_add_course_with_prerequisite _____________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_add_course_with_prerequisite>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDCA030>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
____________________ ERROR at setup of test_enroll_in_path ____________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_enroll_in_path>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDC8B90>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_ ERROR at setup of test_check_course_access_without_prerequisite_completion __

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_check_course_access_without_prerequisite_completion>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDC9A90>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_______________ ERROR at setup of test_get_my_path_enrollments ________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_get_my_path_enrollments>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CD674D0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_______________ ERROR at setup of test_update_path_course_order _______________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_update_path_course_order>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CD67E30>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
__________________ ERROR at setup of test_create_live_class ___________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_create_live_class>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE4BA70>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_______________ ERROR at setup of test_get_course_live_classes ________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_get_course_live_classes>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE4B4D0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
___________________ ERROR at setup of test_start_live_class ___________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_start_live_class>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE4AC60>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
___________________ ERROR at setup of test_join_live_class ____________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_join_live_class>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE49220>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
__________ ERROR at setup of test_complete_live_class_with_recording __________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_complete_live_class_with_recording>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE49400>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
______________ ERROR at setup of test_get_live_class_attendance _______________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_get_live_class_attendance>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE48D70>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_____________ ERROR at setup of test_filter_upcoming_live_classes _____________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_filter_upcoming_live_classes>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE48230>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_____________________ ERROR at setup of test_list_courses _____________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_list_courses>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE485F0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
__________ ERROR at setup of test_list_courses_with_category_filter ___________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_list_courses_with_category_filter>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE48E60>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
____________ ERROR at setup of test_list_courses_with_level_filter ____________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_list_courses_with_level_filter>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE49130>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_______________ ERROR at setup of test_list_courses_with_search _______________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_list_courses_with_search>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE4A8A0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
____________ ERROR at setup of test_create_course_instructor_only _____________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_create_course_instructor_only>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE4B110>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
___________ ERROR at setup of test_create_course_student_forbidden ____________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_create_course_student_forbidden>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CD67A70>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
__________________ ERROR at setup of test_get_course_details __________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_get_course_details>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE4B020>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_______________ ERROR at setup of test_update_course_instructor _______________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_update_course_instructor>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE4A990>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_______________ ERROR at setup of test_delete_course_instructor _______________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_delete_course_instructor>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE49E50>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________________ ERROR at setup of test_add_module_to_course _________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_add_module_to_course>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE495E0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________________ ERROR at setup of test_add_lesson_to_module _________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_add_lesson_to_module>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE488C0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
____________________ ERROR at setup of test_update_module _____________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_update_module>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CD67B60>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
____________________ ERROR at setup of test_delete_module _____________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_delete_module>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE4B6B0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
____________________ ERROR at setup of test_delete_lesson _____________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_delete_lesson>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE48AA0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
________________ ERROR at setup of test_enroll_in_free_course _________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_enroll_in_free_course>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE487D0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
____________ ERROR at setup of test_duplicate_enrollment_prevented ____________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_duplicate_enrollment_prevented>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE4A300>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
____________________ ERROR at setup of test_get_my_courses ____________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_get_my_courses>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE4AB70>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________________ ERROR at setup of test_get_course_progress __________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_get_course_progress>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0C25D7C0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
________________ ERROR at setup of test_update_lesson_progress ________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_update_lesson_progress>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE4B200>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
__________ ERROR at setup of test_course_progress_percentage_updates __________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_course_progress_percentage_updates>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE49B80>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
____________ ERROR at setup of test_enroll_requires_authentication ____________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_enroll_requires_authentication>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE497C0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_____________ ERROR at setup of test_enroll_in_nonexistent_course _____________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_enroll_in_nonexistent_course>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE48F50>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
____________ ERROR at setup of test_get_certificate_not_completed _____________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_get_certificate_not_completed>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE485F0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
______________ ERROR at setup of test_get_my_certificates_empty _______________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_get_my_certificates_empty>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDCB980>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________ ERROR at setup of test_certificate_requires_authentication __________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_certificate_requires_authentication>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE48C80>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
__________ ERROR at setup of test_download_certificate_unauthorized ___________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_download_certificate_unauthorized>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE494F0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________________ ERROR at setup of test_exam_monitoring_flow _________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_exam_monitoring_flow>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE4A030>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
__________________ ERROR at setup of test_create_lesson_note __________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_create_lesson_note>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE4A6C0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
___________________ ERROR at setup of test_get_lesson_notes ___________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_get_lesson_notes>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE49A90>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_____________________ ERROR at setup of test_search_notes _____________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_search_notes>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDC88C0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
___________________ ERROR at setup of test_bookmark_lesson ____________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_bookmark_lesson>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE4B200>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
__________________ ERROR at setup of test_unbookmark_lesson ___________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_unbookmark_lesson>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE49B80>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
___________________ ERROR at setup of test_bookmark_course ____________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_bookmark_course>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE497C0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
___________________ ERROR at setup of test_get_my_bookmarks ___________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_get_my_bookmarks>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE48F50>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
____________ ERROR at setup of test_create_peer_review_assignment _____________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_create_peer_review_assignment>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE485F0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
___________________ ERROR at setup of test_peer_review_flow ___________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_peer_review_flow>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDC94F0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________________ ERROR at setup of test_create_question_bank _________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_create_question_bank>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE485F0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________________ ERROR at setup of test_list_question_banks __________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_list_question_banks>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE48F50>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________________ ERROR at setup of test_update_question_bank _________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_update_question_bank>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE497C0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________________ ERROR at setup of test_delete_question_bank _________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_delete_question_bank>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE49B80>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________________ ERROR at setup of test_create_bank_question _________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_create_bank_question>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE4B200>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_______________ ERROR at setup of test_generate_quiz_from_banks _______________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_generate_quiz_from_banks>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDCB4D0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________________ ERROR at setup of test_start_shadow_session _________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_start_shadow_session>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE49A90>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
__________ ERROR at setup of test_start_session_with_active_session ___________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_start_session_with_active_session>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE4A6C0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
__________________ ERROR at setup of test_end_shadow_session __________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_end_shadow_session>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE4A030>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
______________ ERROR at setup of test_end_session_without_active ______________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_end_session_without_active>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE494F0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________________ ERROR at setup of test_get_shadow_progress __________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_get_shadow_progress>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE48C80>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_________________ ERROR at setup of test_get_current_session __________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_get_current_session>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDC8500>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
______________ ERROR at setup of test_coin_calculation_accuracy _______________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_coin_calculation_accuracy>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE48B90>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
__________________ ERROR at setup of test_session_with_notes __________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_session_with_notes>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE496D0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
__________ ERROR at setup of test_subscription_lifecycle_integration __________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_subscription_lifecycle_integration>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E079036B0>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
_ ERROR at setup of TestDiscussionWebSocket.test_websocket_connection_authorized _

fixturedef = <FixtureDef argname='test_course' scope='function' baseid=''>
request = <SubRequest 'test_course' for <Function test_websocket_connection_authorized>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E07903020>
test_user = <app.models.user.User object at 0x0000029E0C12AB10>

    @pytest.fixture(scope="function")
    def test_course(db, test_user):
>       course = Course(
                 ^^^^^^
            title="Test Course",
            slug="test-course",
            description="Test Description",
            instructor_id=test_user.id,
            price=100.0,
            is_published=True,
        )
E       NameError: name 'Course' is not defined

conftest.py:141: NameError
_______ ERROR at setup of TestDiscussionWebSocket.test_typing_indicator _______

fixturedef = <FixtureDef argname='test_course' scope='function' baseid=''>
request = <SubRequest 'test_course' for <Function test_typing_indicator>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E07901040>
test_user = <app.models.user.User object at 0x0000029E0C129FD0>

    @pytest.fixture(scope="function")
    def test_course(db, test_user):
>       course = Course(
                 ^^^^^^
            title="Test Course",
            slug="test-course",
            description="Test Description",
            instructor_id=test_user.id,
            price=100.0,
            is_published=True,
        )
E       NameError: name 'Course' is not defined

conftest.py:141: NameError
__ ERROR at setup of TestDiscussionWebSocket.test_multiple_users_discussion ___

fixturedef = <FixtureDef argname='test_course' scope='function' baseid=''>
request = <SubRequest 'test_course' for <Function test_multiple_users_discussion>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E07901E50>
test_user = <app.models.user.User object at 0x0000029E03F42450>

    @pytest.fixture(scope="function")
    def test_course(db, test_user):
>       course = Course(
                 ^^^^^^
            title="Test Course",
            slug="test-course",
            description="Test Description",
            instructor_id=test_user.id,
            price=100.0,
            is_published=True,
        )
E       NameError: name 'Course' is not defined

conftest.py:141: NameError
_____ ERROR at setup of TestLiveClassWebSocket.test_live_class_connection _____

fixturedef = <FixtureDef argname='test_course' scope='function' baseid=''>
request = <SubRequest 'test_course' for <Function test_live_class_connection>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E07900E60>
test_user = <app.models.user.User object at 0x0000029E0BF13530>

    @pytest.fixture(scope="function")
    def test_course(db, test_user):
>       course = Course(
                 ^^^^^^
            title="Test Course",
            slug="test-course",
            description="Test Description",
            instructor_id=test_user.id,
            price=100.0,
            is_published=True,
        )
E       NameError: name 'Course' is not defined

conftest.py:141: NameError
____ ERROR at setup of TestLiveClassWebSocket.test_chat_message_broadcast _____

fixturedef = <FixtureDef argname='test_course' scope='function' baseid=''>
request = <SubRequest 'test_course' for <Function test_chat_message_broadcast>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E07901130>
test_user = <app.models.user.User object at 0x0000029E05F15010>

    @pytest.fixture(scope="function")
    def test_course(db, test_user):
>       course = Course(
                 ^^^^^^
            title="Test Course",
            slug="test-course",
            description="Test Description",
            instructor_id=test_user.id,
            price=100.0,
            is_published=True,
        )
E       NameError: name 'Course' is not defined

conftest.py:141: NameError
______ ERROR at setup of TestLiveClassWebSocket.test_reaction_broadcast _______

fixturedef = <FixtureDef argname='test_course' scope='function' baseid=''>
request = <SubRequest 'test_course' for <Function test_reaction_broadcast>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E079017C0>
test_user = <app.models.user.User object at 0x0000029E05F14050>

    @pytest.fixture(scope="function")
    def test_course(db, test_user):
>       course = Course(
                 ^^^^^^
            title="Test Course",
            slug="test-course",
            description="Test Description",
            instructor_id=test_user.id,
            price=100.0,
            is_published=True,
        )
E       NameError: name 'Course' is not defined

conftest.py:141: NameError
_____ ERROR at setup of TestLiveClassWebSocket.test_participant_tracking ______

fixturedef = <FixtureDef argname='test_course' scope='function' baseid=''>
request = <SubRequest 'test_course' for <Function test_participant_tracking>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E07901C70>
test_user = <app.models.user.User object at 0x0000029E03F42450>

    @pytest.fixture(scope="function")
    def test_course(db, test_user):
>       course = Course(
                 ^^^^^^
            title="Test Course",
            slug="test-course",
            description="Test Description",
            instructor_id=test_user.id,
            price=100.0,
            is_published=True,
        )
E       NameError: name 'Course' is not defined

conftest.py:141: NameError
__ ERROR at setup of TestWebSocketConnectionManager.test_heartbeat_mechanism __

fixturedef = <FixtureDef argname='test_course' scope='function' baseid=''>
request = <SubRequest 'test_course' for <Function test_heartbeat_mechanism>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E07902990>
test_user = <app.models.user.User object at 0x0000029E0C12AB10>

    @pytest.fixture(scope="function")
    def test_course(db, test_user):
>       course = Course(
                 ^^^^^^
            title="Test Course",
            slug="test-course",
            description="Test Description",
            instructor_id=test_user.id,
            price=100.0,
            is_published=True,
        )
E       NameError: name 'Course' is not defined

conftest.py:141: NameError
_ ERROR at setup of TestWebSocketConnectionManager.test_connection_cleanup_on_disconnect _

fixturedef = <FixtureDef argname='test_course' scope='function' baseid=''>
request = <SubRequest 'test_course' for <Function test_connection_cleanup_on_disconnect>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E07903F20>
test_user = <app.models.user.User object at 0x0000029E0C12B890>

    @pytest.fixture(scope="function")
    def test_course(db, test_user):
>       course = Course(
                 ^^^^^^
            title="Test Course",
            slug="test-course",
            description="Test Description",
            instructor_id=test_user.id,
            price=100.0,
            is_published=True,
        )
E       NameError: name 'Course' is not defined

conftest.py:141: NameError
_______________ ERROR at setup of test_course_reviews_workflow ________________

fixturedef = <FixtureDef argname='client' scope='function' baseid=''>
request = <SubRequest 'client' for <Function test_course_reviews_workflow>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E07903980>

    @pytest.fixture(scope="function")
    def client(db):
        def override_get_db():
            try:
                yield db
            finally:
                pass
    
>       app.dependency_overrides[get_db] = override_get_db
        ^^^
E       NameError: name 'app' is not defined

conftest.py:105: NameError
____________________ ERROR at setup of test_subscribe_user ____________________

self = <Coroutine test_subscribe_user>

    def setup(self) -> None:
        runner_fixture_id = f"_{self._loop_scope}_scoped_runner"
        if runner_fixture_id not in self.fixturenames:
            self.fixturenames.append(runner_fixture_id)
>       return super().setup()
               ^^^^^^^^^^^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:458: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: in pytest_fixture_setup
    return (yield)
            ^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E07900E60>

    @pytest.fixture(scope="function")
    def test_user(db):
        from app.core.security import get_password_hash
>       user = User(
               ^^^^
            email="test@example.com",
            hashed_password=get_password_hash("password"),  # Hash the password "password"
            full_name="Test User",
            is_active=True,
            role="student",
        )
E       NameError: name 'User' is not defined

conftest.py:114: NameError
_________________ ERROR at setup of test_subscribe_with_trial _________________

self = <Coroutine test_subscribe_with_trial>

    def setup(self) -> None:
        runner_fixture_id = f"_{self._loop_scope}_scoped_runner"
        if runner_fixture_id not in self.fixturenames:
            self.fixturenames.append(runner_fixture_id)
>       return super().setup()
               ^^^^^^^^^^^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:458: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: in pytest_fixture_setup
    return (yield)
            ^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDCA210>

    @pytest.fixture(scope="function")
    def test_user(db):
        from app.core.security import get_password_hash
>       user = User(
               ^^^^
            email="test@example.com",
            hashed_password=get_password_hash("password"),  # Hash the password "password"
            full_name="Test User",
            is_active=True,
            role="student",
        )
E       NameError: name 'User' is not defined

conftest.py:114: NameError
___________________ ERROR at setup of test_subscribe_yearly ___________________

self = <Coroutine test_subscribe_yearly>

    def setup(self) -> None:
        runner_fixture_id = f"_{self._loop_scope}_scoped_runner"
        if runner_fixture_id not in self.fixturenames:
            self.fixturenames.append(runner_fixture_id)
>       return super().setup()
               ^^^^^^^^^^^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:458: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: in pytest_fixture_setup
    return (yield)
            ^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E079007D0>

    @pytest.fixture(scope="function")
    def test_user(db):
        from app.core.security import get_password_hash
>       user = User(
               ^^^^
            email="test@example.com",
            hashed_password=get_password_hash("password"),  # Hash the password "password"
            full_name="Test User",
            is_active=True,
            role="student",
        )
E       NameError: name 'User' is not defined

conftest.py:114: NameError
________________ ERROR at setup of test_duplicate_subscription ________________

self = <Coroutine test_duplicate_subscription>

    def setup(self) -> None:
        runner_fixture_id = f"_{self._loop_scope}_scoped_runner"
        if runner_fixture_id not in self.fixturenames:
            self.fixturenames.append(runner_fixture_id)
>       return super().setup()
               ^^^^^^^^^^^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:458: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: in pytest_fixture_setup
    return (yield)
            ^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E07903020>

    @pytest.fixture(scope="function")
    def test_user(db):
        from app.core.security import get_password_hash
>       user = User(
               ^^^^
            email="test@example.com",
            hashed_password=get_password_hash("password"),  # Hash the password "password"
            full_name="Test User",
            is_active=True,
            role="student",
        )
E       NameError: name 'User' is not defined

conftest.py:114: NameError
__________ ERROR at setup of test_cancel_subscription_at_period_end ___________

fixturedef = <FixtureDef argname='test_user' scope='function' baseid=''>
request = <SubRequest 'test_user' for <Function test_cancel_subscription_at_period_end>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E07903110>

    @pytest.fixture(scope="function")
    def test_user(db):
        from app.core.security import get_password_hash
>       user = User(
               ^^^^
            email="test@example.com",
            hashed_password=get_password_hash("password"),  # Hash the password "password"
            full_name="Test User",
            is_active=True,
            role="student",
        )
E       NameError: name 'User' is not defined

conftest.py:114: NameError
___________ ERROR at setup of test_cancel_subscription_immediately ____________

fixturedef = <FixtureDef argname='test_user' scope='function' baseid=''>
request = <SubRequest 'test_user' for <Function test_cancel_subscription_immediately>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E07901220>

    @pytest.fixture(scope="function")
    def test_user(db):
        from app.core.security import get_password_hash
>       user = User(
               ^^^^
            email="test@example.com",
            hashed_password=get_password_hash("password"),  # Hash the password "password"
            full_name="Test User",
            is_active=True,
            role="student",
        )
E       NameError: name 'User' is not defined

conftest.py:114: NameError
_____________________ ERROR at setup of test_check_access _____________________

fixturedef = <FixtureDef argname='test_user' scope='function' baseid=''>
request = <SubRequest 'test_user' for <Function test_check_access>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE4AC60>

    @pytest.fixture(scope="function")
    def test_user(db):
        from app.core.security import get_password_hash
>       user = User(
               ^^^^
            email="test@example.com",
            hashed_password=get_password_hash("password"),  # Hash the password "password"
            full_name="Test User",
            is_active=True,
            role="student",
        )
E       NameError: name 'User' is not defined

conftest.py:114: NameError
________________ ERROR at setup of test_get_user_subscription _________________

fixturedef = <FixtureDef argname='test_user' scope='function' baseid=''>
request = <SubRequest 'test_user' for <Function test_get_user_subscription>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE48D70>

    @pytest.fixture(scope="function")
    def test_user(db):
        from app.core.security import get_password_hash
>       user = User(
               ^^^^
            email="test@example.com",
            hashed_password=get_password_hash("password"),  # Hash the password "password"
            full_name="Test User",
            is_active=True,
            role="student",
        )
E       NameError: name 'User' is not defined

conftest.py:114: NameError
________________ ERROR at setup of test_2fa_login_verification ________________

fixturedef = <FixtureDef argname='test_user' scope='function' baseid=''>
request = <SubRequest 'test_user' for <Function test_2fa_login_verification>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

db = <sqlalchemy.orm.session.Session object at 0x0000029E0DE49130>

    @pytest.fixture(scope="function")
    def test_user(db):
        from app.core.security import get_password_hash
>       user = User(
               ^^^^
            email="test@example.com",
            hashed_password=get_password_hash("password"),  # Hash the password "password"
            full_name="Test User",
            is_active=True,
            role="student",
        )
E       NameError: name 'User' is not defined

conftest.py:114: NameError
================================== FAILURES ===================================
___________________ TestEmailTemplates.test_create_template ___________________

self = <test_email_notifications.TestEmailTemplates object at 0x0000029E04BEC550>
db = <sqlalchemy.orm.session.Session object at 0x0000029E0BF12210>
test_user = <app.models.user.User object at 0x0000029E0BA3B620>

    def test_create_template(self, db: Session, test_user: User):
        """Test creating a custom email template"""
        template_data = {
            "name": "test_custom_template",
            "display_name": "Test Template",
            "subject": "Test Subject",
            "body_html": "<p>Hello {{name}}</p>",
            "body_text": "Hello {{name}}",
            "variables": ["name"],
            "notification_type": NotificationType.GENERAL,
            "is_system": False,
        }
    
>       template = crud_email_template.create(
            db, obj_in=template_data, created_by=test_user.id
        )

app\tests\test_email_notifications.py:129: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <app.crud.email_notification.CRUDEmailTemplate object at 0x0000029E04BF9550>
db = <sqlalchemy.orm.session.Session object at 0x0000029E0BF12210>
obj_in = {'body_html': '<p>Hello {{name}}</p>', 'body_text': 'Hello {{name}}', 'display_name': 'Test Template', 'is_system': False, ...}
created_by = 1

    def create(
        self, db: Session, obj_in: EmailTemplateCreate, created_by: Optional[int] = None
    ) -> EmailTemplate:
        """Create new email template"""
        if isinstance(obj_in, dict):
            obj_in_data = obj_in
        else:
            obj_in_data = obj_in.dict()
    
>       template = EmailTemplate(
            **obj_in_data, created_by=created_by, is_system=False
        )
E       TypeError: app.models.email_notification.EmailTemplate() got multiple values for keyword argument 'is_system'

app\crud\email_notification.py:119: TypeError
___________________________ test_websocket_batching ___________________________

    @pytest.mark.asyncio
    async def test_websocket_batching():
        """Test message batching"""
    
        class MockWebSocket:
            def __init__(self):
                self.sent_messages = []
    
            async def accept(self):
                pass
    
            async def send_json(self, message):
                self.sent_messages.append(message)
    
            async def send_text(self, message):
                self.sent_messages.append(message)
    
            async def close(self):
                pass
    
        ws = MockWebSocket()
        room = "batch_room"
    
        await manager.connect(ws, room, 1, "User 1")
    
        # Queue messages
        msg1 = {"type": "update", "id": 1}
        msg2 = {"type": "update", "id": 2}
    
>       await manager.broadcast_to_room(room, msg1, batch=True)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       TypeError: ConnectionManager.broadcast_to_room() got an unexpected keyword argument 'batch'

app\tests\websocket\test_websocket_manager.py:121: TypeError
_____________________________ test_create_course ______________________________

client = <starlette.testclient.TestClient object at 0x0000029E05F14CB0>
auth_headers = {'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NjUxMTQ5NjEsInN1YiI6IjEifQ.BV0ZsbbQzh77vd-mzsAaEcdjE6oIq7DqGpBFc-XF5Jo'}
db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDD3230>

    def test_create_course(client, auth_headers, db):
        """Test course creation"""
        response = client.post(
            "/api/v1/courses/",
            headers=auth_headers,
            json={
                "title": "Test Course",
                "description": "A test course",
                "price": 999,
                "level": "beginner",
            },
        )
>       assert response.status_code == 201
E       assert 404 == 201
E        +  where 404 = <Response [404 Not Found]>.status_code

tests\integration\test_api_integration.py:128: AssertionError
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:87 Client error response
____________________________ test_enroll_in_course ____________________________

client = <starlette.testclient.TestClient object at 0x0000029E0DE1A470>
auth_headers = {'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NjUxMTQ5NjIsInN1YiI6IjEifQ.Cq2Bmg6K-rKODVedDFOw6_63Y5mMAOeLVsIykMFzORs'}
db = <sqlalchemy.orm.session.Session object at 0x0000029E0CDD3CE0>

    def test_enroll_in_course(client, auth_headers, db):
        """Test course enrollment"""
        # First create a course
        course_response = client.post(
            "/api/v1/courses/",
            headers=auth_headers,
            json={
                "title": "Test Course",
                "description": "A test course",
                "price": 0,  # Free course
                "level": "beginner",
                "is_published": True,
            },
        )
>       course_id = course_response.json()["id"]
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       KeyError: 'id'

tests\integration\test_api_integration.py:147: KeyError
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:87 Client error response
__________________________ test_learning_groups_list __________________________

client = <starlette.testclient.TestClient object at 0x0000029E0DEBF680>
auth_headers = {'Authorization': 'Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJleHAiOjE3NjUxMTQ5NjQsInN1YiI6IjEifQ.iQQH7IxGBer6PLwyonTRp3f-A_C3iYtQp4t9LU2h9CY'}

    def test_learning_groups_list(client, auth_headers):
        """Test listing learning groups"""
        response = client.get("/api/v1/learning-groups/groups", headers=auth_headers)
>       assert response.status_code == 200
E       assert 404 == 200
E        +  where 404 = <Response [404 Not Found]>.status_code

tests\integration\test_api_integration.py:172: AssertionError
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:87 Client error response
__________ TestNotificationsWebSocket.test_notifications_connection ___________

self = <test_websocket.TestNotificationsWebSocket object at 0x0000029E0BF15D10>
test_user = <app.models.user.User object at 0x0000029E0BF13530>

    def test_notifications_connection(self, test_user: User):
        """Test notifications WebSocket connection."""
        client = TestClient(app)
        token = create_access_token(subject=test_user.id)
    
>       with client.websocket_connect(f"/ws/notifications?token={token}") as websocket:
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests\integration\test_websocket.py:254: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\testclient.py:115: in __enter__
    self._raise_on_close(message)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <starlette.testclient.WebSocketTestSession object at 0x0000029E0BA3B620>
message = {'code': 1000, 'reason': '', 'type': 'websocket.close'}

    def _raise_on_close(self, message: Message) -> None:
        if message["type"] == "websocket.close":
>           raise WebSocketDisconnect(code=message.get("code", 1000), reason=message.get("reason", ""))
E           starlette.websockets.WebSocketDisconnect

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\testclient.py:144: WebSocketDisconnect
___________________ TestQuizWebSocket.test_quiz_connection ____________________

self = <test_websocket.TestQuizWebSocket object at 0x0000029E0BF15E50>
test_user = <app.models.user.User object at 0x0000029E0C12B9B0>
db = <sqlalchemy.orm.session.Session object at 0x0000029E07901220>

    def test_quiz_connection(self, test_user: User, db: Session):
        """Test quiz WebSocket connection."""
        from app.models.quiz import Quiz
    
        # Create test quiz
>       quiz = Quiz(title="Test Quiz", description="Test description", time_limit=30)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests\integration\test_websocket.py:269: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
<string>:4: in __init__
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state.py:571: in _initialize_instance
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state.py:569: in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <app.models.quiz.Quiz object at 0x0000029E0C2263C0>
kwargs = {'description': 'Test description', 'time_limit': 30, 'title': 'Test Quiz'}
cls_ = <class 'app.models.quiz.Quiz'>, k = 'time_limit'

    def _declarative_constructor(self: Any, **kwargs: Any) -> None:
        """A simple constructor that allows initialization from kwargs.
    
        Sets attributes on the constructed instance using the names and
        values in ``kwargs``.
    
        Only keys that are present as
        attributes of the instance's class are allowed. These could be,
        for example, any mapped columns or relationships.
        """
        cls_ = type(self)
        for k in kwargs:
            if not hasattr(cls_, k):
>               raise TypeError(
                    "%r is an invalid keyword argument for %s" % (k, cls_.__name__)
                )
E               TypeError: 'time_limit' is an invalid keyword argument for Quiz

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\decl_base.py:2179: TypeError
_____________ TestQuizWebSocket.test_answer_submission_broadcast ______________

self = <test_websocket.TestQuizWebSocket object at 0x0000029E0BF15F90>
test_user = <app.models.user.User object at 0x0000029E0BF8C4D0>
db = <sqlalchemy.orm.session.Session object at 0x0000029E0DF5CC80>

    def test_answer_submission_broadcast(self, test_user: User, db: Session):
        """Test answer submission broadcasting."""
        from app.models.quiz import Quiz
    
        # Create test quiz
>       quiz = Quiz(title="Test Quiz", description="Test description", time_limit=30)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests\integration\test_websocket.py:287: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
<string>:4: in __init__
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state.py:571: in _initialize_instance
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state.py:569: in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

self = <app.models.quiz.Quiz object at 0x0000029E0DDE6E90>
kwargs = {'description': 'Test description', 'time_limit': 30, 'title': 'Test Quiz'}
cls_ = <class 'app.models.quiz.Quiz'>, k = 'time_limit'

    def _declarative_constructor(self: Any, **kwargs: Any) -> None:
        """A simple constructor that allows initialization from kwargs.
    
        Sets attributes on the constructed instance using the names and
        values in ``kwargs``.
    
        Only keys that are present as
        attributes of the instance's class are allowed. These could be,
        for example, any mapped columns or relationships.
        """
        cls_ = type(self)
        for k in kwargs:
            if not hasattr(cls_, k):
>               raise TypeError(
                    "%r is an invalid keyword argument for %s" % (k, cls_.__name__)
                )
E               TypeError: 'time_limit' is an invalid keyword argument for Quiz

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\decl_base.py:2179: TypeError
____________________________ test_oauth_login_flow ____________________________

db_session = <Mock spec='Session' id='2877831674720'>
mock_oauth_service = <MagicMock name='OAuthService()' id='2877831669680'>

    def test_oauth_login_flow(db_session, mock_oauth_service):
        # 1. Setup Organization and Config
        org = Organization(
            id=1, name="Test Org", slug="test-org", domain="example.com", sso_enabled=True
        )
    
        config = SSOConfig(
            organization_id=1,
            provider_type=SSOProviderType.OAUTH,
            provider_name="Test Provider",
            client_id="client_id",
            client_secret="client_secret",
            authorization_endpoint="https://auth",
            token_endpoint="https://token",
            userinfo_endpoint="https://userinfo",
            is_active=True,
        )
    
        # Mock DB queries
        with patch(
            "app.services.sso_service.SSOService.get_organization_by_slug", return_value=org
        ):
            with patch(
                "app.services.sso_service.SSOService.get_sso_config", return_value=config
            ):
                # 2. Test Login Initiation
                response = client.post(
                    "/api/v1/sso/login/oauth", json={"organization_slug": "test-org"}
                )
    
>               assert response.status_code == 200
E               assert 405 == 200
E                +  where 405 = <Response [405 Method Not Allowed]>.status_code

tests\test_sso_oauth.py:74: AssertionError
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:87 Client error response
============================== warnings summary ===============================
app\schemas\coupon.py:28
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\coupon.py:28: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("discount_type")

app\schemas\coupon.py:34
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\coupon.py:34: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("discount_value")

app\schemas\coupon.py:54
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\coupon.py:54: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Coupon(CouponBase):

app\schemas\digital_product.py:26
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\digital_product.py:26: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DigitalProductInDBBase(DigitalProductBase):

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\_internal\_config.py:383
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\_internal\_config.py:383
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\_internal\_config.py:383
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\_internal\_config.py:383
  C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\_internal\_config.py:383: UserWarning: Valid config keys have changed in V2:
  * 'orm_mode' has been renamed to 'from_attributes'
    warnings.warn(message, UserWarning)

app\schemas\enquiry.py:25
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\enquiry.py:25: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EnquiryInDBBase(EnquiryBase):

app\schemas\asset.py:24
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\asset.py:24: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AssetInDBBase(AssetBase):

app\schemas\analytics.py:29
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\analytics.py:29: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class InstructorAnalyticsResponse(InstructorAnalyticsBase):

app\schemas\analytics.py:98
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\analytics.py:98: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class StudentAnalyticsResponse(StudentAnalyticsBase):

app\schemas\analytics.py:161
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\analytics.py:161: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class PlatformAnalyticsResponse(PlatformAnalyticsBase):

app\schemas\analytics.py:244
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\analytics.py:244: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EventResponse(BaseModel):

app\schemas\marketplace.py:48
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\marketplace.py:48: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class PayoutResponse(BaseModel):

app\schemas\marketplace.py:89
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\marketplace.py:89: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class BundleResponse(BaseModel):

app\schemas\marketplace.py:119
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\marketplace.py:119: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class PlanResponse(BaseModel):

app\schemas\marketplace.py:134
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\marketplace.py:134: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class SubscriptionResponse(BaseModel):

app\api\api_v1\endpoints\revenue_analytics.py:54
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\revenue_analytics.py:54: DeprecationWarning: `regex` has been deprecated, please use `pattern` instead
    comparison_type: str = Query("mom", regex="^(mom|yoy|custom)$"),

app\schemas\payment_method.py:37
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\payment_method.py:37: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class PaymentMethodResponse(BaseModel):

app\schemas\translation.py:42
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\translation.py:42: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Language(LanguageBase):

app\schemas\translation.py:75
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\translation.py:75: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Translation(TranslationBase):

app\schemas\translation.py:126
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\translation.py:126: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ContentTranslation(ContentTranslationBase):

app\schemas\translation.py:187
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\translation.py:187: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class UserLanguagePreference(UserLanguagePreferenceBase):

app\api\api_v1\endpoints\ai_tools.py:31
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\ai_tools.py:31: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EssayGradeResponse(BaseModel):

app\api\api_v1\endpoints\ai_tools.py:67
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\ai_tools.py:67: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DifficultyAnalysisResponse(BaseModel):

app\api\api_v1\endpoints\ai_tools.py:86
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\ai_tools.py:86: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class PlagiarismCheckResponse(BaseModel):

app\api\api_v1\endpoints\sso.py:45
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\sso.py:45: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class OrganizationResponse(BaseModel):

app\api\api_v1\endpoints\sso.py:78
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\sso.py:78: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class SSOConfigResponse(BaseModel):

app\api\api_v1\endpoints\sso.py:98
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\sso.py:98: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class SSOSessionResponse(BaseModel):

app\api\api_v1\endpoints\sso.py:109
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\sso.py:109: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class SSOEventResponse(BaseModel):

app\schemas\tax.py:61
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\tax.py:61: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TaxRateResponse(TaxRateBase):

app\schemas\tax.py:101
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\tax.py:101: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TaxCalculationDetail(BaseModel):

app\schemas\tax.py:152
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\tax.py:152: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TaxExemptionResponse(TaxExemptionBase):

app\api\api_v1\endpoints\exports.py:25
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\exports.py:25: DeprecationWarning: `regex` has been deprecated, please use `pattern` instead
    format: str = Query("csv", regex="^(csv|pdf|json)$"),

app\api\api_v1\endpoints\exports.py:75
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\exports.py:75: DeprecationWarning: `regex` has been deprecated, please use `pattern` instead
    format: str = Query("json", regex="^(json|pdf)$"),

app\api\api_v1\endpoints\exports.py:117
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\exports.py:117: DeprecationWarning: `regex` has been deprecated, please use `pattern` instead
    format: str = Query("json", regex="^(json|pdf)$"),

app\api\api_v1\endpoints\exports.py:156
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\exports.py:156: DeprecationWarning: `regex` has been deprecated, please use `pattern` instead
    format: str = Query("csv", regex="^(csv|pdf)$"),

app\api\api_v1\endpoints\learning_groups.py:39
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\learning_groups.py:39: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class GroupResponse(BaseModel):

app\api\api_v1\endpoints\learning_groups.py:58
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\learning_groups.py:58: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class PostResponse(BaseModel):

app/tests/websocket/test_websocket_manager.py::test_websocket_batching
  D:\Graphology\Master Software\Eduecosystem\backend\app\core\websocket.py:38: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "connected_at": datetime.utcnow().isoformat(),

app/tests/websocket/test_websocket_manager.py::test_websocket_batching
  D:\Graphology\Master Software\Eduecosystem\backend\app\core\websocket.py:48: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    "timestamp": datetime.utcnow().isoformat(),

app/tests/websocket/test_websocket_manager.py::test_websocket_batching
  D:\Graphology\Master Software\Eduecosystem\backend\app\services\presence.py:47: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    presence.last_activity = datetime.utcnow()

app/tests/websocket/test_websocket_manager.py::test_websocket_batching
  D:\Graphology\Master Software\Eduecosystem\backend\app\services\presence.py:50: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    presence.last_seen = datetime.utcnow()

app/tests/websocket/test_websocket_manager.py::test_websocket_batching
  C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\schema.py:3624: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    return util.wrap_callable(lambda ctx: fn(), fn)  # type: ignore

app/tests/websocket/test_websocket_manager.py::test_websocket_batching
  D:\Graphology\Master Software\Eduecosystem\backend\app\services\presence.py:62: RuntimeWarning: coroutine 'CacheService.set' was never awaited
    cache.set(
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/integration/test_api_integration.py::test_login_success
tests/integration/test_api_integration.py::test_get_current_user
tests/integration/test_api_integration.py::test_create_course
tests/integration/test_api_integration.py::test_enroll_in_course
tests/integration/test_api_integration.py::test_gamification_coins
tests/integration/test_api_integration.py::test_achievements_list
tests/integration/test_api_integration.py::test_learning_groups_list
  D:\Graphology\Master Software\Eduecosystem\backend\app\services\coin_service.py:231: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    now = datetime.utcnow()

tests/integration/test_api_integration.py::test_login_success
tests/integration/test_api_integration.py::test_get_current_user
tests/integration/test_api_integration.py::test_create_course
tests/integration/test_api_integration.py::test_enroll_in_course
tests/integration/test_api_integration.py::test_gamification_coins
tests/integration/test_api_integration.py::test_achievements_list
tests/integration/test_api_integration.py::test_learning_groups_list
  D:\Graphology\Master Software\Eduecosystem\backend\app\core\security.py:16: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    expire = datetime.utcnow() + expires_delta

tests/integration/test_api_integration.py::test_login_success
tests/integration/test_api_integration.py::test_login_wrong_password
tests/integration/test_api_integration.py::test_get_current_user
tests/integration/test_api_integration.py::test_create_course
tests/integration/test_api_integration.py::test_enroll_in_course
tests/integration/test_api_integration.py::test_gamification_coins
tests/integration/test_api_integration.py::test_achievements_list
tests/integration/test_api_integration.py::test_learning_groups_list
  D:\Graphology\Master Software\Eduecosystem\backend\tests\integration\test_api_integration.py:38: SAWarning: Can't sort tables for DROP; an unresolvable foreign key dependency exists between tables: lessons, modules, quizzes; and backend does not support ALTER.  To restore at least a partial sort, apply use_alter=True to ForeignKey and ForeignKeyConstraint objects involved in the cycle to mark these as known cycles that will be ignored.
    Base.metadata.drop_all(bind=engine)

tests/integration/test_websocket.py::TestNotificationsWebSocket::test_notifications_connection
  D:\Graphology\Master Software\Eduecosystem\backend\app\core\security.py:18: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    expire = datetime.utcnow() + timedelta(

tests/test_two_factor_flow.py::test_2fa_login_verification
  D:\Graphology\Master Software\Eduecosystem\backend\conftest.py:74: SAWarning: Can't sort tables for DROP; an unresolvable foreign key dependency exists between tables: lessons, modules, quizzes; and backend does not support ALTER.  To restore at least a partial sort, apply use_alter=True to ForeignKey and ForeignKeyConstraint objects involved in the cycle to mark these as known cycles that will be ignored.
    Base.metadata.drop_all(bind=engine)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED app/tests/test_email_notifications.py::TestEmailTemplates::test_create_template
FAILED app/tests/websocket/test_websocket_manager.py::test_websocket_batching
FAILED tests/integration/test_api_integration.py::test_create_course - assert...
FAILED tests/integration/test_api_integration.py::test_enroll_in_course - Key...
FAILED tests/integration/test_api_integration.py::test_learning_groups_list
FAILED tests/integration/test_websocket.py::TestNotificationsWebSocket::test_notifications_connection
FAILED tests/integration/test_websocket.py::TestQuizWebSocket::test_quiz_connection
FAILED tests/integration/test_websocket.py::TestQuizWebSocket::test_answer_submission_broadcast
FAILED tests/test_sso_oauth.py::test_oauth_login_flow - assert 405 == 200
ERROR app/tests/api/api_v1/test_peer_reviews_flow.py::test_peer_review_flow
ERROR app/tests/api/test_live_class_interactive.py::test_create_poll - NameEr...
ERROR app/tests/api/test_live_class_interactive.py::test_get_polls - NameErro...
ERROR app/tests/api/test_live_class_interactive.py::test_ask_question - NameE...
ERROR app/tests/api/test_live_class_interactive.py::test_send_chat_message - ...
ERROR app/tests/test_email_notifications.py::TestEmailIntegration::test_enrollment_triggers_email
ERROR tests/api/api_v1/test_sso_integration.py::test_sso_full_flow - NameErro...
ERROR tests/api/api_v1/test_sso_integration.py::test_sso_saml_flow - NameErro...
ERROR tests/api/test_admin.py::test_admin_stats_endpoint - NameError: name 'a...
ERROR tests/api/test_admin.py::test_admin_only_access - NameError: name 'app'...
ERROR tests/api/test_admin.py::test_list_all_users - NameError: name 'app' is...
ERROR tests/api/test_admin.py::test_search_users - NameError: name 'app' is n...
ERROR tests/api/test_admin.py::test_ban_user - NameError: name 'app' is not d...
ERROR tests/api/test_admin.py::test_unban_user - NameError: name 'app' is not...
ERROR tests/api/test_admin.py::test_promote_to_admin - NameError: name 'app' ...
ERROR tests/api/test_admin.py::test_delete_user - NameError: name 'app' is no...
ERROR tests/api/test_admin.py::test_cannot_delete_admin - NameError: name 'ap...
ERROR tests/api/test_admin.py::test_get_user_details - NameError: name 'app' ...
ERROR tests/api/test_admin.py::test_admin_logs - NameError: name 'app' is not...
ERROR tests/api/test_admin.py::test_filter_users_by_role - NameError: name 'a...
ERROR tests/api/test_admin.py::test_filter_banned_users - NameError: name 'ap...
ERROR tests/api/test_admin.py::test_unauthorized_admin_access - NameError: na...
ERROR tests/api/test_analytics.py::test_dashboard_analytics_basic - NameError...
ERROR tests/api/test_analytics.py::test_analytics_with_shadow_sessions - Name...
ERROR tests/api/test_analytics.py::test_analytics_handwriting_count - NameErr...
ERROR tests/api/test_analytics.py::test_analytics_insights_generation - NameE...
ERROR tests/api/test_analytics.py::test_analytics_attention_tracking - NameEr...
ERROR tests/api/test_analytics.py::test_detailed_analytics - NameError: name ...
ERROR tests/api/test_analytics.py::test_analytics_with_activity_heatmap - Nam...
ERROR tests/api/test_analytics.py::test_analytics_empty_state - NameError: na...
ERROR tests/api/test_analytics.py::test_unauthorized_analytics_access - NameE...
ERROR tests/api/test_announcements.py::test_create_announcement - NameError: ...
ERROR tests/api/test_announcements.py::test_get_course_announcements - NameEr...
ERROR tests/api/test_announcements.py::test_mark_announcement_as_read - NameE...
ERROR tests/api/test_announcements.py::test_get_unread_announcements_count - ...
ERROR tests/api/test_announcements.py::test_pin_announcement - NameError: nam...
ERROR tests/api/test_announcements.py::test_delete_announcement - NameError: ...
ERROR tests/api/test_certificate_templates.py::test_create_certificate_template
ERROR tests/api/test_certificate_templates.py::test_get_my_templates - NameEr...
ERROR tests/api/test_certificate_templates.py::test_update_template - NameErr...
ERROR tests/api/test_certificate_templates.py::test_set_default_template - Na...
ERROR tests/api/test_certificate_templates.py::test_delete_template - NameErr...
ERROR tests/api/test_certificate_templates.py::test_cannot_delete_default_template
ERROR tests/api/test_certificates.py::test_get_my_certificates - NameError: n...
ERROR tests/api/test_certificates.py::test_download_certificate - NameError: ...
ERROR tests/api/test_collaborative_projects.py::test_create_team_and_join - N...
ERROR tests/api/test_discussions.py::test_create_discussion_category - NameEr...
ERROR tests/api/test_discussions.py::test_create_discussion_thread - NameErro...
ERROR tests/api/test_discussions.py::test_reply_to_thread - NameError: name '...
ERROR tests/api/test_discussions.py::test_vote_on_post - NameError: name 'app...
ERROR tests/api/test_discussions.py::test_mark_answer - NameError: name 'app'...
ERROR tests/api/test_discussions.py::test_search_threads - NameError: name 'a...
ERROR tests/api/test_discussions.py::test_get_thread_with_posts - NameError: ...
ERROR tests/api/test_discussions.py::test_filter_unanswered_threads - NameErr...
ERROR tests/api/test_grapho.py::test_upload_handwriting - NameError: name 'ap...
ERROR tests/api/test_groups.py::test_join_wolf_pack - NameError: name 'app' i...
ERROR tests/api/test_groups.py::test_multiple_users_same_streak_same_group - ...
ERROR tests/api/test_groups.py::test_get_my_group - NameError: name 'app' is ...
ERROR tests/api/test_groups.py::test_group_leaderboard - NameError: name 'app...
ERROR tests/api/test_groups.py::test_group_stats_calculation - NameError: nam...
ERROR tests/api/test_groups.py::test_group_max_members_enforcement - NameErro...
ERROR tests/api/test_groups.py::test_join_group_twice - NameError: name 'app'...
ERROR tests/api/test_learning_paths.py::test_create_learning_path - NameError...
ERROR tests/api/test_learning_paths.py::test_add_courses_to_path - NameError:...
ERROR tests/api/test_learning_paths.py::test_add_course_with_prerequisite - N...
ERROR tests/api/test_learning_paths.py::test_enroll_in_path - NameError: name...
ERROR tests/api/test_learning_paths.py::test_check_course_access_without_prerequisite_completion
ERROR tests/api/test_learning_paths.py::test_get_my_path_enrollments - NameEr...
ERROR tests/api/test_learning_paths.py::test_update_path_course_order - NameE...
ERROR tests/api/test_live_classes.py::test_create_live_class - NameError: nam...
ERROR tests/api/test_live_classes.py::test_get_course_live_classes - NameErro...
ERROR tests/api/test_live_classes.py::test_start_live_class - NameError: name...
ERROR tests/api/test_live_classes.py::test_join_live_class - NameError: name ...
ERROR tests/api/test_live_classes.py::test_complete_live_class_with_recording
ERROR tests/api/test_live_classes.py::test_get_live_class_attendance - NameEr...
ERROR tests/api/test_live_classes.py::test_filter_upcoming_live_classes - Nam...
ERROR tests/api/test_lms.py::test_list_courses - NameError: name 'app' is not...
ERROR tests/api/test_lms.py::test_list_courses_with_category_filter - NameErr...
ERROR tests/api/test_lms.py::test_list_courses_with_level_filter - NameError:...
ERROR tests/api/test_lms.py::test_list_courses_with_search - NameError: name ...
ERROR tests/api/test_lms.py::test_create_course_instructor_only - NameError: ...
ERROR tests/api/test_lms.py::test_create_course_student_forbidden - NameError...
ERROR tests/api/test_lms.py::test_get_course_details - NameError: name 'app' ...
ERROR tests/api/test_lms.py::test_update_course_instructor - NameError: name ...
ERROR tests/api/test_lms.py::test_delete_course_instructor - NameError: name ...
ERROR tests/api/test_lms.py::test_add_module_to_course - NameError: name 'app...
ERROR tests/api/test_lms.py::test_add_lesson_to_module - NameError: name 'app...
ERROR tests/api/test_lms.py::test_update_module - NameError: name 'app' is no...
ERROR tests/api/test_lms.py::test_delete_module - NameError: name 'app' is no...
ERROR tests/api/test_lms.py::test_delete_lesson - NameError: name 'app' is no...
ERROR tests/api/test_lms.py::test_enroll_in_free_course - NameError: name 'ap...
ERROR tests/api/test_lms.py::test_duplicate_enrollment_prevented - NameError:...
ERROR tests/api/test_lms.py::test_get_my_courses - NameError: name 'app' is n...
ERROR tests/api/test_lms.py::test_get_course_progress - NameError: name 'app'...
ERROR tests/api/test_lms.py::test_update_lesson_progress - NameError: name 'a...
ERROR tests/api/test_lms.py::test_course_progress_percentage_updates - NameEr...
ERROR tests/api/test_lms.py::test_enroll_requires_authentication - NameError:...
ERROR tests/api/test_lms.py::test_enroll_in_nonexistent_course - NameError: n...
ERROR tests/api/test_lms.py::test_get_certificate_not_completed - NameError: ...
ERROR tests/api/test_lms.py::test_get_my_certificates_empty - NameError: name...
ERROR tests/api/test_lms.py::test_certificate_requires_authentication - NameE...
ERROR tests/api/test_lms.py::test_download_certificate_unauthorized - NameErr...
ERROR tests/api/test_monitoring.py::test_exam_monitoring_flow - NameError: na...
ERROR tests/api/test_notes.py::test_create_lesson_note - NameError: name 'app...
ERROR tests/api/test_notes.py::test_get_lesson_notes - NameError: name 'app' ...
ERROR tests/api/test_notes.py::test_search_notes - NameError: name 'app' is n...
ERROR tests/api/test_notes.py::test_bookmark_lesson - NameError: name 'app' i...
ERROR tests/api/test_notes.py::test_unbookmark_lesson - NameError: name 'app'...
ERROR tests/api/test_notes.py::test_bookmark_course - NameError: name 'app' i...
ERROR tests/api/test_notes.py::test_get_my_bookmarks - NameError: name 'app' ...
ERROR tests/api/test_peer_reviews.py::test_create_peer_review_assignment - Na...
ERROR tests/api/test_peer_reviews.py::test_peer_review_flow - NameError: name...
ERROR tests/api/test_question_banks.py::test_create_question_bank - NameError...
ERROR tests/api/test_question_banks.py::test_list_question_banks - NameError:...
ERROR tests/api/test_question_banks.py::test_update_question_bank - NameError...
ERROR tests/api/test_question_banks.py::test_delete_question_bank - NameError...
ERROR tests/api/test_question_banks.py::test_create_bank_question - NameError...
ERROR tests/api/test_question_banks.py::test_generate_quiz_from_banks - NameE...
ERROR tests/api/test_shadow_mode.py::test_start_shadow_session - NameError: n...
ERROR tests/api/test_shadow_mode.py::test_start_session_with_active_session
ERROR tests/api/test_shadow_mode.py::test_end_shadow_session - NameError: nam...
ERROR tests/api/test_shadow_mode.py::test_end_session_without_active - NameEr...
ERROR tests/api/test_shadow_mode.py::test_get_shadow_progress - NameError: na...
ERROR tests/api/test_shadow_mode.py::test_get_current_session - NameError: na...
ERROR tests/api/test_shadow_mode.py::test_coin_calculation_accuracy - NameErr...
ERROR tests/api/test_shadow_mode.py::test_session_with_notes - NameError: nam...
ERROR tests/integration/test_subscription_lifecycle.py::test_subscription_lifecycle_integration
ERROR tests/integration/test_websocket.py::TestDiscussionWebSocket::test_websocket_connection_authorized
ERROR tests/integration/test_websocket.py::TestDiscussionWebSocket::test_typing_indicator
ERROR tests/integration/test_websocket.py::TestDiscussionWebSocket::test_multiple_users_discussion
ERROR tests/integration/test_websocket.py::TestLiveClassWebSocket::test_live_class_connection
ERROR tests/integration/test_websocket.py::TestLiveClassWebSocket::test_chat_message_broadcast
ERROR tests/integration/test_websocket.py::TestLiveClassWebSocket::test_reaction_broadcast
ERROR tests/integration/test_websocket.py::TestLiveClassWebSocket::test_participant_tracking
ERROR tests/integration/test_websocket.py::TestWebSocketConnectionManager::test_heartbeat_mechanism
ERROR tests/integration/test_websocket.py::TestWebSocketConnectionManager::test_connection_cleanup_on_disconnect
ERROR tests/test_reviews.py::test_course_reviews_workflow - NameError: name '...
ERROR tests/test_subscriptions_flow.py::test_subscribe_user - NameError: name...
ERROR tests/test_subscriptions_flow.py::test_subscribe_with_trial - NameError...
ERROR tests/test_subscriptions_flow.py::test_subscribe_yearly - NameError: na...
ERROR tests/test_subscriptions_flow.py::test_duplicate_subscription - NameErr...
ERROR tests/test_subscriptions_flow.py::test_cancel_subscription_at_period_end
ERROR tests/test_subscriptions_flow.py::test_cancel_subscription_immediately
ERROR tests/test_subscriptions_flow.py::test_check_access - NameError: name '...
ERROR tests/test_subscriptions_flow.py::test_get_user_subscription - NameErro...
ERROR tests/test_two_factor_flow.py::test_2fa_login_verification - NameError:...
= 9 failed, 5 passed, 18 deselected, 70 warnings, 146 errors in 93.06s (0:01:33) =
