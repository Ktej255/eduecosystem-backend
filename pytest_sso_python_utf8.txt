============================= test session starts =============================
platform win32 -- Python 3.13.2, pytest-9.0.1, pluggy-1.6.0 -- C:\Users\Sarit\AppData\Local\Programs\Python\Python313\python.exe
cachedir: .pytest_cache
rootdir: D:\Graphology\Master Software\Eduecosystem\backend
configfile: pytest.ini
plugins: anyio-4.11.0, asyncio-1.3.0, cov-7.0.0, mock-3.15.1
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 2 items

tests/api/api_v1/test_sso_integration.py::test_sso_full_flow ERROR       [ 50%]
tests/api/api_v1/test_sso_integration.py::test_sso_saml_flow ERROR       [100%]

=================================== ERRORS ====================================
____________________ ERROR at setup of test_sso_full_flow _____________________

fixturedef = <FixtureDef argname='create_test_db' scope='session' baseid=''>
request = <SubRequest 'create_test_db' for <Function test_sso_full_flow>>

    @pytest.hookimpl(wrapper=True)
    def pytest_fixture_setup(fixturedef: FixtureDef, request) -> object | None:
        asyncio_mode = _get_asyncio_mode(request.config)
        if not _is_asyncio_fixture_function(fixturedef.func):
            if asyncio_mode == Mode.STRICT:
                # Ignore async fixtures without explicit asyncio mark in strict mode
                # This applies to pytest_trio fixtures, for example
>               return (yield)
                        ^^^^^

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _
conftest.py:64: in create_test_db
    raise e
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

    @pytest.fixture(scope="session", autouse=True)
    def create_test_db():
        print("DEBUG: Starting create_test_db")
        # Create tables
        try:
>           Base.metadata.create_all(bind=engine)
            ^^^^
E           NameError: name 'Base' is not defined

conftest.py:60: NameError
---------------------------- Captured stdout setup ----------------------------
DEBUG: Starting create_test_db
DEBUG: Error creating tables: name 'Base' is not defined
____________________ ERROR at setup of test_sso_saml_flow _____________________

    @pytest.fixture(scope="session", autouse=True)
    def create_test_db():
        print("DEBUG: Starting create_test_db")
        # Create tables
        try:
            Base.metadata.create_all(bind=engine)
            print("DEBUG: Tables created")
        except Exception as e:
            print(f"DEBUG: Error creating tables: {e}")
>           raise e

conftest.py:64: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _

    @pytest.fixture(scope="session", autouse=True)
    def create_test_db():
        print("DEBUG: Starting create_test_db")
        # Create tables
        try:
>           Base.metadata.create_all(bind=engine)
            ^^^^
E           NameError: name 'Base' is not defined

conftest.py:60: NameError
============================== warnings summary ===============================
app\schemas\coupon.py:28
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\coupon.py:28: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("discount_type")

app\schemas\coupon.py:34
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\coupon.py:34: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator("discount_value")

app\schemas\coupon.py:54
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\coupon.py:54: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Coupon(CouponBase):

app\schemas\digital_product.py:26
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\digital_product.py:26: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DigitalProductInDBBase(DigitalProductBase):

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\_internal\_config.py:383
  C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\_internal\_config.py:383: UserWarning: Valid config keys have changed in V2:
  * 'orm_mode' has been renamed to 'from_attributes'
    warnings.warn(message, UserWarning)

app\schemas\enquiry.py:25
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\enquiry.py:25: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EnquiryInDBBase(EnquiryBase):

app\schemas\asset.py:24
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\asset.py:24: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AssetInDBBase(AssetBase):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
ERROR tests/api/api_v1/test_sso_integration.py::test_sso_full_flow - NameErro...
ERROR tests/api/api_v1/test_sso_integration.py::test_sso_saml_flow - NameErro...
======================= 7 warnings, 2 errors in 10.79s ========================
