# ==============================================
# Holistic Learning Ecosystem - Backend Configuration
# ==============================================

# Environment
ENVIRONMENT=development
DEBUG=True

# ==============================================
# Database Configuration
# ==============================================

# Development (SQLite)
DATABASE_URL=sqlite:///./eduecosystem.db

# Production (PostgreSQL)
# DATABASE_URL=postgresql://username:password@localhost:5432/eduecosystem
# Or use this format for Railway/Heroku (provided automatically)
# DATABASE_URL=postgresql://user:pass@host:5432/dbname

# ==============================================
# Security & Authentication
# ==============================================

# Secret key for JWT tokens (CHANGE THIS IN PRODUCTION!)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
SECRET_KEY=dev-secret-key-change-in-production-use-64-char-random-string

# JWT Configuration
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=10080  # 7 days

# ==============================================
# API Configuration
# ==============================================

# API prefix
API_V1_STR=/api/v1

# CORS - Allowed origins (comma-separated)
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# ==============================================
# Redis Cache (Optional but Recommended)
# ==============================================

# Local Redis
REDIS_URL=redis://localhost:6379/0

# Redis Cloud/Railway (use provided URL)
# REDIS_URL=redis://default:password@host:port

# Cache settings
CACHE_ENABLED=true
CACHE_TTL=300  # seconds

# ==============================================
# Email Configuration
# ==============================================

# Email service provider (sendgrid, smtp, ses)
EMAIL_PROVIDER=smtp

# SendGrid (recommended)
SENDGRID_API_KEY=your-sendgrid-api-key-here
EMAIL_FROM=noreply@yourdomain.com
EMAIL_FROM_NAME=Holistic Learning Ecosystem

# SMTP (alternative)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password
SMTP_TLS=true

# AWS SES (alternative)
AWS_SES_REGION=us-east-1
AWS_SES_ACCESS_KEY=your-access-key
AWS_SES_SECRET_KEY=your-secret-key

# ==============================================
# File Storage
# ==============================================

# Storage provider (local, s3)
STORAGE_PROVIDER=local

# Local storage
UPLOAD_DIR=./uploads
MAX_UPLOAD_SIZE=104857600  # 100MB in bytes

# AWS S3
AWS_ACCESS_KEY_ID=your-access-key
AWS_SECRET_ACCESS_KEY=your-secret-key
AWS_S3_BUCKET=your-bucket-name
AWS_REGION=us-east-1
S3_ENDPOINT_URL=  # Leave empty for AWS, or use custom endpoint

# ==============================================
# Payment Gateways (Optional)
# ==============================================

# Stripe
STRIPE_SECRET_KEY=sk_test_...
STRIPE_PUBLISHABLE_KEY=pk_test_...
STRIPE_WEBHOOK_SECRET=whsec_...
STRIPE_CURRENCY=usd

# Razorpay (India)
RAZORPAY_KEY_ID=rzp_test_...
RAZORPAY_KEY_SECRET=your-secret
RAZORPAY_WEBHOOK_SECRET=your-webhook-secret

# Instamojo (India)
INSTAMOJO_API_KEY=your-api-key
INSTAMOJO_AUTH_TOKEN=your-auth-token
INSTAMOJO_ENDPOINT=https://test.instamojo.com/api/1.1/  # Use production URL in prod

# ==============================================
# External Services
# ==============================================

# OpenAI (for AI features like grading)
OPENAI_API_KEY=sk-...
OPENAI_MODEL=gpt-3.5-turbo

# Video Streaming (e.g., AWS IVS, Twilio)
VIDEO_PROVIDER=local
AWS_IVS_CHANNEL_ARN=
AWS_IVS_PLAYBACK_URL=

# ClamAV Virus Scanning
CLAMAV_ENABLED=false
CLAMAV_HOST=localhost
CLAMAV_PORT=3310

# ==============================================
# Celery Background Tasks (Optional)
# ==============================================

# Celery broker (use Redis URL)
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2

# Task scheduling
CELERY_BEAT_ENABLED=true

# ==============================================
# Frontend Configuration
# ==============================================

# Frontend URL (for CORS and email links)
FRONTEND_URL=http://localhost:3000

# ==============================================
# Monitoring & Logging
# ==============================================

# Sentry (Error Tracking)
SENTRY_DSN=https://...@sentry.io/...
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1

# Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO
LOG_FILE=./logs/app.log

# ==============================================
# Rate Limiting
# ==============================================

RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=100

# ==============================================
# Database Connection Pool
# ==============================================

DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# ==============================================
# Security Headers
# ==============================================

HSTS_ENABLED=true
HSTS_MAX_AGE=31536000
X_FRAME_OPTIONS=SAMEORIGIN

# ==============================================
# Testing (separate test database)
# ==============================================

TEST_DATABASE_URL=sqlite:///./test.db

# ==============================================
# Feature Flags
# ==============================================

FEATURE_AI_GRADING=false
FEATURE_PAYMENT=false
FEATURE_VIDEO_STREAMING=false
FEATURE_EMAIL_NOTIFICATIONS=true
FEATURE_GAMIFICATION=true

# ==============================================
# Performance
# ==============================================

# Enable response compression
GZIP_ENABLED=true
GZIP_MINIMUM_SIZE=1000

# Database query logging (disable in production)
SQL_ECHO=false

# ==============================================
# Notes
# ==============================================

# PRODUCTION CHECKLIST:
# 1. Change SECRET_KEY to a secure random value
# 2. Set DEBUG=False
# 3. Update DATABASE_URL to PostgreSQL
# 4. Configure REDIS_URL for caching
# 5. Set up email provider (SendGrid recommended)
# 6. Configure file storage (S3 recommended)
# 7. Update ALLOWED_ORIGINS to your domain
# 8. Set FRONTEND_URL to your production URL
# 9. Enable and configure Sentry for error tracking
# 10. Review and set appropriate rate limits

# SECURITY WARNINGS:
# - Never commit this file with real credentials to Git
# - Use environment variables or secrets management in production
# - Rotate keys and tokens regularly
# - Use strong, unique values for all secrets
# - Enable HTTPS in production (handled by Nginx/Load Balancer)
