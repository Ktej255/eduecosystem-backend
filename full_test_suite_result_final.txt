============================= test session starts =============================
platform win32 -- Python 3.13.2, pytest-9.0.1, pluggy-1.6.0 -- C:\Users\Sarit\AppData\Local\Programs\Python\Python313\python.exe
cachedir: .pytest_cache
rootdir: D:\Graphology\Master Software\Eduecosystem\backend
configfile: pytest.ini
plugins: anyio-4.11.0, asyncio-1.3.0, cov-7.0.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collecting ... collected 230 items

backend\tests\api\api_v1\test_sso_integration.py::test_sso_full_flow PASSED [  0%]
backend\tests\api\api_v1\test_sso_integration.py::test_sso_saml_flow PASSED [  0%]
backend\tests\api\test_admin.py::test_admin_stats_endpoint PASSED        [  1%]
backend\tests\api\test_admin.py::test_admin_only_access PASSED           [  1%]
backend\tests\api\test_admin.py::test_list_all_users PASSED              [  2%]
backend\tests\api\test_admin.py::test_search_users PASSED                [  2%]
backend\tests\api\test_admin.py::test_ban_user PASSED                    [  3%]
backend\tests\api\test_admin.py::test_unban_user PASSED                  [  3%]
backend\tests\api\test_admin.py::test_promote_to_admin PASSED            [  3%]
backend\tests\api\test_admin.py::test_delete_user PASSED                 [  4%]
backend\tests\api\test_admin.py::test_cannot_delete_admin PASSED         [  4%]
backend\tests\api\test_admin.py::test_get_user_details PASSED            [  5%]
backend\tests\api\test_admin.py::test_admin_logs PASSED                  [  5%]
backend\tests\api\test_admin.py::test_filter_users_by_role PASSED        [  6%]
backend\tests\api\test_admin.py::test_filter_banned_users PASSED         [  6%]
backend\tests\api\test_admin.py::test_unauthorized_admin_access PASSED   [  6%]
backend\tests\api\test_analytics.py::test_dashboard_analytics_basic FAILED [  7%]
backend\tests\api\test_analytics.py::test_analytics_with_shadow_sessions FAILED [  7%]
backend\tests\api\test_analytics.py::test_analytics_handwriting_count FAILED [  8%]
backend\tests\api\test_analytics.py::test_analytics_insights_generation FAILED [  8%]
backend\tests\api\test_analytics.py::test_analytics_attention_tracking FAILED [  9%]
backend\tests\api\test_analytics.py::test_detailed_analytics FAILED      [  9%]
backend\tests\api\test_analytics.py::test_analytics_with_activity_heatmap FAILED [ 10%]
backend\tests\api\test_analytics.py::test_analytics_empty_state FAILED   [ 10%]
backend\tests\api\test_analytics.py::test_unauthorized_analytics_access FAILED [ 10%]
backend\tests\api\test_announcements.py::test_create_announcement FAILED [ 11%]
backend\tests\api\test_announcements.py::test_get_course_announcements FAILED [ 11%]
backend\tests\api\test_announcements.py::test_mark_announcement_as_read FAILED [ 12%]
backend\tests\api\test_announcements.py::test_get_unread_announcements_count FAILED [ 12%]
backend\tests\api\test_announcements.py::test_pin_announcement FAILED    [ 13%]
backend\tests\api\test_announcements.py::test_delete_announcement FAILED [ 13%]
backend\tests\api\test_auth.py::test_signup PASSED                       [ 13%]
backend\tests\api\test_auth.py::test_login_access_token PASSED           [ 14%]
backend\tests\api\test_cart.py::TestCartEndpoints::test_get_empty_cart PASSED [ 14%]
backend\tests\api\test_cart.py::TestCartEndpoints::test_add_course_to_cart PASSED [ 15%]
backend\tests\api\test_cart.py::TestCartEndpoints::test_update_cart_item_quantity PASSED [ 15%]
backend\tests\api\test_cart.py::TestCartEndpoints::test_remove_cart_item PASSED [ 16%]
backend\tests\api\test_cart.py::TestCartEndpoints::test_apply_coupon_to_cart PASSED [ 16%]
backend\tests\api\test_cart.py::TestCartEndpoints::test_apply_invalid_coupon PASSED [ 16%]
backend\tests\api\test_cart.py::TestCartEndpoints::test_clear_cart PASSED [ 17%]
backend\tests\api\test_cart.py::TestCartEndpoints::test_cart_price_calculation PASSED [ 17%]
backend\tests\api\test_cart.py::TestCartEndpoints::test_guest_cart_without_auth PASSED [ 18%]
backend\tests\api\test_certificate_templates.py::test_create_certificate_template FAILED [ 18%]
backend\tests\api\test_certificate_templates.py::test_get_all_templates FAILED [ 19%]
backend\tests\api\test_certificate_templates.py::test_get_my_templates FAILED [ 19%]
backend\tests\api\test_certificate_templates.py::test_update_template FAILED [ 20%]
backend\tests\api\test_certificate_templates.py::test_set_default_template FAILED [ 20%]
backend\tests\api\test_certificate_templates.py::test_get_default_template FAILED [ 20%]
backend\tests\api\test_certificate_templates.py::test_delete_template FAILED [ 21%]
backend\tests\api\test_certificate_templates.py::test_cannot_delete_default_template FAILED [ 21%]
backend\tests\api\test_certificates.py::test_get_my_certificates FAILED  [ 22%]
backend\tests\api\test_certificates.py::test_download_certificate FAILED [ 22%]
backend\tests\api\test_certificates_simple.py::test_simple PASSED        [ 23%]
backend\tests\api\test_collaborative_projects.py::test_create_collaborative_project PASSED [ 23%]
backend\tests\api\test_collaborative_projects.py::test_create_team_and_join FAILED [ 23%]
backend\tests\api\test_collaborative_projects.py::test_submit_project PASSED [ 24%]
backend\tests\api\test_discussions.py::test_create_discussion_category FAILED [ 24%]
backend\tests\api\test_discussions.py::test_create_discussion_thread FAILED [ 25%]
backend\tests\api\test_discussions.py::test_reply_to_thread FAILED       [ 25%]
backend\tests\api\test_discussions.py::test_vote_on_post FAILED          [ 26%]
backend\tests\api\test_discussions.py::test_mark_answer FAILED           [ 26%]
backend\tests\api\test_discussions.py::test_search_threads FAILED        [ 26%]
backend\tests\api\test_discussions.py::test_get_thread_with_posts FAILED [ 27%]
backend\tests\api\test_discussions.py::test_filter_unanswered_threads FAILED [ 27%]
backend\tests\api\test_grapho.py::test_upload_handwriting PASSED         [ 28%]
backend\tests\api\test_groups.py::test_join_wolf_pack PASSED             [ 28%]
backend\tests\api\test_groups.py::test_multiple_users_same_streak_same_group PASSED [ 29%]
backend\tests\api\test_groups.py::test_get_my_group PASSED               [ 29%]
backend\tests\api\test_groups.py::test_group_leaderboard PASSED          [ 30%]
backend\tests\api\test_groups.py::test_leaderboard_limit PASSED          [ 30%]
backend\tests\api\test_groups.py::test_group_stats_calculation FAILED    [ 30%]
backend\tests\api\test_groups.py::test_group_max_members_enforcement PASSED [ 31%]
backend\tests\api\test_groups.py::test_join_group_twice PASSED           [ 31%]
backend\tests\api\test_groups.py::test_unauthorized_access PASSED        [ 32%]
backend\tests\api\test_learning_paths.py::test_create_learning_path PASSED [ 32%]
backend\tests\api\test_learning_paths.py::test_add_courses_to_path ERROR [ 33%]
backend\tests\api\test_learning_paths.py::test_add_course_with_prerequisite ERROR [ 33%]
backend\tests\api\test_learning_paths.py::test_enroll_in_path ERROR      [ 33%]
backend\tests\api\test_learning_paths.py::test_get_learning_path_by_slug ERROR [ 34%]
backend\tests\api\test_learning_paths.py::test_filter_paths_by_difficulty PASSED [ 34%]
backend\tests\api\test_learning_paths.py::test_check_course_access_without_prerequisite_completion ERROR [ 35%]
backend\tests\api\test_learning_paths.py::test_get_my_path_enrollments ERROR [ 35%]
backend\tests\api\test_learning_paths.py::test_update_path_course_order ERROR [ 36%]
backend\tests\api\test_live_classes.py::test_create_live_class ERROR     [ 36%]
backend\tests\api\test_live_classes.py::test_get_course_live_classes ERROR [ 36%]
backend\tests\api\test_live_classes.py::test_start_live_class ERROR      [ 37%]
backend\tests\api\test_live_classes.py::test_join_live_class ERROR       [ 37%]
backend\tests\api\test_live_classes.py::test_complete_live_class_with_recording ERROR [ 38%]
backend\tests\api\test_live_classes.py::test_get_live_class_attendance ERROR [ 38%]
backend\tests\api\test_live_classes.py::test_filter_upcoming_live_classes ERROR [ 39%]
backend\tests\api\test_lms.py::test_list_courses PASSED                  [ 39%]
backend\tests\api\test_lms.py::test_list_courses_with_category_filter PASSED [ 40%]
backend\tests\api\test_lms.py::test_list_courses_with_level_filter PASSED [ 40%]
backend\tests\api\test_lms.py::test_list_courses_with_search PASSED      [ 40%]
backend\tests\api\test_lms.py::test_create_course_instructor_only PASSED [ 41%]
backend\tests\api\test_lms.py::test_create_course_student_forbidden PASSED [ 41%]
backend\tests\api\test_lms.py::test_get_course_details PASSED            [ 42%]
backend\tests\api\test_lms.py::test_update_course_instructor PASSED      [ 42%]
backend\tests\api\test_lms.py::test_delete_course_instructor PASSED      [ 43%]
backend\tests\api\test_lms.py::test_add_module_to_course PASSED          [ 43%]
backend\tests\api\test_lms.py::test_add_lesson_to_module PASSED          [ 43%]
backend\tests\api\test_lms.py::test_update_module PASSED                 [ 44%]
backend\tests\api\test_lms.py::test_delete_module PASSED                 [ 44%]
backend\tests\api\test_lms.py::test_delete_lesson PASSED                 [ 45%]
backend\tests\api\test_lms.py::test_enroll_in_free_course PASSED         [ 45%]
backend\tests\api\test_lms.py::test_duplicate_enrollment_prevented PASSED [ 46%]
backend\tests\api\test_lms.py::test_get_my_courses PASSED                [ 46%]
backend\tests\api\test_lms.py::test_get_course_progress PASSED           [ 46%]
backend\tests\api\test_lms.py::test_update_lesson_progress FAILED        [ 47%]
backend\tests\api\test_lms.py::test_course_progress_percentage_updates PASSED [ 47%]
backend\tests\api\test_lms.py::test_enroll_requires_authentication PASSED [ 48%]
backend\tests\api\test_lms.py::test_enroll_in_nonexistent_course PASSED  [ 48%]
backend\tests\api\test_lms.py::test_get_certificate_not_completed FAILED [ 49%]
backend\tests\api\test_lms.py::test_get_my_certificates_empty FAILED     [ 49%]
backend\tests\api\test_lms.py::test_certificate_number_format PASSED     [ 50%]
backend\tests\api\test_lms.py::test_certificate_requires_authentication FAILED [ 50%]
backend\tests\api\test_lms.py::test_download_certificate_unauthorized PASSED [ 50%]
backend\tests\api\test_lms.py::test_certificate_fields_present PASSED    [ 51%]
backend\tests\api\test_lms.py::test_create_razorpay_payment SKIPPED      [ 51%]
backend\tests\api\test_lms.py::test_create_stripe_payment SKIPPED (R...) [ 52%]
backend\tests\api\test_lms.py::test_verify_razorpay_payment SKIPPED      [ 52%]
backend\tests\api\test_lms.py::test_get_payment_status SKIPPED (Requ...) [ 53%]
backend\tests\api\test_lms.py::test_enrollment_after_payment SKIPPED     [ 53%]
backend\tests\api\test_monitoring.py::test_exam_monitoring_flow PASSED   [ 53%]
backend\tests\api\test_notes.py::test_create_lesson_note ERROR           [ 54%]
backend\tests\api\test_notes.py::test_get_lesson_notes ERROR             [ 54%]
backend\tests\api\test_notes.py::test_search_notes ERROR                 [ 55%]
backend\tests\api\test_notes.py::test_bookmark_lesson ERROR              [ 55%]
backend\tests\api\test_notes.py::test_unbookmark_lesson ERROR            [ 56%]
backend\tests\api\test_notes.py::test_bookmark_course ERROR              [ 56%]
backend\tests\api\test_notes.py::test_get_my_bookmarks ERROR             [ 56%]
backend\tests\api\test_orders.py::TestOrderEndpoints::test_create_order_from_cart PASSED [ 57%]
backend\tests\api\test_orders.py::TestOrderEndpoints::test_create_order_with_empty_cart PASSED [ 57%]
backend\tests\api\test_orders.py::TestOrderEndpoints::test_get_order_history FAILED [ 58%]
backend\tests\api\test_orders.py::TestOrderEndpoints::test_get_order_details FAILED [ 58%]
backend\tests\api\test_orders.py::TestOrderEndpoints::test_get_order_by_number FAILED [ 59%]
backend\tests\api\test_orders.py::TestOrderEndpoints::test_cancel_pending_order FAILED [ 59%]
backend\tests\api\test_orders.py::TestOrderEndpoints::test_cannot_cancel_completed_order FAILED [ 60%]
backend\tests\api\test_orders.py::TestOrderEndpoints::test_process_order_creates_enrollments FAILED [ 60%]
backend\tests\api\test_orders.py::TestOrderEndpoints::test_order_unauthorized_access ERROR [ 60%]
backend\tests\api\test_orders.py::TestOrderEndpoints::test_guest_order_lookup PASSED [ 61%]
backend\tests\api\test_orders.py::TestOrderEndpoints::test_order_pagination PASSED [ 61%]
backend\tests\api\test_orders.py::TestOrderEndpoints::test_order_number_uniqueness PASSED [ 62%]
backend\tests\api\test_peer_reviews.py::test_create_peer_review_assignment ERROR [ 62%]
backend\tests\api\test_peer_reviews.py::test_peer_review_flow ERROR      [ 63%]
backend\tests\api\test_question_banks.py::test_create_question_bank FAILED [ 63%]
backend\tests\api\test_question_banks.py::test_list_question_banks FAILED [ 63%]
backend\tests\api\test_question_banks.py::test_update_question_bank FAILED [ 64%]
backend\tests\api\test_question_banks.py::test_delete_question_bank FAILED [ 64%]
backend\tests\api\test_question_banks.py::test_create_bank_question FAILED [ 65%]
backend\tests\api\test_question_banks.py::test_generate_quiz_from_banks FAILED [ 65%]
backend\tests\api\test_shadow_mode.py::test_start_shadow_session PASSED  [ 66%]
backend\tests\api\test_shadow_mode.py::test_start_session_with_active_session PASSED [ 66%]
backend\tests\api\test_shadow_mode.py::test_end_shadow_session PASSED    [ 66%]
backend\tests\api\test_shadow_mode.py::test_end_session_without_active PASSED [ 67%]
backend\tests\api\test_shadow_mode.py::test_get_shadow_progress PASSED   [ 67%]
backend\tests\api\test_shadow_mode.py::test_get_current_session PASSED   [ 68%]
backend\tests\api\test_shadow_mode.py::test_coin_calculation_accuracy PASSED [ 68%]
backend\tests\api\test_shadow_mode.py::test_session_with_notes PASSED    [ 69%]
backend\tests\api\test_shadow_mode.py::test_unauthorized_access PASSED   [ 69%]
backend\tests\api\test_tutor.py::test_ai_tutor_chat_unauthorized PASSED  [ 70%]
backend\tests\api\test_tutor.py::test_ai_tutor_explain_unauthorized PASSED [ 70%]
backend\tests\api\test_tutor.py::test_ai_tutor_history_unauthorized PASSED [ 70%]
backend\tests\crud\test_permissions.py::test_create_permission PASSED    [ 71%]
backend\tests\crud\test_permissions.py::test_create_role PASSED          [ 71%]
backend\tests\crud\test_permissions.py::test_assign_role_to_user PASSED  [ 72%]
backend\tests\crud\test_permissions.py::test_check_permission PASSED     [ 72%]
backend\tests\integration\test_2fa_login_flow.py::test_2fa_login_flow_integration FAILED [ 73%]
backend\tests\integration\test_api_integration.py::test_login_success PASSED [ 73%]
backend\tests\integration\test_api_integration.py::test_login_wrong_password PASSED [ 73%]
backend\tests\integration\test_api_integration.py::test_get_current_user PASSED [ 74%]
backend\tests\integration\test_api_integration.py::test_create_course PASSED [ 74%]
backend\tests\integration\test_api_integration.py::test_enroll_in_course PASSED [ 75%]
backend\tests\integration\test_api_integration.py::test_gamification_coins PASSED [ 75%]
backend\tests\integration\test_api_integration.py::test_achievements_list PASSED [ 76%]
backend\tests\integration\test_api_integration.py::test_learning_groups_list PASSED [ 76%]
backend\tests\integration\test_subscription_lifecycle.py::test_subscription_lifecycle_integration FAILED [ 76%]
backend\tests\integration\test_websocket.py::TestDiscussionWebSocket::test_websocket_connection_unauthorized PASSED [ 77%]
backend\tests\integration\test_websocket.py::TestDiscussionWebSocket::test_websocket_connection_authorized FAILED [ 77%]
backend\tests\integration\test_websocket.py::TestDiscussionWebSocket::test_typing_indicator FAILED [ 78%]
backend\tests\integration\test_websocket.py::TestDiscussionWebSocket::test_multiple_users_discussion FAILED [ 78%]
backend\tests\integration\test_websocket.py::TestLiveClassWebSocket::test_live_class_connection ERROR [ 79%]
backend\tests\integration\test_websocket.py::TestLiveClassWebSocket::test_chat_message_broadcast ERROR [ 79%]
backend\tests\integration\test_websocket.py::TestLiveClassWebSocket::test_reaction_broadcast ERROR [ 80%]
backend\tests\integration\test_websocket.py::TestLiveClassWebSocket::test_participant_tracking ERROR [ 80%]
backend\tests\integration\test_websocket.py::TestNotificationsWebSocket::test_notifications_connection FAILED [ 80%]
backend\tests\integration\test_websocket.py::TestQuizWebSocket::test_quiz_connection FAILED [ 81%]
backend\tests\integration\test_websocket.py::TestQuizWebSocket::test_answer_submission_broadcast FAILED [ 81%]
backend\tests\integration\test_websocket.py::TestWebSocketConnectionManager::test_heartbeat_mechanism FAILED [ 82%]
backend\tests\integration\test_websocket.py::TestWebSocketConnectionManager::test_connection_cleanup_on_disconnect FAILED [ 82%]
backend\tests\integration\test_websocket.py::TestRedisPubSub::test_redis_pubsub_publish_subscribe SKIPPED [ 83%]
backend\tests\test_cache_service.py::test_cache_service_availability PASSED [ 83%]
backend\tests\test_cache_service.py::test_cache_operations PASSED        [ 83%]
backend\tests\test_cache_service.py::test_cache_decorator PASSED         [ 84%]
backend\tests\test_production_readiness.py::test_health_endpoint_exists PASSED [ 84%]
backend\tests\test_production_readiness.py::test_health_endpoint_structure PASSED [ 85%]
backend\tests\test_production_readiness.py::test_health_database_check PASSED [ 85%]
backend\tests\test_production_readiness.py::test_health_cache_check PASSED [ 86%]
backend\tests\test_production_readiness.py::test_config_secret_key_exists PASSED [ 86%]
backend\tests\test_production_readiness.py::test_config_secret_key_length PASSED [ 86%]
backend\tests\test_production_readiness.py::test_config_environment_variable PASSED [ 87%]
backend\tests\test_reviews.py::test_course_reviews_workflow FAILED       [ 87%]
backend\tests\test_simple.py::test_simple PASSED                         [ 88%]
backend\tests\test_sso_oauth.py::test_oauth_login_flow ERROR             [ 88%]
backend\tests\test_subscriptions_flow.py::test_create_subscription_plan PASSED [ 89%]
backend\tests\test_subscriptions_flow.py::test_create_duplicate_plan PASSED [ 89%]
backend\tests\test_subscriptions_flow.py::test_subscribe_user ERROR      [ 90%]
backend\tests\test_subscriptions_flow.py::test_subscribe_with_trial ERROR [ 90%]
backend\tests\test_subscriptions_flow.py::test_subscribe_yearly ERROR    [ 90%]
backend\tests\test_subscriptions_flow.py::test_duplicate_subscription ERROR [ 91%]
backend\tests\test_subscriptions_flow.py::test_cancel_subscription_at_period_end ERROR [ 91%]
backend\tests\test_subscriptions_flow.py::test_cancel_subscription_immediately ERROR [ 92%]
backend\tests\test_subscriptions_flow.py::test_check_access ERROR        [ 92%]
backend\tests\test_subscriptions_flow.py::test_get_active_plans PASSED   [ 93%]
backend\tests\test_subscriptions_flow.py::test_get_user_subscription ERROR [ 93%]
backend\tests\test_tax_service.py::test_create_tax_rate PASSED           [ 93%]
backend\tests\test_tax_service.py::test_calculate_tax_no_exemption ERROR [ 94%]
backend\tests\test_tax_service.py::test_calculate_tax_inclusive ERROR    [ 94%]
backend\tests\test_tax_service.py::test_get_applicable_tax_rate PASSED   [ 95%]
backend\tests\test_tax_service.py::test_product_type_filtering PASSED    [ 95%]
backend\tests\test_tax_service.py::test_update_tax_rate PASSED           [ 96%]
backend\tests\test_tax_service.py::test_delete_tax_rate PASSED           [ 96%]
backend\tests\test_tax_service.py::test_no_tax_for_region ERROR          [ 96%]
backend\tests\test_two_factor_flow.py::test_2fa_setup_flow ERROR         [ 97%]
backend\tests\test_two_factor_flow.py::test_2fa_verify_setup_invalid_code ERROR [ 97%]
backend\tests\test_two_factor_flow.py::test_2fa_login_verification ERROR [ 98%]
backend\tests\test_two_factor_flow.py::test_2fa_backup_code_usage ERROR  [ 98%]
backend\tests\test_two_factor_flow.py::test_2fa_disable_flow ERROR       [ 99%]
backend\tests\test_two_factor_flow.py::test_2fa_status_endpoint ERROR    [ 99%]
backend\tests\test_two_factor_flow.py::test_2fa_already_enabled_setup ERROR [100%]

=================================== ERRORS ====================================
_________________ ERROR at setup of test_add_courses_to_path __________________
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2118: in _exec_insertmany_context
    dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: NOT NULL constraint failed: courses.slug

The above exception was the direct cause of the following exception:
backend\tests\api\test_learning_paths.py:86: in test_courses
    db.commit()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:2030: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1311: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1286: in _prepare_impl
    self.session.flush()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:1143: in _emit_insert_statements
    result = connection.execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1844: in _execute_context
    return self._exec_insertmany_context(dialect, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2126: in _exec_insertmany_context
    self._handle_dbapi_exception(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2118: in _exec_insertmany_context
    dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: courses.slug
E   [SQL: INSERT INTO courses (title, slug, description, long_description, thumbnail_url, preview_video_url, instructor_id, category_id, level, prerequisites, is_published, is_featured, is_password_protected, password_hash, price, currency, created_at, updated_at, published_at, total_enrollments, average_rating, total_reviews, total_duration_minutes) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING id]
E   [parameters: ('Course 1', None, 'Test course 1', None, None, None, 1, None, 'BEGINNER', '[]', 1, 0, 0, None, 0.0, 'INR', '2025-11-27 03:02:02.606879', '2025-11-27 03:02:02.606884', None, 0, 0.0, 0, 0)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
_____________ ERROR at setup of test_add_course_with_prerequisite _____________
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2118: in _exec_insertmany_context
    dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: NOT NULL constraint failed: courses.slug

The above exception was the direct cause of the following exception:
backend\tests\api\test_learning_paths.py:86: in test_courses
    db.commit()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:2030: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1311: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1286: in _prepare_impl
    self.session.flush()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:1143: in _emit_insert_statements
    result = connection.execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1844: in _execute_context
    return self._exec_insertmany_context(dialect, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2126: in _exec_insertmany_context
    self._handle_dbapi_exception(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2118: in _exec_insertmany_context
    dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: courses.slug
E   [SQL: INSERT INTO courses (title, slug, description, long_description, thumbnail_url, preview_video_url, instructor_id, category_id, level, prerequisites, is_published, is_featured, is_password_protected, password_hash, price, currency, created_at, updated_at, published_at, total_enrollments, average_rating, total_reviews, total_duration_minutes) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING id]
E   [parameters: ('Course 1', None, 'Test course 1', None, None, None, 1, None, 'BEGINNER', '[]', 1, 0, 0, None, 0.0, 'INR', '2025-11-27 03:02:03.364520', '2025-11-27 03:02:03.364527', None, 0, 0.0, 0, 0)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
____________________ ERROR at setup of test_enroll_in_path ____________________
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2118: in _exec_insertmany_context
    dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: NOT NULL constraint failed: courses.slug

The above exception was the direct cause of the following exception:
backend\tests\api\test_learning_paths.py:86: in test_courses
    db.commit()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:2030: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1311: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1286: in _prepare_impl
    self.session.flush()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:1143: in _emit_insert_statements
    result = connection.execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1844: in _execute_context
    return self._exec_insertmany_context(dialect, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2126: in _exec_insertmany_context
    self._handle_dbapi_exception(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2118: in _exec_insertmany_context
    dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: courses.slug
E   [SQL: INSERT INTO courses (title, slug, description, long_description, thumbnail_url, preview_video_url, instructor_id, category_id, level, prerequisites, is_published, is_featured, is_password_protected, password_hash, price, currency, created_at, updated_at, published_at, total_enrollments, average_rating, total_reviews, total_duration_minutes) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING id]
E   [parameters: ('Course 1', None, 'Test course 1', None, None, None, 1, None, 'BEGINNER', '[]', 1, 0, 0, None, 0.0, 'INR', '2025-11-27 03:02:04.315026', '2025-11-27 03:02:04.315031', None, 0, 0.0, 0, 0)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
______________ ERROR at setup of test_get_learning_path_by_slug _______________
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2118: in _exec_insertmany_context
    dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: NOT NULL constraint failed: courses.slug

The above exception was the direct cause of the following exception:
backend\tests\api\test_learning_paths.py:86: in test_courses
    db.commit()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:2030: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1311: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1286: in _prepare_impl
    self.session.flush()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:1143: in _emit_insert_statements
    result = connection.execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1844: in _execute_context
    return self._exec_insertmany_context(dialect, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2126: in _exec_insertmany_context
    self._handle_dbapi_exception(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2118: in _exec_insertmany_context
    dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: courses.slug
E   [SQL: INSERT INTO courses (title, slug, description, long_description, thumbnail_url, preview_video_url, instructor_id, category_id, level, prerequisites, is_published, is_featured, is_password_protected, password_hash, price, currency, created_at, updated_at, published_at, total_enrollments, average_rating, total_reviews, total_duration_minutes) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING id]
E   [parameters: ('Course 1', None, 'Test course 1', None, None, None, 1, None, 'BEGINNER', '[]', 1, 0, 0, None, 0.0, 'INR', '2025-11-27 03:02:05.013774', '2025-11-27 03:02:05.013780', None, 0, 0.0, 0, 0)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
_ ERROR at setup of test_check_course_access_without_prerequisite_completion __
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2118: in _exec_insertmany_context
    dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: NOT NULL constraint failed: courses.slug

The above exception was the direct cause of the following exception:
backend\tests\api\test_learning_paths.py:86: in test_courses
    db.commit()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:2030: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1311: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1286: in _prepare_impl
    self.session.flush()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:1143: in _emit_insert_statements
    result = connection.execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1844: in _execute_context
    return self._exec_insertmany_context(dialect, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2126: in _exec_insertmany_context
    self._handle_dbapi_exception(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2118: in _exec_insertmany_context
    dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: courses.slug
E   [SQL: INSERT INTO courses (title, slug, description, long_description, thumbnail_url, preview_video_url, instructor_id, category_id, level, prerequisites, is_published, is_featured, is_password_protected, password_hash, price, currency, created_at, updated_at, published_at, total_enrollments, average_rating, total_reviews, total_duration_minutes) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING id]
E   [parameters: ('Course 1', None, 'Test course 1', None, None, None, 1, None, 'BEGINNER', '[]', 1, 0, 0, None, 0.0, 'INR', '2025-11-27 03:02:06.212880', '2025-11-27 03:02:06.212894', None, 0, 0.0, 0, 0)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
_______________ ERROR at setup of test_get_my_path_enrollments ________________
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2118: in _exec_insertmany_context
    dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: NOT NULL constraint failed: courses.slug

The above exception was the direct cause of the following exception:
backend\tests\api\test_learning_paths.py:86: in test_courses
    db.commit()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:2030: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1311: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1286: in _prepare_impl
    self.session.flush()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:1143: in _emit_insert_statements
    result = connection.execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1844: in _execute_context
    return self._exec_insertmany_context(dialect, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2126: in _exec_insertmany_context
    self._handle_dbapi_exception(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2118: in _exec_insertmany_context
    dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: courses.slug
E   [SQL: INSERT INTO courses (title, slug, description, long_description, thumbnail_url, preview_video_url, instructor_id, category_id, level, prerequisites, is_published, is_featured, is_password_protected, password_hash, price, currency, created_at, updated_at, published_at, total_enrollments, average_rating, total_reviews, total_duration_minutes) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING id]
E   [parameters: ('Course 1', None, 'Test course 1', None, None, None, 1, None, 'BEGINNER', '[]', 1, 0, 0, None, 0.0, 'INR', '2025-11-27 03:02:07.139100', '2025-11-27 03:02:07.139106', None, 0, 0.0, 0, 0)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
_______________ ERROR at setup of test_update_path_course_order _______________
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2118: in _exec_insertmany_context
    dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: NOT NULL constraint failed: courses.slug

The above exception was the direct cause of the following exception:
backend\tests\api\test_learning_paths.py:86: in test_courses
    db.commit()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:2030: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1311: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1286: in _prepare_impl
    self.session.flush()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:1143: in _emit_insert_statements
    result = connection.execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1844: in _execute_context
    return self._exec_insertmany_context(dialect, context)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2126: in _exec_insertmany_context
    self._handle_dbapi_exception(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2118: in _exec_insertmany_context
    dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: courses.slug
E   [SQL: INSERT INTO courses (title, slug, description, long_description, thumbnail_url, preview_video_url, instructor_id, category_id, level, prerequisites, is_published, is_featured, is_password_protected, password_hash, price, currency, created_at, updated_at, published_at, total_enrollments, average_rating, total_reviews, total_duration_minutes) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) RETURNING id]
E   [parameters: ('Course 1', None, 'Test course 1', None, None, None, 1, None, 'BEGINNER', '[]', 1, 0, 0, None, 0.0, 'INR', '2025-11-27 03:02:07.832588', '2025-11-27 03:02:07.832593', None, 0, 0.0, 0, 0)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
__________________ ERROR at setup of test_create_live_class ___________________
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: NOT NULL constraint failed: courses.slug

The above exception was the direct cause of the following exception:
backend\tests\api\test_live_classes.py:127: in test_course
    db.commit()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:2030: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1311: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1286: in _prepare_impl
    self.session.flush()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: courses.slug
E   [SQL: INSERT INTO courses (title, slug, description, long_description, thumbnail_url, preview_video_url, instructor_id, category_id, level, prerequisites, is_published, is_featured, is_password_protected, password_hash, price, currency, created_at, updated_at, published_at, total_enrollments, average_rating, total_reviews, total_duration_minutes) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('Test Course for Live Classes', None, 'Course to test live classes', None, None, None, 1, None, 'BEGINNER', '[]', 1, 0, 0, None, 0.0, 'INR', '2025-11-27 03:02:08.598123', '2025-11-27 03:02:08.598133', None, 0, 0.0, 0, 0)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
---------------------------- Captured stdout setup ----------------------------
DEBUG: crud_permissions type: <class 'module'>
DEBUG: crud_permissions dir: ['List', 'Optional', 'Permission', 'PermissionCreate', 'Role', 'RoleCreate', 'RoleUpdate', 'Session', 'User', '__builtins__', '__cached__', '__doc__', '__file__', '__loader__', '__name__', '__package__', '__spec__', 'assign_role_to_user', 'assign_role_to_user_by_name', 'check_permission', 'check_role', 'create_permission', 'create_role', 'delete_role', 'get_permission', 'get_permission_by_name', 'get_permissions', 'get_permissions_count', 'get_role', 'get_role_by_name', 'get_roles', 'get_roles_count', 'get_user_permissions', 'get_user_roles', 'get_users_with_permission', 'get_users_with_role', 'joinedload', 'remove_role_from_user', 'role_permissions', 'update_role', 'user_roles']
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
_______________ ERROR at setup of test_get_course_live_classes ________________
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: NOT NULL constraint failed: courses.slug

The above exception was the direct cause of the following exception:
backend\tests\api\test_live_classes.py:127: in test_course
    db.commit()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:2030: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1311: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1286: in _prepare_impl
    self.session.flush()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: courses.slug
E   [SQL: INSERT INTO courses (title, slug, description, long_description, thumbnail_url, preview_video_url, instructor_id, category_id, level, prerequisites, is_published, is_featured, is_password_protected, password_hash, price, currency, created_at, updated_at, published_at, total_enrollments, average_rating, total_reviews, total_duration_minutes) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('Test Course for Live Classes', None, 'Course to test live classes', None, None, None, 1, None, 'BEGINNER', '[]', 1, 0, 0, None, 0.0, 'INR', '2025-11-27 03:02:09.403866', '2025-11-27 03:02:09.403872', None, 0, 0.0, 0, 0)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
---------------------------- Captured stdout setup ----------------------------
DEBUG: crud_permissions type: <class 'module'>
DEBUG: crud_permissions dir: ['List', 'Optional', 'Permission', 'PermissionCreate', 'Role', 'RoleCreate', 'RoleUpdate', 'Session', 'User', '__builtins__', '__cached__', '__doc__', '__file__', '__loader__', '__name__', '__package__', '__spec__', 'assign_role_to_user', 'assign_role_to_user_by_name', 'check_permission', 'check_role', 'create_permission', 'create_role', 'delete_role', 'get_permission', 'get_permission_by_name', 'get_permissions', 'get_permissions_count', 'get_role', 'get_role_by_name', 'get_roles', 'get_roles_count', 'get_user_permissions', 'get_user_roles', 'get_users_with_permission', 'get_users_with_role', 'joinedload', 'remove_role_from_user', 'role_permissions', 'update_role', 'user_roles']
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
___________________ ERROR at setup of test_start_live_class ___________________
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: NOT NULL constraint failed: courses.slug

The above exception was the direct cause of the following exception:
backend\tests\api\test_live_classes.py:127: in test_course
    db.commit()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:2030: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1311: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1286: in _prepare_impl
    self.session.flush()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: courses.slug
E   [SQL: INSERT INTO courses (title, slug, description, long_description, thumbnail_url, preview_video_url, instructor_id, category_id, level, prerequisites, is_published, is_featured, is_password_protected, password_hash, price, currency, created_at, updated_at, published_at, total_enrollments, average_rating, total_reviews, total_duration_minutes) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('Test Course for Live Classes', None, 'Course to test live classes', None, None, None, 1, None, 'BEGINNER', '[]', 1, 0, 0, None, 0.0, 'INR', '2025-11-27 03:02:10.101735', '2025-11-27 03:02:10.101740', None, 0, 0.0, 0, 0)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
---------------------------- Captured stdout setup ----------------------------
DEBUG: crud_permissions type: <class 'module'>
DEBUG: crud_permissions dir: ['List', 'Optional', 'Permission', 'PermissionCreate', 'Role', 'RoleCreate', 'RoleUpdate', 'Session', 'User', '__builtins__', '__cached__', '__doc__', '__file__', '__loader__', '__name__', '__package__', '__spec__', 'assign_role_to_user', 'assign_role_to_user_by_name', 'check_permission', 'check_role', 'create_permission', 'create_role', 'delete_role', 'get_permission', 'get_permission_by_name', 'get_permissions', 'get_permissions_count', 'get_role', 'get_role_by_name', 'get_roles', 'get_roles_count', 'get_user_permissions', 'get_user_roles', 'get_users_with_permission', 'get_users_with_role', 'joinedload', 'remove_role_from_user', 'role_permissions', 'update_role', 'user_roles']
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
___________________ ERROR at setup of test_join_live_class ____________________
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: NOT NULL constraint failed: courses.slug

The above exception was the direct cause of the following exception:
backend\tests\api\test_live_classes.py:127: in test_course
    db.commit()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:2030: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1311: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1286: in _prepare_impl
    self.session.flush()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: courses.slug
E   [SQL: INSERT INTO courses (title, slug, description, long_description, thumbnail_url, preview_video_url, instructor_id, category_id, level, prerequisites, is_published, is_featured, is_password_protected, password_hash, price, currency, created_at, updated_at, published_at, total_enrollments, average_rating, total_reviews, total_duration_minutes) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('Test Course for Live Classes', None, 'Course to test live classes', None, None, None, 1, None, 'BEGINNER', '[]', 1, 0, 0, None, 0.0, 'INR', '2025-11-27 03:02:11.329527', '2025-11-27 03:02:11.329532', None, 0, 0.0, 0, 0)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
---------------------------- Captured stdout setup ----------------------------
DEBUG: crud_permissions type: <class 'module'>
DEBUG: crud_permissions dir: ['List', 'Optional', 'Permission', 'PermissionCreate', 'Role', 'RoleCreate', 'RoleUpdate', 'Session', 'User', '__builtins__', '__cached__', '__doc__', '__file__', '__loader__', '__name__', '__package__', '__spec__', 'assign_role_to_user', 'assign_role_to_user_by_name', 'check_permission', 'check_role', 'create_permission', 'create_role', 'delete_role', 'get_permission', 'get_permission_by_name', 'get_permissions', 'get_permissions_count', 'get_role', 'get_role_by_name', 'get_roles', 'get_roles_count', 'get_user_permissions', 'get_user_roles', 'get_users_with_permission', 'get_users_with_role', 'joinedload', 'remove_role_from_user', 'role_permissions', 'update_role', 'user_roles']
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
__________ ERROR at setup of test_complete_live_class_with_recording __________
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: NOT NULL constraint failed: courses.slug

The above exception was the direct cause of the following exception:
backend\tests\api\test_live_classes.py:127: in test_course
    db.commit()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:2030: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1311: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1286: in _prepare_impl
    self.session.flush()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: courses.slug
E   [SQL: INSERT INTO courses (title, slug, description, long_description, thumbnail_url, preview_video_url, instructor_id, category_id, level, prerequisites, is_published, is_featured, is_password_protected, password_hash, price, currency, created_at, updated_at, published_at, total_enrollments, average_rating, total_reviews, total_duration_minutes) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('Test Course for Live Classes', None, 'Course to test live classes', None, None, None, 1, None, 'BEGINNER', '[]', 1, 0, 0, None, 0.0, 'INR', '2025-11-27 03:02:12.046686', '2025-11-27 03:02:12.046697', None, 0, 0.0, 0, 0)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
---------------------------- Captured stdout setup ----------------------------
DEBUG: crud_permissions type: <class 'module'>
DEBUG: crud_permissions dir: ['List', 'Optional', 'Permission', 'PermissionCreate', 'Role', 'RoleCreate', 'RoleUpdate', 'Session', 'User', '__builtins__', '__cached__', '__doc__', '__file__', '__loader__', '__name__', '__package__', '__spec__', 'assign_role_to_user', 'assign_role_to_user_by_name', 'check_permission', 'check_role', 'create_permission', 'create_role', 'delete_role', 'get_permission', 'get_permission_by_name', 'get_permissions', 'get_permissions_count', 'get_role', 'get_role_by_name', 'get_roles', 'get_roles_count', 'get_user_permissions', 'get_user_roles', 'get_users_with_permission', 'get_users_with_role', 'joinedload', 'remove_role_from_user', 'role_permissions', 'update_role', 'user_roles']
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
______________ ERROR at setup of test_get_live_class_attendance _______________
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: NOT NULL constraint failed: courses.slug

The above exception was the direct cause of the following exception:
backend\tests\api\test_live_classes.py:127: in test_course
    db.commit()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:2030: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1311: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1286: in _prepare_impl
    self.session.flush()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: courses.slug
E   [SQL: INSERT INTO courses (title, slug, description, long_description, thumbnail_url, preview_video_url, instructor_id, category_id, level, prerequisites, is_published, is_featured, is_password_protected, password_hash, price, currency, created_at, updated_at, published_at, total_enrollments, average_rating, total_reviews, total_duration_minutes) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('Test Course for Live Classes', None, 'Course to test live classes', None, None, None, 1, None, 'BEGINNER', '[]', 1, 0, 0, None, 0.0, 'INR', '2025-11-27 03:02:12.826000', '2025-11-27 03:02:12.826005', None, 0, 0.0, 0, 0)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
---------------------------- Captured stdout setup ----------------------------
DEBUG: crud_permissions type: <class 'module'>
DEBUG: crud_permissions dir: ['List', 'Optional', 'Permission', 'PermissionCreate', 'Role', 'RoleCreate', 'RoleUpdate', 'Session', 'User', '__builtins__', '__cached__', '__doc__', '__file__', '__loader__', '__name__', '__package__', '__spec__', 'assign_role_to_user', 'assign_role_to_user_by_name', 'check_permission', 'check_role', 'create_permission', 'create_role', 'delete_role', 'get_permission', 'get_permission_by_name', 'get_permissions', 'get_permissions_count', 'get_role', 'get_role_by_name', 'get_roles', 'get_roles_count', 'get_user_permissions', 'get_user_roles', 'get_users_with_permission', 'get_users_with_role', 'joinedload', 'remove_role_from_user', 'role_permissions', 'update_role', 'user_roles']
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
_____________ ERROR at setup of test_filter_upcoming_live_classes _____________
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: NOT NULL constraint failed: courses.slug

The above exception was the direct cause of the following exception:
backend\tests\api\test_live_classes.py:127: in test_course
    db.commit()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:2030: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1311: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1286: in _prepare_impl
    self.session.flush()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: courses.slug
E   [SQL: INSERT INTO courses (title, slug, description, long_description, thumbnail_url, preview_video_url, instructor_id, category_id, level, prerequisites, is_published, is_featured, is_password_protected, password_hash, price, currency, created_at, updated_at, published_at, total_enrollments, average_rating, total_reviews, total_duration_minutes) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('Test Course for Live Classes', None, 'Course to test live classes', None, None, None, 1, None, 'BEGINNER', '[]', 1, 0, 0, None, 0.0, 'INR', '2025-11-27 03:02:13.559338', '2025-11-27 03:02:13.559345', None, 0, 0.0, 0, 0)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
---------------------------- Captured stdout setup ----------------------------
DEBUG: crud_permissions type: <class 'module'>
DEBUG: crud_permissions dir: ['List', 'Optional', 'Permission', 'PermissionCreate', 'Role', 'RoleCreate', 'RoleUpdate', 'Session', 'User', '__builtins__', '__cached__', '__doc__', '__file__', '__loader__', '__name__', '__package__', '__spec__', 'assign_role_to_user', 'assign_role_to_user_by_name', 'check_permission', 'check_role', 'create_permission', 'create_role', 'delete_role', 'get_permission', 'get_permission_by_name', 'get_permissions', 'get_permissions_count', 'get_role', 'get_role_by_name', 'get_roles', 'get_roles_count', 'get_user_permissions', 'get_user_roles', 'get_users_with_permission', 'get_users_with_role', 'joinedload', 'remove_role_from_user', 'role_permissions', 'update_role', 'user_roles']
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
__________________ ERROR at setup of test_create_lesson_note __________________
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: NOT NULL constraint failed: courses.slug

The above exception was the direct cause of the following exception:
backend\tests\api\test_notes.py:37: in test_course_with_lesson
    db.flush()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: courses.slug
E   [SQL: INSERT INTO courses (title, slug, description, long_description, thumbnail_url, preview_video_url, instructor_id, category_id, level, prerequisites, is_published, is_featured, is_password_protected, password_hash, price, currency, created_at, updated_at, published_at, total_enrollments, average_rating, total_reviews, total_duration_minutes) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('Test Course', None, None, None, None, None, 1, None, 'BEGINNER', '[]', 1, 0, 0, None, 0.0, 'INR', '2025-11-27 03:02:32.328157', '2025-11-27 03:02:32.328161', None, 0, 0.0, 0, 0)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
___________________ ERROR at setup of test_get_lesson_notes ___________________
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: NOT NULL constraint failed: courses.slug

The above exception was the direct cause of the following exception:
backend\tests\api\test_notes.py:37: in test_course_with_lesson
    db.flush()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: courses.slug
E   [SQL: INSERT INTO courses (title, slug, description, long_description, thumbnail_url, preview_video_url, instructor_id, category_id, level, prerequisites, is_published, is_featured, is_password_protected, password_hash, price, currency, created_at, updated_at, published_at, total_enrollments, average_rating, total_reviews, total_duration_minutes) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('Test Course', None, None, None, None, None, 1, None, 'BEGINNER', '[]', 1, 0, 0, None, 0.0, 'INR', '2025-11-27 03:02:32.888156', '2025-11-27 03:02:32.888160', None, 0, 0.0, 0, 0)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
_____________________ ERROR at setup of test_search_notes _____________________
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: NOT NULL constraint failed: courses.slug

The above exception was the direct cause of the following exception:
backend\tests\api\test_notes.py:37: in test_course_with_lesson
    db.flush()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: courses.slug
E   [SQL: INSERT INTO courses (title, slug, description, long_description, thumbnail_url, preview_video_url, instructor_id, category_id, level, prerequisites, is_published, is_featured, is_password_protected, password_hash, price, currency, created_at, updated_at, published_at, total_enrollments, average_rating, total_reviews, total_duration_minutes) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('Test Course', None, None, None, None, None, 1, None, 'BEGINNER', '[]', 1, 0, 0, None, 0.0, 'INR', '2025-11-27 03:02:33.455495', '2025-11-27 03:02:33.455500', None, 0, 0.0, 0, 0)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
___________________ ERROR at setup of test_bookmark_lesson ____________________
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: NOT NULL constraint failed: courses.slug

The above exception was the direct cause of the following exception:
backend\tests\api\test_notes.py:37: in test_course_with_lesson
    db.flush()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: courses.slug
E   [SQL: INSERT INTO courses (title, slug, description, long_description, thumbnail_url, preview_video_url, instructor_id, category_id, level, prerequisites, is_published, is_featured, is_password_protected, password_hash, price, currency, created_at, updated_at, published_at, total_enrollments, average_rating, total_reviews, total_duration_minutes) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('Test Course', None, None, None, None, None, 1, None, 'BEGINNER', '[]', 1, 0, 0, None, 0.0, 'INR', '2025-11-27 03:02:34.074765', '2025-11-27 03:02:34.074775', None, 0, 0.0, 0, 0)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
__________________ ERROR at setup of test_unbookmark_lesson ___________________
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: NOT NULL constraint failed: courses.slug

The above exception was the direct cause of the following exception:
backend\tests\api\test_notes.py:37: in test_course_with_lesson
    db.flush()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: courses.slug
E   [SQL: INSERT INTO courses (title, slug, description, long_description, thumbnail_url, preview_video_url, instructor_id, category_id, level, prerequisites, is_published, is_featured, is_password_protected, password_hash, price, currency, created_at, updated_at, published_at, total_enrollments, average_rating, total_reviews, total_duration_minutes) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('Test Course', None, None, None, None, None, 1, None, 'BEGINNER', '[]', 1, 0, 0, None, 0.0, 'INR', '2025-11-27 03:02:34.698835', '2025-11-27 03:02:34.698840', None, 0, 0.0, 0, 0)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
___________________ ERROR at setup of test_bookmark_course ____________________
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: NOT NULL constraint failed: courses.slug

The above exception was the direct cause of the following exception:
backend\tests\api\test_notes.py:37: in test_course_with_lesson
    db.flush()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: courses.slug
E   [SQL: INSERT INTO courses (title, slug, description, long_description, thumbnail_url, preview_video_url, instructor_id, category_id, level, prerequisites, is_published, is_featured, is_password_protected, password_hash, price, currency, created_at, updated_at, published_at, total_enrollments, average_rating, total_reviews, total_duration_minutes) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('Test Course', None, None, None, None, None, 1, None, 'BEGINNER', '[]', 1, 0, 0, None, 0.0, 'INR', '2025-11-27 03:02:35.299647', '2025-11-27 03:02:35.299652', None, 0, 0.0, 0, 0)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
___________________ ERROR at setup of test_get_my_bookmarks ___________________
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: NOT NULL constraint failed: courses.slug

The above exception was the direct cause of the following exception:
backend\tests\api\test_notes.py:37: in test_course_with_lesson
    db.flush()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: courses.slug
E   [SQL: INSERT INTO courses (title, slug, description, long_description, thumbnail_url, preview_video_url, instructor_id, category_id, level, prerequisites, is_published, is_featured, is_password_protected, password_hash, price, currency, created_at, updated_at, published_at, total_enrollments, average_rating, total_reviews, total_duration_minutes) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('Test Course', None, None, None, None, None, 1, None, 'BEGINNER', '[]', 1, 0, 0, None, 0.0, 'INR', '2025-11-27 03:02:35.928733', '2025-11-27 03:02:35.928738', None, 0, 0.0, 0, 0)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
_____ ERROR at setup of TestOrderEndpoints.test_order_unauthorized_access _____
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pytest_asyncio\plugin.py:728: in pytest_fixture_setup
    return (yield)
            ^^^^^
backend\tests\conftest.py:581: in other_user_token_headers
    return authentication_token_from_email(client=client, email=email, db=db)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
backend\app\tests\utils\user.py:56: in authentication_token_from_email
    return user_authentication_headers(client=client, email=email, password=password)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
backend\app\tests\utils\user.py:20: in user_authentication_headers
    auth_token = response["access_token"]
                 ^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'access_token'
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
____________ ERROR at setup of test_create_peer_review_assignment _____________
backend\tests\api\test_peer_reviews.py:218: in test_assignment
    assert resp.status_code in [200, 201], f"Assignment creation failed: {resp.status_code} - {resp.text}"
E   AssertionError: Assignment creation failed: 404 - {"detail":"Not Found"}
E   assert 404 in [200, 201]
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
___________________ ERROR at setup of test_peer_review_flow ___________________
backend\tests\api\test_peer_reviews.py:218: in test_assignment
    assert resp.status_code in [200, 201], f"Assignment creation failed: {resp.status_code} - {resp.text}"
E   AssertionError: Assignment creation failed: 404 - {"detail":"Not Found"}
E   assert 404 in [200, 201]
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
_____ ERROR at setup of TestLiveClassWebSocket.test_live_class_connection _____
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\sqltypes.py:1709: in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'in_progress'

The above exception was the direct cause of the following exception:
backend\tests\integration\test_websocket.py:97: in test_live_class
    db.refresh(session)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:3154: in refresh
    loading.load_on_ident(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\loading.py:510: in load_on_ident
    return load_on_pk_identity(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\loading.py:706: in load_on_pk_identity
    return result.one()
           ^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\result.py:1815: in one
    return self._only_one_row(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\result.py:757: in _only_one_row
    row: Optional[_InterimRowType[Any]] = onerow(hard_close=True)
                                          ^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\result.py:1678: in _fetchone_impl
    return self._real_result._fetchone_impl(hard_close=hard_close)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\result.py:2264: in _fetchone_impl
    row = next(self.iterator, _NO_ROW)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\loading.py:220: in chunks
    fetch = cursor._raw_all_rows()
            ^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\result.py:541: in _raw_all_rows
    return [make_row(row) for row in rows]
            ^^^^^^^^^^^^^
lib/sqlalchemy/cyextension/resultproxy.pyx:22: in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
    ???
lib/sqlalchemy/cyextension/resultproxy.pyx:79: in sqlalchemy.cyextension.resultproxy._apply_processors
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\sqltypes.py:1829: in process
    value = self._object_value_for_elem(value)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\sqltypes.py:1711: in _object_value_for_elem
    raise LookupError(
E   LookupError: 'in_progress' is not among the defined enum values. Enum name: liveclassstatus. Possible values: SCHEDULED, LIVE, COMPLETED, CANCELLED
____ ERROR at setup of TestLiveClassWebSocket.test_chat_message_broadcast _____
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\sqltypes.py:1709: in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'in_progress'

The above exception was the direct cause of the following exception:
backend\tests\integration\test_websocket.py:97: in test_live_class
    db.refresh(session)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:3154: in refresh
    loading.load_on_ident(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\loading.py:510: in load_on_ident
    return load_on_pk_identity(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\loading.py:706: in load_on_pk_identity
    return result.one()
           ^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\result.py:1815: in one
    return self._only_one_row(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\result.py:757: in _only_one_row
    row: Optional[_InterimRowType[Any]] = onerow(hard_close=True)
                                          ^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\result.py:1678: in _fetchone_impl
    return self._real_result._fetchone_impl(hard_close=hard_close)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\result.py:2264: in _fetchone_impl
    row = next(self.iterator, _NO_ROW)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\loading.py:220: in chunks
    fetch = cursor._raw_all_rows()
            ^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\result.py:541: in _raw_all_rows
    return [make_row(row) for row in rows]
            ^^^^^^^^^^^^^
lib/sqlalchemy/cyextension/resultproxy.pyx:22: in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
    ???
lib/sqlalchemy/cyextension/resultproxy.pyx:79: in sqlalchemy.cyextension.resultproxy._apply_processors
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\sqltypes.py:1829: in process
    value = self._object_value_for_elem(value)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\sqltypes.py:1711: in _object_value_for_elem
    raise LookupError(
E   LookupError: 'in_progress' is not among the defined enum values. Enum name: liveclassstatus. Possible values: SCHEDULED, LIVE, COMPLETED, CANCELLED
______ ERROR at setup of TestLiveClassWebSocket.test_reaction_broadcast _______
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\sqltypes.py:1709: in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'in_progress'

The above exception was the direct cause of the following exception:
backend\tests\integration\test_websocket.py:97: in test_live_class
    db.refresh(session)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:3154: in refresh
    loading.load_on_ident(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\loading.py:510: in load_on_ident
    return load_on_pk_identity(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\loading.py:706: in load_on_pk_identity
    return result.one()
           ^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\result.py:1815: in one
    return self._only_one_row(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\result.py:757: in _only_one_row
    row: Optional[_InterimRowType[Any]] = onerow(hard_close=True)
                                          ^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\result.py:1678: in _fetchone_impl
    return self._real_result._fetchone_impl(hard_close=hard_close)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\result.py:2264: in _fetchone_impl
    row = next(self.iterator, _NO_ROW)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\loading.py:220: in chunks
    fetch = cursor._raw_all_rows()
            ^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\result.py:541: in _raw_all_rows
    return [make_row(row) for row in rows]
            ^^^^^^^^^^^^^
lib/sqlalchemy/cyextension/resultproxy.pyx:22: in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
    ???
lib/sqlalchemy/cyextension/resultproxy.pyx:79: in sqlalchemy.cyextension.resultproxy._apply_processors
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\sqltypes.py:1829: in process
    value = self._object_value_for_elem(value)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\sqltypes.py:1711: in _object_value_for_elem
    raise LookupError(
E   LookupError: 'in_progress' is not among the defined enum values. Enum name: liveclassstatus. Possible values: SCHEDULED, LIVE, COMPLETED, CANCELLED
_____ ERROR at setup of TestLiveClassWebSocket.test_participant_tracking ______
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\sqltypes.py:1709: in _object_value_for_elem
    return self._object_lookup[elem]  # type: ignore[return-value]
           ^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'in_progress'

The above exception was the direct cause of the following exception:
backend\tests\integration\test_websocket.py:97: in test_live_class
    db.refresh(session)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:3154: in refresh
    loading.load_on_ident(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\loading.py:510: in load_on_ident
    return load_on_pk_identity(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\loading.py:706: in load_on_pk_identity
    return result.one()
           ^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\result.py:1815: in one
    return self._only_one_row(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\result.py:757: in _only_one_row
    row: Optional[_InterimRowType[Any]] = onerow(hard_close=True)
                                          ^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\result.py:1678: in _fetchone_impl
    return self._real_result._fetchone_impl(hard_close=hard_close)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\result.py:2264: in _fetchone_impl
    row = next(self.iterator, _NO_ROW)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\loading.py:220: in chunks
    fetch = cursor._raw_all_rows()
            ^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\result.py:541: in _raw_all_rows
    return [make_row(row) for row in rows]
            ^^^^^^^^^^^^^
lib/sqlalchemy/cyextension/resultproxy.pyx:22: in sqlalchemy.cyextension.resultproxy.BaseRow.__init__
    ???
lib/sqlalchemy/cyextension/resultproxy.pyx:79: in sqlalchemy.cyextension.resultproxy._apply_processors
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\sqltypes.py:1829: in process
    value = self._object_value_for_elem(value)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\sqltypes.py:1711: in _object_value_for_elem
    raise LookupError(
E   LookupError: 'in_progress' is not among the defined enum values. Enum name: liveclassstatus. Possible values: SCHEDULED, LIVE, COMPLETED, CANCELLED
___________________ ERROR at setup of test_oauth_login_flow ___________________
file D:\Graphology\Master Software\Eduecosystem\backend\tests\test_sso_oauth.py, line 35
  def test_oauth_login_flow(db_session, mock_oauth_service):
file D:\Graphology\Master Software\Eduecosystem\backend\tests\test_sso_oauth.py, line 13
  @pytest.fixture
  def db_session(mocker):
E       fixture 'mocker' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, client, cov, create_test_db, db, db_session, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_oauth_service, mock_redis, mock_services, monkeypatch, no_cover, normal_user_token_headers, other_user_token_headers, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, superuser_token_headers, test_cart_item, test_cart_with_items, test_completed_order, test_coupon, test_course, test_empty_cart, test_guest_order, test_order, test_pending_order, test_pending_order_with_courses, test_user, test_user_headers, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

D:\Graphology\Master Software\Eduecosystem\backend\tests\test_sso_oauth.py:13
____________________ ERROR at setup of test_subscribe_user ____________________
file D:\Graphology\Master Software\Eduecosystem\backend\tests\test_subscriptions_flow.py, line 55
  @pytest.mark.asyncio
  async def test_subscribe_user(db: Session, normal_user: User):
      """Test subscribing a user to a plan"""
      # Create plan
      plan = SubscriptionService.create_plan(
          db=db,
          name="Monthly Plan",
          monthly_price=Decimal("19.99")
      )

      # Subscribe user
      subscription = await SubscriptionService.subscribe_user(
          db=db,
          user_id=normal_user.id,
          plan_id=plan.id,
          billing_cycle="monthly"
      )

      assert subscription.id is not None
      assert subscription.user_id == normal_user.id
      assert subscription.plan_id == plan.id
      assert subscription.billing_cycle == "monthly"
      assert subscription.price_paid == Decimal("19.99")
      assert subscription.status == "active"
      assert subscription.auto_renew is True
E       fixture 'normal_user' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, client, cov, create_test_db, db, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_redis, mock_services, monkeypatch, no_cover, normal_user_token_headers, other_user_token_headers, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, superuser_token_headers, test_cart_item, test_cart_with_items, test_completed_order, test_coupon, test_course, test_empty_cart, test_guest_order, test_order, test_pending_order, test_pending_order_with_courses, test_user, test_user_headers, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

D:\Graphology\Master Software\Eduecosystem\backend\tests\test_subscriptions_flow.py:55
_________________ ERROR at setup of test_subscribe_with_trial _________________
file D:\Graphology\Master Software\Eduecosystem\backend\tests\test_subscriptions_flow.py, line 82
  @pytest.mark.asyncio
  async def test_subscribe_with_trial(db: Session, normal_user: User):
      """Test subscription with trial period"""
      plan = SubscriptionService.create_plan(
          db=db,
          name="Trial Plan",
          monthly_price=Decimal("29.99"),
          trial_days=7
      )

      subscription = await SubscriptionService.subscribe_user(
          db=db,
          user_id=normal_user.id,
          plan_id=plan.id,
          billing_cycle="monthly"
      )

      assert subscription.status == "trial"
      assert subscription.trial_ends_at is not None
      # Trial should end approximately 7 days from now
      days_difference = (subscription.trial_ends_at - datetime.utcnow()).days
      assert 6 <= days_difference <= 8
E       fixture 'normal_user' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, client, cov, create_test_db, db, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_redis, mock_services, monkeypatch, no_cover, normal_user_token_headers, other_user_token_headers, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, superuser_token_headers, test_cart_item, test_cart_with_items, test_completed_order, test_coupon, test_course, test_empty_cart, test_guest_order, test_order, test_pending_order, test_pending_order_with_courses, test_user, test_user_headers, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

D:\Graphology\Master Software\Eduecosystem\backend\tests\test_subscriptions_flow.py:82
___________________ ERROR at setup of test_subscribe_yearly ___________________
file D:\Graphology\Master Software\Eduecosystem\backend\tests\test_subscriptions_flow.py, line 106
  @pytest.mark.asyncio
  async def test_subscribe_yearly(db: Session, normal_user: User):
      """Test yearly subscription"""
      plan = SubscriptionService.create_plan(
          db=db,
          name="Yearly Plan",
          monthly_price=Decimal("19.99"),
          yearly_price=Decimal("199.99")
      )

      subscription = await SubscriptionService.subscribe_user(
          db=db,
          user_id=normal_user.id,
          plan_id=plan.id,
          billing_cycle="yearly"
      )

      assert subscription.billing_cycle == "yearly"
      assert subscription.price_paid == Decimal("199.99")
E       fixture 'normal_user' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, client, cov, create_test_db, db, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_redis, mock_services, monkeypatch, no_cover, normal_user_token_headers, other_user_token_headers, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, superuser_token_headers, test_cart_item, test_cart_with_items, test_completed_order, test_coupon, test_course, test_empty_cart, test_guest_order, test_order, test_pending_order, test_pending_order_with_courses, test_user, test_user_headers, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

D:\Graphology\Master Software\Eduecosystem\backend\tests\test_subscriptions_flow.py:106
________________ ERROR at setup of test_duplicate_subscription ________________
file D:\Graphology\Master Software\Eduecosystem\backend\tests\test_subscriptions_flow.py, line 127
  @pytest.mark.asyncio
  async def test_duplicate_subscription(db: Session, normal_user: User):
      """Test preventing duplicate active subscriptions"""
      plan = SubscriptionService.create_plan(
          db=db,
          name="Duplicate Test",
          monthly_price=Decimal("9.99")
      )

      # First subscription
      await SubscriptionService.subscribe_user(
          db=db,
          user_id=normal_user.id,
          plan_id=plan.id
      )

      # Try to subscribe again
      with pytest.raises(ValueError, match="already has an active subscription"):
          await SubscriptionService.subscribe_user(
              db=db,
              user_id=normal_user.id,
              plan_id=plan.id
          )
E       fixture 'normal_user' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, client, cov, create_test_db, db, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_redis, mock_services, monkeypatch, no_cover, normal_user_token_headers, other_user_token_headers, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, superuser_token_headers, test_cart_item, test_cart_with_items, test_completed_order, test_coupon, test_course, test_empty_cart, test_guest_order, test_order, test_pending_order, test_pending_order_with_courses, test_user, test_user_headers, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

D:\Graphology\Master Software\Eduecosystem\backend\tests\test_subscriptions_flow.py:127
__________ ERROR at setup of test_cancel_subscription_at_period_end ___________
file D:\Graphology\Master Software\Eduecosystem\backend\tests\test_subscriptions_flow.py, line 152
  def test_cancel_subscription_at_period_end(db: Session, normal_user: User):
E       fixture 'normal_user' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, client, cov, create_test_db, db, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_redis, mock_services, monkeypatch, no_cover, normal_user_token_headers, other_user_token_headers, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, superuser_token_headers, test_cart_item, test_cart_with_items, test_completed_order, test_coupon, test_course, test_empty_cart, test_guest_order, test_order, test_pending_order, test_pending_order_with_courses, test_user, test_user_headers, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

D:\Graphology\Master Software\Eduecosystem\backend\tests\test_subscriptions_flow.py:152
___________ ERROR at setup of test_cancel_subscription_immediately ____________
file D:\Graphology\Master Software\Eduecosystem\backend\tests\test_subscriptions_flow.py, line 178
  def test_cancel_subscription_immediately(db: Session, normal_user: User):
E       fixture 'normal_user' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, client, cov, create_test_db, db, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_redis, mock_services, monkeypatch, no_cover, normal_user_token_headers, other_user_token_headers, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, superuser_token_headers, test_cart_item, test_cart_with_items, test_completed_order, test_coupon, test_course, test_empty_cart, test_guest_order, test_order, test_pending_order, test_pending_order_with_courses, test_user, test_user_headers, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

D:\Graphology\Master Software\Eduecosystem\backend\tests\test_subscriptions_flow.py:178
_____________________ ERROR at setup of test_check_access _____________________
file D:\Graphology\Master Software\Eduecosystem\backend\tests\test_subscriptions_flow.py, line 207
  def test_check_access(db: Session, normal_user: User):
E       fixture 'normal_user' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, client, cov, create_test_db, db, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_redis, mock_services, monkeypatch, no_cover, normal_user_token_headers, other_user_token_headers, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, superuser_token_headers, test_cart_item, test_cart_with_items, test_completed_order, test_coupon, test_course, test_empty_cart, test_guest_order, test_order, test_pending_order, test_pending_order_with_courses, test_user, test_user_headers, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

D:\Graphology\Master Software\Eduecosystem\backend\tests\test_subscriptions_flow.py:207
________________ ERROR at setup of test_get_user_subscription _________________
file D:\Graphology\Master Software\Eduecosystem\backend\tests\test_subscriptions_flow.py, line 266
  def test_get_user_subscription(db: Session, normal_user: User):
E       fixture 'normal_user' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, client, cov, create_test_db, db, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_redis, mock_services, monkeypatch, no_cover, normal_user_token_headers, other_user_token_headers, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, superuser_token_headers, test_cart_item, test_cart_with_items, test_completed_order, test_coupon, test_course, test_empty_cart, test_guest_order, test_order, test_pending_order, test_pending_order_with_courses, test_user, test_user_headers, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

D:\Graphology\Master Software\Eduecosystem\backend\tests\test_subscriptions_flow.py:266
______________ ERROR at setup of test_calculate_tax_no_exemption ______________
file D:\Graphology\Master Software\Eduecosystem\backend\tests\test_tax_service.py, line 32
  def test_calculate_tax_no_exemption(db: Session, normal_user: User):
E       fixture 'normal_user' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, client, cov, create_test_db, db, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_redis, mock_services, monkeypatch, no_cover, normal_user_token_headers, other_user_token_headers, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, superuser_token_headers, test_cart_item, test_cart_with_items, test_completed_order, test_coupon, test_course, test_empty_cart, test_guest_order, test_order, test_pending_order, test_pending_order_with_courses, test_user, test_user_headers, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

D:\Graphology\Master Software\Eduecosystem\backend\tests\test_tax_service.py:32
_______________ ERROR at setup of test_calculate_tax_inclusive ________________
file D:\Graphology\Master Software\Eduecosystem\backend\tests\test_tax_service.py, line 59
  def test_calculate_tax_inclusive(db: Session, normal_user: User):
E       fixture 'normal_user' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, client, cov, create_test_db, db, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_redis, mock_services, monkeypatch, no_cover, normal_user_token_headers, other_user_token_headers, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, superuser_token_headers, test_cart_item, test_cart_with_items, test_completed_order, test_coupon, test_course, test_empty_cart, test_guest_order, test_order, test_pending_order, test_pending_order_with_courses, test_user, test_user_headers, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

D:\Graphology\Master Software\Eduecosystem\backend\tests\test_tax_service.py:59
__________________ ERROR at setup of test_no_tax_for_region ___________________
file D:\Graphology\Master Software\Eduecosystem\backend\tests\test_tax_service.py, line 185
  def test_no_tax_for_region(db: Session, normal_user: User):
E       fixture 'normal_user' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, client, cov, create_test_db, db, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_redis, mock_services, monkeypatch, no_cover, normal_user_token_headers, other_user_token_headers, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, superuser_token_headers, test_cart_item, test_cart_with_items, test_completed_order, test_coupon, test_course, test_empty_cart, test_guest_order, test_order, test_pending_order, test_pending_order_with_courses, test_user, test_user_headers, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

D:\Graphology\Master Software\Eduecosystem\backend\tests\test_tax_service.py:185
____________________ ERROR at setup of test_2fa_setup_flow ____________________
file D:\Graphology\Master Software\Eduecosystem\backend\tests\test_two_factor_flow.py, line 19
  def test_2fa_setup_flow(db: Session, normal_user: User, user_token_headers: dict):
E       fixture 'normal_user' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, client, cov, create_test_db, db, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_redis, mock_services, monkeypatch, no_cover, normal_user_token_headers, other_user_token_headers, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, superuser_token_headers, test_cart_item, test_cart_with_items, test_completed_order, test_coupon, test_course, test_empty_cart, test_guest_order, test_order, test_pending_order, test_pending_order_with_courses, test_user, test_user_headers, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

D:\Graphology\Master Software\Eduecosystem\backend\tests\test_two_factor_flow.py:19
____________ ERROR at setup of test_2fa_verify_setup_invalid_code _____________
file D:\Graphology\Master Software\Eduecosystem\backend\tests\test_two_factor_flow.py, line 65
  def test_2fa_verify_setup_invalid_code(db: Session, user_token_headers: dict):
E       fixture 'user_token_headers' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, client, cov, create_test_db, db, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_redis, mock_services, monkeypatch, no_cover, normal_user_token_headers, other_user_token_headers, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, superuser_token_headers, test_cart_item, test_cart_with_items, test_completed_order, test_coupon, test_course, test_empty_cart, test_guest_order, test_order, test_pending_order, test_pending_order_with_courses, test_user, test_user_headers, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

D:\Graphology\Master Software\Eduecosystem\backend\tests\test_two_factor_flow.py:65
________________ ERROR at setup of test_2fa_login_verification ________________
file D:\Graphology\Master Software\Eduecosystem\backend\tests\test_two_factor_flow.py, line 86
  def test_2fa_login_verification(db: Session, normal_user: User):
E       fixture 'normal_user' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, client, cov, create_test_db, db, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_redis, mock_services, monkeypatch, no_cover, normal_user_token_headers, other_user_token_headers, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, superuser_token_headers, test_cart_item, test_cart_with_items, test_completed_order, test_coupon, test_course, test_empty_cart, test_guest_order, test_order, test_pending_order, test_pending_order_with_courses, test_user, test_user_headers, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

D:\Graphology\Master Software\Eduecosystem\backend\tests\test_two_factor_flow.py:86
________________ ERROR at setup of test_2fa_backup_code_usage _________________
file D:\Graphology\Master Software\Eduecosystem\backend\tests\test_two_factor_flow.py, line 119
  def test_2fa_backup_code_usage(db: Session, normal_user: User, user_token_headers: dict):
E       fixture 'normal_user' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, client, cov, create_test_db, db, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_redis, mock_services, monkeypatch, no_cover, normal_user_token_headers, other_user_token_headers, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, superuser_token_headers, test_cart_item, test_cart_with_items, test_completed_order, test_coupon, test_course, test_empty_cart, test_guest_order, test_order, test_pending_order, test_pending_order_with_courses, test_user, test_user_headers, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

D:\Graphology\Master Software\Eduecosystem\backend\tests\test_two_factor_flow.py:119
___________________ ERROR at setup of test_2fa_disable_flow ___________________
file D:\Graphology\Master Software\Eduecosystem\backend\tests\test_two_factor_flow.py, line 153
  def test_2fa_disable_flow(db: Session, normal_user: User, user_token_headers: dict):
E       fixture 'normal_user' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, client, cov, create_test_db, db, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_redis, mock_services, monkeypatch, no_cover, normal_user_token_headers, other_user_token_headers, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, superuser_token_headers, test_cart_item, test_cart_with_items, test_completed_order, test_coupon, test_course, test_empty_cart, test_guest_order, test_order, test_pending_order, test_pending_order_with_courses, test_user, test_user_headers, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

D:\Graphology\Master Software\Eduecosystem\backend\tests\test_two_factor_flow.py:153
_________________ ERROR at setup of test_2fa_status_endpoint __________________
file D:\Graphology\Master Software\Eduecosystem\backend\tests\test_two_factor_flow.py, line 187
  def test_2fa_status_endpoint(db: Session, normal_user: User, user_token_headers: dict):
E       fixture 'normal_user' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, client, cov, create_test_db, db, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_redis, mock_services, monkeypatch, no_cover, normal_user_token_headers, other_user_token_headers, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, superuser_token_headers, test_cart_item, test_cart_with_items, test_completed_order, test_coupon, test_course, test_empty_cart, test_guest_order, test_order, test_pending_order, test_pending_order_with_courses, test_user, test_user_headers, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

D:\Graphology\Master Software\Eduecosystem\backend\tests\test_two_factor_flow.py:187
______________ ERROR at setup of test_2fa_already_enabled_setup _______________
file D:\Graphology\Master Software\Eduecosystem\backend\tests\test_two_factor_flow.py, line 207
  def test_2fa_already_enabled_setup(db: Session, normal_user: User, user_token_headers: dict):
E       fixture 'normal_user' not found
>       available fixtures: _class_scoped_runner, _function_scoped_runner, _module_scoped_runner, _package_scoped_runner, _session_scoped_runner, anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, client, cov, create_test_db, db, doctest_namespace, event_loop_policy, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, mock_redis, mock_services, monkeypatch, no_cover, normal_user_token_headers, other_user_token_headers, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, superuser_token_headers, test_cart_item, test_cart_with_items, test_completed_order, test_coupon, test_course, test_empty_cart, test_guest_order, test_order, test_pending_order, test_pending_order_with_courses, test_user, test_user_headers, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory, unused_tcp_port, unused_tcp_port_factory, unused_udp_port, unused_udp_port_factory
>       use 'pytest --fixtures [testpath]' for help on them.

D:\Graphology\Master Software\Eduecosystem\backend\tests\test_two_factor_flow.py:207
================================== FAILURES ===================================
_______________________ test_dashboard_analytics_basic ________________________
backend\tests\api\test_analytics.py:34: in test_dashboard_analytics_basic
    assert r.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
_____________________ test_analytics_with_shadow_sessions _____________________
backend\tests\api\test_analytics.py:93: in test_analytics_with_shadow_sessions
    assert r.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
______________________ test_analytics_handwriting_count _______________________
backend\tests\api\test_analytics.py:128: in test_analytics_handwriting_count
    assert r.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
_____________________ test_analytics_insights_generation ______________________
backend\tests\api\test_analytics.py:152: in test_analytics_insights_generation
    assert r.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
______________________ test_analytics_attention_tracking ______________________
backend\tests\api\test_analytics.py:200: in test_analytics_attention_tracking
    assert r.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
___________________________ test_detailed_analytics ___________________________
backend\tests\api\test_analytics.py:225: in test_detailed_analytics
    assert r.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
____________________ test_analytics_with_activity_heatmap _____________________
backend\tests\api\test_analytics.py:274: in test_analytics_with_activity_heatmap
    assert r.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
_________________________ test_analytics_empty_state __________________________
backend\tests\api\test_analytics.py:304: in test_analytics_empty_state
    assert r.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
_____________________ test_unauthorized_analytics_access ______________________
backend\tests\api\test_analytics.py:320: in test_unauthorized_analytics_access
    assert r.status_code == 401
E   assert 404 == 401
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
__________________________ test_create_announcement ___________________________
backend\tests\api\test_announcements.py:123: in test_create_announcement
    assert response.status_code == 201
E   assert 404 == 201
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
________________________ test_get_course_announcements ________________________
backend\tests\api\test_announcements.py:163: in test_get_course_announcements
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
_______________________ test_mark_announcement_as_read ________________________
backend\tests\api\test_announcements.py:203: in test_mark_announcement_as_read
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
_____________________ test_get_unread_announcements_count _____________________
backend\tests\api\test_announcements.py:256: in test_get_unread_announcements_count
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
____________________________ test_pin_announcement ____________________________
backend\tests\api\test_announcements.py:295: in test_pin_announcement
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
__________________________ test_delete_announcement ___________________________
backend\tests\api\test_announcements.py:332: in test_delete_announcement
    assert response.status_code == 204
E   assert 404 == 204
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
______________________ test_create_certificate_template _______________________
backend\tests\api\test_certificate_templates.py:83: in test_create_certificate_template
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
___________________________ test_get_all_templates ____________________________
backend\tests\api\test_certificate_templates.py:119: in test_get_all_templates
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
____________________________ test_get_my_templates ____________________________
backend\tests\api\test_certificate_templates.py:151: in test_get_my_templates
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
____________________________ test_update_template _____________________________
backend\tests\api\test_certificate_templates.py:191: in test_update_template
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
__________________________ test_set_default_template __________________________
backend\tests\api\test_certificate_templates.py:260: in test_set_default_template
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
__________________________ test_get_default_template __________________________
backend\tests\api\test_certificate_templates.py:283: in test_get_default_template
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
____________________________ test_delete_template _____________________________
backend\tests\api\test_certificate_templates.py:319: in test_delete_template
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
_____________________ test_cannot_delete_default_template _____________________
backend\tests\api\test_certificate_templates.py:358: in test_cannot_delete_default_template
    assert response.status_code == 400
E   assert 404 == 400
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
__________________________ test_get_my_certificates ___________________________
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: NOT NULL constraint failed: courses.slug

The above exception was the direct cause of the following exception:
backend\tests\api\test_certificates.py:34: in test_get_my_certificates
    user, course = create_user_and_course(db)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^
backend\tests\api\test_certificates.py:22: in create_user_and_course
    db.commit()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:2030: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1311: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1286: in _prepare_impl
    self.session.flush()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: courses.slug
E   [SQL: INSERT INTO courses (title, slug, description, long_description, thumbnail_url, preview_video_url, instructor_id, category_id, level, prerequisites, is_published, is_featured, is_password_protected, password_hash, price, currency, created_at, updated_at, published_at, total_enrollments, average_rating, total_reviews, total_duration_minutes) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('Test Course', None, 'Test', None, None, None, 1, None, 'BEGINNER', '[]', 0, 0, 0, None, 0.0, 'INR', '2025-11-27 03:01:42.147908', '2025-11-27 03:01:42.147913', None, 0, 0.0, 0, 0)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
__________________________ test_download_certificate __________________________
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: NOT NULL constraint failed: courses.slug

The above exception was the direct cause of the following exception:
backend\tests\api\test_certificates.py:50: in test_download_certificate
    user, course = create_user_and_course(db)
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^
backend\tests\api\test_certificates.py:22: in create_user_and_course
    db.commit()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:2030: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1311: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1286: in _prepare_impl
    self.session.flush()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: courses.slug
E   [SQL: INSERT INTO courses (title, slug, description, long_description, thumbnail_url, preview_video_url, instructor_id, category_id, level, prerequisites, is_published, is_featured, is_password_protected, password_hash, price, currency, created_at, updated_at, published_at, total_enrollments, average_rating, total_reviews, total_duration_minutes) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('Test Course', None, 'Test', None, None, None, 1, None, 'BEGINNER', '[]', 0, 0, 0, None, 0.0, 'INR', '2025-11-27 03:01:42.887532', '2025-11-27 03:01:42.887536', None, 0, 0.0, 0, 0)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
__________________________ test_create_team_and_join __________________________
backend\tests\api\test_collaborative_projects.py:57: in test_create_team_and_join
    user2_token = authentication_token_from_email(
backend\app\tests\utils\user.py:56: in authentication_token_from_email
    return user_authentication_headers(client=client, email=email, password=password)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
backend\app\tests\utils\user.py:20: in user_authentication_headers
    auth_token = response["access_token"]
                 ^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'access_token'
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
_______________________ test_create_discussion_category _______________________
backend\tests\api\test_discussions.py:103: in test_create_discussion_category
    assert response.status_code in [200, 201]
E   assert 404 in [200, 201]
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
________________________ test_create_discussion_thread ________________________
backend\tests\api\test_discussions.py:137: in test_create_discussion_thread
    assert response.status_code in [200, 201]
E   assert 404 in [200, 201]
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
____________________________ test_reply_to_thread _____________________________
backend\tests\api\test_discussions.py:182: in test_reply_to_thread
    assert response.status_code in [200, 201]
E   assert 404 in [200, 201]
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
______________________________ test_vote_on_post ______________________________
backend\tests\api\test_discussions.py:232: in test_vote_on_post
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
______________________________ test_mark_answer _______________________________
backend\tests\api\test_discussions.py:286: in test_mark_answer
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
_____________________________ test_search_threads _____________________________
backend\tests\api\test_discussions.py:331: in test_search_threads
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
_________________________ test_get_thread_with_posts __________________________
backend\tests\api\test_discussions.py:377: in test_get_thread_with_posts
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
_______________________ test_filter_unanswered_threads ________________________
backend\tests\api\test_discussions.py:429: in test_filter_unanswered_threads
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
________________________ test_group_stats_calculation _________________________
backend\tests\api\test_groups.py:216: in test_group_stats_calculation
    assert data["total_coins"] == expected_total_coins
E   assert 615 == 600
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
_________________________ test_update_lesson_progress _________________________
backend\tests\api\test_lms.py:519: in test_update_lesson_progress
    assert response.status_code in [200, 201]
E   assert 404 in [200, 201]
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
---------------------------- Captured stdout call -----------------------------
Error emitting notification: no running event loop
Failed to send enrollment email: Email template 'course_enrollment' not found
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
_____________________ test_get_certificate_not_completed ______________________
backend\tests\api\test_lms.py:578: in test_get_certificate_not_completed
    assert response.status_code == 400
E   assert 404 == 400
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
---------------------------- Captured stdout call -----------------------------
Error emitting notification: no running event loop
Failed to send enrollment email: Email template 'course_enrollment' not found
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
_______________________ test_get_my_certificates_empty ________________________
backend\tests\api\test_lms.py:587: in test_get_my_certificates_empty
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
__________________ test_certificate_requires_authentication ___________________
backend\tests\api\test_lms.py:604: in test_certificate_requires_authentication
    assert response.status_code == 401
E   assert 404 == 401
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
__________________ TestOrderEndpoints.test_get_order_history __________________
backend\tests\api\test_orders.py:85: in test_get_order_history
    assert data["total"] >= 1
E   assert 0 >= 1
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
__________________ TestOrderEndpoints.test_get_order_details __________________
backend\tests\api\test_orders.py:101: in test_get_order_details
    assert response.status_code == 200
E   assert 403 == 200
E    +  where 403 = <Response [403 Forbidden]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
_________________ TestOrderEndpoints.test_get_order_by_number _________________
backend\tests\api\test_orders.py:120: in test_get_order_by_number
    assert response.status_code == 200
E   assert 403 == 200
E    +  where 403 = <Response [403 Forbidden]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
________________ TestOrderEndpoints.test_cancel_pending_order _________________
backend\tests\api\test_orders.py:138: in test_cancel_pending_order
    assert response.status_code == 200
E   assert 403 == 200
E    +  where 403 = <Response [403 Forbidden]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
____________ TestOrderEndpoints.test_cannot_cancel_completed_order ____________
backend\tests\api\test_orders.py:162: in test_cannot_cancel_completed_order
    assert response.status_code == 400
E   assert 403 == 400
E    +  where 403 = <Response [403 Forbidden]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
__________ TestOrderEndpoints.test_process_order_creates_enrollments __________
backend\tests\api\test_orders.py:177: in test_process_order_creates_enrollments
    assert response.status_code == 200
E   assert 403 == 200
E    +  where 403 = <Response [403 Forbidden]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
__________________________ test_create_question_bank __________________________
backend\tests\api\test_question_banks.py:153: in test_create_question_bank
    assert response.status_code == 201
E   assert 404 == 201
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
__________________________ test_list_question_banks ___________________________
backend\tests\api\test_question_banks.py:164: in test_list_question_banks
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
__________________________ test_update_question_bank __________________________
backend\tests\api\test_question_banks.py:181: in test_update_question_bank
    assert response.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
__________________________ test_delete_question_bank __________________________
backend\tests\api\test_question_banks.py:191: in test_delete_question_bank
    assert response.status_code == 204
E   assert 404 == 204
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
__________________________ test_create_bank_question __________________________
backend\tests\api\test_question_banks.py:222: in test_create_bank_question
    assert response.status_code == 201
E   assert 404 == 201
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
________________________ test_generate_quiz_from_banks ________________________
backend\tests\api\test_question_banks.py:250: in test_generate_quiz_from_banks
    quiz_id = quiz_response.json()["id"]
              ^^^^^^^^^^^^^^^^^^^^^^^^^^
E   KeyError: 'id'
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
_______________________ test_2fa_login_flow_integration _______________________
backend\tests\integration\test_2fa_login_flow.py:27: in test_2fa_login_flow_integration
    assert r.status_code == 200
E   assert 404 == 200
E    +  where 404 = <Response [404 Not Found]>.status_code
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
------------------------------ Captured log call ------------------------------
WARNING  app.middleware.request_logging:request_logging.py:89 Client error response
___________________ test_subscription_lifecycle_integration ___________________
backend\tests\integration\test_subscription_lifecycle.py:40: in test_subscription_lifecycle_integration
    with patch("app.services.subscription_service.stripe.checkout.Session.create") as mock_create:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\unittest\mock.py:1479: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\pkgutil.py:528: in resolve_name
    result = getattr(result, p)
             ^^^^^^^^^^^^^^^^^^
E   AttributeError: module 'app.services.subscription_service' has no attribute 'stripe'
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
________ TestDiscussionWebSocket.test_websocket_connection_authorized _________
backend\tests\integration\test_websocket.py:117: in test_websocket_connection_authorized
    with client.websocket_connect(f"/ws/discussions/{test_thread.id}?token={token}") as websocket:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\testclient.py:115: in __enter__
    self._raise_on_close(message)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\testclient.py:144: in _raise_on_close
    raise WebSocketDisconnect(code=message.get("code", 1000), reason=message.get("reason", ""))
E   starlette.websockets.WebSocketDisconnect
________________ TestDiscussionWebSocket.test_typing_indicator ________________
backend\tests\integration\test_websocket.py:127: in test_typing_indicator
    with client.websocket_connect(f"/ws/discussions/{test_thread.id}?token={token}") as websocket:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\testclient.py:115: in __enter__
    self._raise_on_close(message)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\testclient.py:144: in _raise_on_close
    raise WebSocketDisconnect(code=message.get("code", 1000), reason=message.get("reason", ""))
E   starlette.websockets.WebSocketDisconnect
___________ TestDiscussionWebSocket.test_multiple_users_discussion ____________
backend\tests\integration\test_websocket.py:146: in test_multiple_users_discussion
    with client.websocket_connect(f"/ws/discussions/{test_thread.id}?token={token1}") as ws1:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\testclient.py:115: in __enter__
    self._raise_on_close(message)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\testclient.py:144: in _raise_on_close
    raise WebSocketDisconnect(code=message.get("code", 1000), reason=message.get("reason", ""))
E   starlette.websockets.WebSocketDisconnect
__________ TestNotificationsWebSocket.test_notifications_connection ___________
backend\tests\integration\test_websocket.py:244: in test_notifications_connection
    with client.websocket_connect(f"/ws/notifications?token={token}") as websocket:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\testclient.py:115: in __enter__
    self._raise_on_close(message)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\testclient.py:144: in _raise_on_close
    raise WebSocketDisconnect(code=message.get("code", 1000), reason=message.get("reason", ""))
E   starlette.websockets.WebSocketDisconnect
___________________ TestQuizWebSocket.test_quiz_connection ____________________
backend\tests\integration\test_websocket.py:259: in test_quiz_connection
    quiz = Quiz(
<string>:4: in __init__
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state.py:571: in _initialize_instance
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state.py:569: in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\decl_base.py:2179: in _declarative_constructor
    raise TypeError(
E   TypeError: 'time_limit' is an invalid keyword argument for Quiz
_____________ TestQuizWebSocket.test_answer_submission_broadcast ______________
backend\tests\integration\test_websocket.py:281: in test_answer_submission_broadcast
    quiz = Quiz(
<string>:4: in __init__
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state.py:571: in _initialize_instance
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state.py:569: in _initialize_instance
    manager.original_init(*mixed[1:], **kwargs)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\decl_base.py:2179: in _declarative_constructor
    raise TypeError(
E   TypeError: 'time_limit' is an invalid keyword argument for Quiz
___________ TestWebSocketConnectionManager.test_heartbeat_mechanism ___________
backend\tests\integration\test_websocket.py:317: in test_heartbeat_mechanism
    with client.websocket_connect(f"/ws/discussions/{test_thread.id}?token={token}") as websocket:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\testclient.py:115: in __enter__
    self._raise_on_close(message)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\testclient.py:144: in _raise_on_close
    raise WebSocketDisconnect(code=message.get("code", 1000), reason=message.get("reason", ""))
E   starlette.websockets.WebSocketDisconnect
____ TestWebSocketConnectionManager.test_connection_cleanup_on_disconnect _____
backend\tests\integration\test_websocket.py:334: in test_connection_cleanup_on_disconnect
    with client.websocket_connect(f"/ws/discussions/{test_thread.id}?token={token}") as websocket:
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\testclient.py:115: in __enter__
    self._raise_on_close(message)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\starlette\testclient.py:144: in _raise_on_close
    raise WebSocketDisconnect(code=message.get("code", 1000), reason=message.get("reason", ""))
E   starlette.websockets.WebSocketDisconnect
________________________ test_course_reviews_workflow _________________________
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlite3.IntegrityError: NOT NULL constraint failed: courses.slug

The above exception was the direct cause of the following exception:
backend\tests\test_reviews.py:15: in test_course_reviews_workflow
    course = create_random_course(db, instructor_id=instructor.id)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
backend\app\tests\utils\course.py:24: in create_random_course
    db.commit()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:2030: in commit
    trans.commit(_to_root=True)
<string>:2: in commit
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1311: in commit
    self._prepare_impl()
<string>:2: in _prepare_impl
    ???
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\state_changes.py:137: in _go
    ret_value = fn(self, *arg, **kw)
                ^^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:1286: in _prepare_impl
    self.session.flush()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4331: in flush
    self._flush(objects)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4466: in _flush
    with util.safe_reraise():
         ^^^^^^^^^^^^^^^^^^^
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\util\langhelpers.py:224: in __exit__
    raise exc_value.with_traceback(exc_tb)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\session.py:4427: in _flush
    flush_context.execute()
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:466: in execute
    rec.execute(self)
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\unitofwork.py:642: in execute
    util.preloaded.orm_persistence.save_obj(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:93: in save_obj
    _emit_insert_statements(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\orm\persistence.py:1233: in _emit_insert_statements
    result = connection.execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1419: in execute
    return meth(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\elements.py:526: in _execute_on_connection
    return connection._execute_clauseelement(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1641: in _execute_clauseelement
    ret = self._execute_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1846: in _execute_context
    return self._exec_single_context(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1986: in _exec_single_context
    self._handle_dbapi_exception(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:2355: in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\base.py:1967: in _exec_single_context
    self.dialect.do_execute(
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\engine\default.py:951: in do_execute
    cursor.execute(statement, parameters)
E   sqlalchemy.exc.IntegrityError: (sqlite3.IntegrityError) NOT NULL constraint failed: courses.slug
E   [SQL: INSERT INTO courses (title, slug, description, long_description, thumbnail_url, preview_video_url, instructor_id, category_id, level, prerequisites, is_published, is_featured, is_password_protected, password_hash, price, currency, created_at, updated_at, published_at, total_enrollments, average_rating, total_reviews, total_duration_minutes) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)]
E   [parameters: ('ktjnienjpofbyrxweqyqlulcunsnxtsx', None, 'hrcuigyylmsnplsjzdtxmqibrsbgvlet', None, None, None, 2, 1, 'BEGINNER', '[]', 1, 0, 0, None, 99.99, 'INR', '2025-11-27 03:03:10.330651', '2025-11-27 03:03:10.330661', None, 0, 0.0, 0, 0)]
E   (Background on this error at: https://sqlalche.me/e/20/gkpj)
----------------------------- Captured log setup ------------------------------
WARNING  main:main.py:38 Redis cache not available - running without cache
WARNING  main:main.py:82 Redis Pub/Sub not available - WebSocket scaling disabled
============================== warnings summary ===============================
backend\app\schemas\coupon.py:28
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\coupon.py:28: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator('discount_type')

backend\app\schemas\coupon.py:34
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\coupon.py:34: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    @validator('discount_value')

backend\app\schemas\coupon.py:54
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\coupon.py:54: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Coupon(CouponBase):

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\easyocr\detection.py:81
  C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\easyocr\detection.py:81: DeprecationWarning: torch.ao.quantization is deprecated and will be removed in 2.10. 
  For migrations of users: 
  1. Eager mode quantization (torch.ao.quantization.quantize, torch.ao.quantization.quantize_dynamic), please migrate to use torchao eager mode quantize_ API instead 
  2. FX graph mode quantization (torch.ao.quantization.quantize_fx.prepare_fx,torch.ao.quantization.quantize_fx.convert_fx, please migrate to use torchao pt2e quantization API instead (prepare_pt2e, convert_pt2e) 
  3. pt2e quantization has been migrated to torchao (https://github.com/pytorch/ao/tree/main/torchao/quantization/pt2e) 
  see https://github.com/pytorch/ao/issues/2259 for more details
    torch.quantization.quantize_dynamic(net, dtype=torch.qint8, inplace=True)

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\torch\ao\quantization\quantize.py:566
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\torch\ao\quantization\quantize.py:566
  C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\torch\ao\quantization\quantize.py:566: DeprecationWarning: torch.ao.quantization is deprecated and will be removed in 2.10. 
  For migrations of users: 
  1. Eager mode quantization (torch.ao.quantization.quantize, torch.ao.quantization.quantize_dynamic), please migrate to use torchao eager mode quantize_ API instead 
  2. FX graph mode quantization (torch.ao.quantization.quantize_fx.prepare_fx,torch.ao.quantization.quantize_fx.convert_fx, please migrate to use torchao pt2e quantization API instead (prepare_pt2e, convert_pt2e) 
  3. pt2e quantization has been migrated to torchao (https://github.com/pytorch/ao/tree/main/torchao/quantization/pt2e) 
  see https://github.com/pytorch/ao/issues/2259 for more details
    convert(model, mapping, inplace=True)

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\easyocr\recognition.py:177
  C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\easyocr\recognition.py:177: DeprecationWarning: torch.ao.quantization is deprecated and will be removed in 2.10. 
  For migrations of users: 
  1. Eager mode quantization (torch.ao.quantization.quantize, torch.ao.quantization.quantize_dynamic), please migrate to use torchao eager mode quantize_ API instead 
  2. FX graph mode quantization (torch.ao.quantization.quantize_fx.prepare_fx,torch.ao.quantization.quantize_fx.convert_fx, please migrate to use torchao pt2e quantization API instead (prepare_pt2e, convert_pt2e) 
  3. pt2e quantization has been migrated to torchao (https://github.com/pytorch/ao/tree/main/torchao/quantization/pt2e) 
  see https://github.com/pytorch/ao/issues/2259 for more details
    torch.quantization.quantize_dynamic(model, dtype=torch.qint8, inplace=True)

backend\app\schemas\analytics.py:27
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\analytics.py:27: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class InstructorAnalyticsResponse(InstructorAnalyticsBase):

backend\app\schemas\analytics.py:95
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\analytics.py:95: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class StudentAnalyticsResponse(StudentAnalyticsBase):

backend\app\schemas\analytics.py:157
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\analytics.py:157: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class PlatformAnalyticsResponse(PlatformAnalyticsBase):

backend\app\schemas\analytics.py:239
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\analytics.py:239: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EventResponse(BaseModel):

backend\app\schemas\marketplace.py:42
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\marketplace.py:42: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class PayoutResponse(BaseModel):

C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\_internal\_config.py:383
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\_internal\_config.py:383
C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\_internal\_config.py:383
  C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\_internal\_config.py:383: UserWarning: Valid config keys have changed in V2:
  * 'orm_mode' has been renamed to 'from_attributes'
    warnings.warn(message, UserWarning)

backend\app\schemas\marketplace.py:78
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\marketplace.py:78: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class BundleResponse(BaseModel):

backend\app\schemas\marketplace.py:105
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\marketplace.py:105: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class PlanResponse(BaseModel):

backend\app\schemas\marketplace.py:119
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\marketplace.py:119: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class SubscriptionResponse(BaseModel):

backend\app\schemas\translation.py:36
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\translation.py:36: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Language(LanguageBase):

backend\app\schemas\translation.py:65
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\translation.py:65: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Translation(TranslationBase):

backend\app\schemas\translation.py:110
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\translation.py:110: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ContentTranslation(ContentTranslationBase):

backend\app\schemas\translation.py:162
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\translation.py:162: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class UserLanguagePreference(UserLanguagePreferenceBase):

backend\app\api\api_v1\endpoints\ai_tools.py:29
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\ai_tools.py:29: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EssayGradeResponse(BaseModel):

backend\app\api\api_v1\endpoints\ai_tools.py:61
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\ai_tools.py:61: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DifficultyAnalysisResponse(BaseModel):

backend\app\api\api_v1\endpoints\ai_tools.py:78
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\ai_tools.py:78: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class PlagiarismCheckResponse(BaseModel):

backend\app\api\api_v1\endpoints\sso.py:45
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\sso.py:45: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class OrganizationResponse(BaseModel):

backend\app\api\api_v1\endpoints\sso.py:78
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\sso.py:78: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class SSOConfigResponse(BaseModel):

backend\app\api\api_v1\endpoints\sso.py:98
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\sso.py:98: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class SSOSessionResponse(BaseModel):

backend\app\api\api_v1\endpoints\sso.py:109
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\sso.py:109: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class SSOEventResponse(BaseModel):

backend\app\api\api_v1\endpoints\revenue_analytics.py:56
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\revenue_analytics.py:56: DeprecationWarning: `regex` has been deprecated, please use `pattern` instead
    comparison_type: str = Query("mom", regex="^(mom|yoy|custom)$"),

backend\app\schemas\payment_method.py:33
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\payment_method.py:33: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class PaymentMethodResponse(BaseModel):

backend\app\schemas\tax.py:55
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\tax.py:55: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TaxRateResponse(TaxRateBase):

backend\app\schemas\tax.py:89
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\tax.py:89: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TaxCalculationDetail(BaseModel):

backend\app\schemas\tax.py:136
  D:\Graphology\Master Software\Eduecosystem\backend\app\schemas\tax.py:136: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class TaxExemptionResponse(TaxExemptionBase):

backend\app\api\api_v1\endpoints\exports.py:25
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\exports.py:25: DeprecationWarning: `regex` has been deprecated, please use `pattern` instead
    format: str = Query("csv", regex="^(csv|pdf|json)$"),

backend\app\api\api_v1\endpoints\exports.py:75
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\exports.py:75: DeprecationWarning: `regex` has been deprecated, please use `pattern` instead
    format: str = Query("json", regex="^(json|pdf)$")

backend\app\api\api_v1\endpoints\exports.py:122
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\exports.py:122: DeprecationWarning: `regex` has been deprecated, please use `pattern` instead
    format: str = Query("json", regex="^(json|pdf)$")

backend\app\api\api_v1\endpoints\exports.py:166
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\exports.py:166: DeprecationWarning: `regex` has been deprecated, please use `pattern` instead
    format: str = Query("csv", regex="^(csv|pdf)$")

backend\app\api\api_v1\endpoints\learning_groups.py:34
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\learning_groups.py:34: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class GroupResponse(BaseModel):

backend\app\api\api_v1\endpoints\learning_groups.py:53
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\learning_groups.py:53: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class PostResponse(BaseModel):

tests/api/api_v1/test_sso_integration.py: 2 warnings
tests/api/test_admin.py: 13 warnings
tests/api/test_analytics.py: 8 warnings
tests/api/test_announcements.py: 6 warnings
tests/api/test_auth.py: 1 warning
tests/api/test_cart.py: 1 warning
tests/api/test_certificate_templates.py: 6 warnings
tests/api/test_collaborative_projects.py: 3 warnings
tests/api/test_discussions.py: 8 warnings
tests/api/test_grapho.py: 1 warning
tests/api/test_groups.py: 20 warnings
tests/api/test_learning_paths.py: 1 warning
tests/api/test_lms.py: 33 warnings
tests/api/test_monitoring.py: 1 warning
tests/api/test_orders.py: 11 warnings
tests/api/test_peer_reviews.py: 6 warnings
tests/api/test_shadow_mode.py: 8 warnings
tests/integration/test_2fa_login_flow.py: 1 warning
tests/integration/test_api_integration.py: 7 warnings
tests/integration/test_subscription_lifecycle.py: 1 warning
tests/test_reviews.py: 1 warning
  D:\Graphology\Master Software\Eduecosystem\backend\app\services\coin_service.py:234: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    now = datetime.utcnow()

tests/api/api_v1/test_sso_integration.py: 4 warnings
tests/api/test_admin.py: 13 warnings
tests/api/test_analytics.py: 8 warnings
tests/api/test_announcements.py: 6 warnings
tests/api/test_auth.py: 1 warning
tests/api/test_cart.py: 1 warning
tests/api/test_certificate_templates.py: 6 warnings
tests/api/test_collaborative_projects.py: 3 warnings
tests/api/test_discussions.py: 8 warnings
tests/api/test_grapho.py: 1 warning
tests/api/test_groups.py: 20 warnings
tests/api/test_learning_paths.py: 1 warning
tests/api/test_lms.py: 33 warnings
tests/api/test_monitoring.py: 1 warning
tests/api/test_orders.py: 11 warnings
tests/api/test_peer_reviews.py: 6 warnings
tests/api/test_shadow_mode.py: 8 warnings
tests/integration/test_2fa_login_flow.py: 1 warning
tests/integration/test_api_integration.py: 7 warnings
tests/integration/test_subscription_lifecycle.py: 1 warning
tests/test_reviews.py: 1 warning
  D:\Graphology\Master Software\Eduecosystem\backend\app\core\security.py:16: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    expire = datetime.utcnow() + expires_delta

tests/api/api_v1/test_sso_integration.py::test_sso_full_flow
tests/api/api_v1/test_sso_integration.py::test_sso_saml_flow
  D:\Graphology\Master Software\Eduecosystem\backend\app\services\sso_service.py:211: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    expires_at = datetime.utcnow() + timedelta(hours=session_timeout_hours)

tests/api/test_admin.py::test_admin_stats_endpoint
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\admin.py:31: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    week_ago = datetime.utcnow() - timedelta(days=7)

tests/api/test_admin.py: 7 warnings
tests/api/test_announcements.py: 12 warnings
tests/api/test_cart.py: 16 warnings
tests/api/test_certificate_templates.py: 22 warnings
tests/api/test_certificates.py: 4 warnings
tests/api/test_discussions.py: 16 warnings
tests/api/test_learning_paths.py: 42 warnings
tests/api/test_live_classes.py: 14 warnings
tests/api/test_lms.py: 85 warnings
tests/api/test_monitoring.py: 1 warning
tests/api/test_notes.py: 14 warnings
tests/api/test_orders.py: 6 warnings
tests/api/test_peer_reviews.py: 8 warnings
tests/api/test_question_banks.py: 12 warnings
tests/integration/test_api_integration.py: 7 warnings
tests/integration/test_websocket.py: 26 warnings
tests/test_reviews.py: 2 warnings
  C:\Users\Sarit\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\schema.py:3624: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    return util.wrap_callable(lambda ctx: fn(), fn)  # type: ignore

tests/api/test_cart.py: 7 warnings
tests/api/test_question_banks.py: 6 warnings
tests/integration/test_websocket.py: 7 warnings
  D:\Graphology\Master Software\Eduecosystem\backend\app\core\security.py:18: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    expire = datetime.utcnow() + timedelta(

tests/api/test_cart.py::TestCartEndpoints::test_add_course_to_cart
tests/api/test_cart.py::TestCartEndpoints::test_cart_price_calculation
tests/api/test_cart.py::TestCartEndpoints::test_guest_cart_without_auth
  D:\Graphology\Master Software\Eduecosystem\backend\app\services\cart_service.py:137: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    cart.updated_at = datetime.utcnow()

tests/api/test_cart.py::TestCartEndpoints::test_update_cart_item_quantity
  D:\Graphology\Master Software\Eduecosystem\backend\app\services\cart_service.py:162: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    cart_item.updated_at = datetime.utcnow()

tests/api/test_cart.py::TestCartEndpoints::test_apply_coupon_to_cart
  D:\Graphology\Master Software\Eduecosystem\backend\tests\conftest.py:610: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    valid_from=datetime.utcnow(),

tests/api/test_cart.py::TestCartEndpoints::test_apply_coupon_to_cart
  D:\Graphology\Master Software\Eduecosystem\backend\tests\conftest.py:611: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    valid_until=datetime.utcnow() + timedelta(days=30),

tests/api/test_cart.py::TestCartEndpoints::test_apply_coupon_to_cart
  D:\Graphology\Master Software\Eduecosystem\backend\app\services\cart_service.py:207: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    now = datetime.utcnow()

tests/api/test_cart.py::TestCartEndpoints::test_guest_cart_without_auth
  D:\Graphology\Master Software\Eduecosystem\backend\app\services\cart_service.py:62: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    expires_at=datetime.utcnow() + timedelta(days=CartService.GUEST_CART_EXPIRY_DAYS)

tests/api/test_certificates.py: 2 warnings
tests/api/test_learning_paths.py: 7 warnings
tests/api/test_live_classes.py: 7 warnings
tests/api/test_notes.py: 7 warnings
tests/test_reviews.py: 1 warning
  D:\Graphology\Master Software\Eduecosystem\backend\tests\conftest.py:69: SAWarning: transaction already deassociated from connection
    transaction.rollback()

tests/api/test_lms.py: 22 warnings
tests/api/test_peer_reviews.py: 2 warnings
tests/api/test_question_banks.py: 6 warnings
tests/integration/test_api_integration.py: 2 warnings
  D:\Graphology\Master Software\Eduecosystem\backend\app\crud\course.py:99: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    obj_in_data = obj_in.dict(exclude={"tag_ids", "password"})

tests/api/test_lms.py::test_update_course_instructor
  D:\Graphology\Master Software\Eduecosystem\backend\app\crud\course.py:134: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    update_data = obj_in.dict(exclude_unset=True)

tests/api/test_lms.py::test_delete_course_instructor
tests/api/test_lms.py::test_delete_module
tests/api/test_lms.py::test_delete_lesson
  D:\Graphology\Master Software\Eduecosystem\backend\app\crud\base.py:61: LegacyAPIWarning: The Query.get() method is considered legacy as of the 1.x series of SQLAlchemy and becomes a legacy construct in 2.0. The method is now available as Session.get() (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
    obj = db.query(self.model).get(id)

tests/api/test_lms.py::test_add_module_to_course
tests/api/test_lms.py::test_add_lesson_to_module
tests/api/test_lms.py::test_update_module
tests/api/test_lms.py::test_delete_module
tests/api/test_lms.py::test_delete_lesson
tests/api/test_lms.py::test_update_lesson_progress
tests/api/test_peer_reviews.py::test_create_peer_review_assignment
tests/api/test_peer_reviews.py::test_peer_review_flow
  D:\Graphology\Master Software\Eduecosystem\backend\app\crud\course.py:212: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    obj_in_data = obj_in.dict(exclude={"course_id"})

tests/api/test_lms.py::test_update_module
  D:\Graphology\Master Software\Eduecosystem\backend\app\crud\base.py:51: PydanticDeprecatedSince20: The `dict` method is deprecated; use `model_dump` instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    update_data = obj_in.dict(exclude_unset=True)

tests/api/test_lms.py::test_enroll_in_free_course
tests/api/test_lms.py::test_duplicate_enrollment_prevented
tests/api/test_lms.py::test_get_my_courses
tests/api/test_lms.py::test_get_course_progress
tests/api/test_lms.py::test_update_lesson_progress
tests/api/test_lms.py::test_course_progress_percentage_updates
tests/api/test_lms.py::test_get_certificate_not_completed
tests/integration/test_api_integration.py::test_enroll_in_course
  D:\Graphology\Master Software\Eduecosystem\backend\app\services\notification_helpers.py:49: RuntimeWarning: coroutine 'ConnectionManager.send_notification_to_user' was never awaited
    print(f"Error emitting notification: {e}")
  Enable tracemalloc to get traceback where the object was allocated.
  See https://docs.pytest.org/en/stable/how-to/capture-warnings.html#resource-warnings for more info.

tests/api/test_orders.py::TestOrderEndpoints::test_create_order_from_cart
tests/api/test_orders.py::TestOrderEndpoints::test_get_order_history
tests/api/test_orders.py::TestOrderEndpoints::test_get_order_details
tests/api/test_orders.py::TestOrderEndpoints::test_get_order_by_number
tests/api/test_orders.py::TestOrderEndpoints::test_cancel_pending_order
tests/api/test_orders.py::TestOrderEndpoints::test_cannot_cancel_completed_order
tests/api/test_orders.py::TestOrderEndpoints::test_process_order_creates_enrollments
tests/api/test_orders.py::TestOrderEndpoints::test_guest_order_lookup
tests/api/test_orders.py::TestOrderEndpoints::test_order_number_uniqueness
  D:\Graphology\Master Software\Eduecosystem\backend\app\models\order.py:87: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    timestamp = datetime.utcnow().strftime("%Y%m%d%H%M")

tests/api/test_shadow_mode.py: 10 warnings
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\shadow_mode.py:38: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    start_time=datetime.utcnow()

tests/api/test_shadow_mode.py::test_end_shadow_session
tests/api/test_shadow_mode.py::test_get_shadow_progress
tests/api/test_shadow_mode.py::test_get_shadow_progress
tests/api/test_shadow_mode.py::test_get_shadow_progress
tests/api/test_shadow_mode.py::test_coin_calculation_accuracy
tests/api/test_shadow_mode.py::test_coin_calculation_accuracy
tests/api/test_shadow_mode.py::test_session_with_notes
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\shadow_mode.py:75: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    session.end_time = datetime.utcnow()

tests/api/test_shadow_mode.py::test_get_shadow_progress
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\shadow_mode.py:115: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    seven_days_ago = datetime.utcnow() - timedelta(days=7)

tests/api/test_shadow_mode.py::test_get_current_session
  D:\Graphology\Master Software\Eduecosystem\backend\app\api\api_v1\endpoints\shadow_mode.py:178: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    elapsed = (datetime.utcnow() - session.start_time).total_seconds() / 60

tests/integration/test_api_integration.py::test_login_success
tests/integration/test_api_integration.py::test_login_wrong_password
tests/integration/test_api_integration.py::test_get_current_user
tests/integration/test_api_integration.py::test_create_course
tests/integration/test_api_integration.py::test_enroll_in_course
tests/integration/test_api_integration.py::test_gamification_coins
tests/integration/test_api_integration.py::test_achievements_list
tests/integration/test_api_integration.py::test_learning_groups_list
  D:\Graphology\Master Software\Eduecosystem\backend\tests\integration\test_api_integration.py:38: SAWarning: Can't sort tables for DROP; an unresolvable foreign key dependency exists between tables: lessons, modules, quizzes; and backend does not support ALTER.  To restore at least a partial sort, apply use_alter=True to ForeignKey and ForeignKeyConstraint objects involved in the cycle to mark these as known cycles that will be ignored.
    Base.metadata.drop_all(bind=engine)

tests/integration/test_websocket.py::TestLiveClassWebSocket::test_live_class_connection
tests/integration/test_websocket.py::TestLiveClassWebSocket::test_chat_message_broadcast
tests/integration/test_websocket.py::TestLiveClassWebSocket::test_reaction_broadcast
tests/integration/test_websocket.py::TestLiveClassWebSocket::test_participant_tracking
  D:\Graphology\Master Software\Eduecosystem\backend\tests\integration\test_websocket.py:92: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    scheduled_at=datetime.utcnow(),

tests/test_tax_service.py::test_get_applicable_tax_rate
tests/test_tax_service.py::test_product_type_filtering
tests/test_tax_service.py::test_product_type_filtering
  D:\Graphology\Master Software\Eduecosystem\backend\app\services\tax_service.py:57: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    now = datetime.utcnow()

tests/test_two_factor_flow.py::test_2fa_already_enabled_setup
  D:\Graphology\Master Software\Eduecosystem\backend\tests\conftest.py:59: SAWarning: Can't sort tables for DROP; an unresolvable foreign key dependency exists between tables: lessons, modules, quizzes; and backend does not support ALTER.  To restore at least a partial sort, apply use_alter=True to ForeignKey and ForeignKeyConstraint objects involved in the cycle to mark these as known cycles that will be ignored.
    Base.metadata.drop_all(bind=engine)

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED backend\tests\api\test_analytics.py::test_dashboard_analytics_basic - ...
FAILED backend\tests\api\test_analytics.py::test_analytics_with_shadow_sessions
FAILED backend\tests\api\test_analytics.py::test_analytics_handwriting_count
FAILED backend\tests\api\test_analytics.py::test_analytics_insights_generation
FAILED backend\tests\api\test_analytics.py::test_analytics_attention_tracking
FAILED backend\tests\api\test_analytics.py::test_detailed_analytics - assert ...
FAILED backend\tests\api\test_analytics.py::test_analytics_with_activity_heatmap
FAILED backend\tests\api\test_analytics.py::test_analytics_empty_state - asse...
FAILED backend\tests\api\test_analytics.py::test_unauthorized_analytics_access
FAILED backend\tests\api\test_announcements.py::test_create_announcement - as...
FAILED backend\tests\api\test_announcements.py::test_get_course_announcements
FAILED backend\tests\api\test_announcements.py::test_mark_announcement_as_read
FAILED backend\tests\api\test_announcements.py::test_get_unread_announcements_count
FAILED backend\tests\api\test_announcements.py::test_pin_announcement - asser...
FAILED backend\tests\api\test_announcements.py::test_delete_announcement - as...
FAILED backend\tests\api\test_certificate_templates.py::test_create_certificate_template
FAILED backend\tests\api\test_certificate_templates.py::test_get_all_templates
FAILED backend\tests\api\test_certificate_templates.py::test_get_my_templates
FAILED backend\tests\api\test_certificate_templates.py::test_update_template
FAILED backend\tests\api\test_certificate_templates.py::test_set_default_template
FAILED backend\tests\api\test_certificate_templates.py::test_get_default_template
FAILED backend\tests\api\test_certificate_templates.py::test_delete_template
FAILED backend\tests\api\test_certificate_templates.py::test_cannot_delete_default_template
FAILED backend\tests\api\test_certificates.py::test_get_my_certificates - sql...
FAILED backend\tests\api\test_certificates.py::test_download_certificate - sq...
FAILED backend\tests\api\test_collaborative_projects.py::test_create_team_and_join
FAILED backend\tests\api\test_discussions.py::test_create_discussion_category
FAILED backend\tests\api\test_discussions.py::test_create_discussion_thread
FAILED backend\tests\api\test_discussions.py::test_reply_to_thread - assert 4...
FAILED backend\tests\api\test_discussions.py::test_vote_on_post - assert 404 ...
FAILED backend\tests\api\test_discussions.py::test_mark_answer - assert 404 =...
FAILED backend\tests\api\test_discussions.py::test_search_threads - assert 40...
FAILED backend\tests\api\test_discussions.py::test_get_thread_with_posts - as...
FAILED backend\tests\api\test_discussions.py::test_filter_unanswered_threads
FAILED backend\tests\api\test_groups.py::test_group_stats_calculation - asser...
FAILED backend\tests\api\test_lms.py::test_update_lesson_progress - assert 40...
FAILED backend\tests\api\test_lms.py::test_get_certificate_not_completed - as...
FAILED backend\tests\api\test_lms.py::test_get_my_certificates_empty - assert...
FAILED backend\tests\api\test_lms.py::test_certificate_requires_authentication
FAILED backend\tests\api\test_orders.py::TestOrderEndpoints::test_get_order_history
FAILED backend\tests\api\test_orders.py::TestOrderEndpoints::test_get_order_details
FAILED backend\tests\api\test_orders.py::TestOrderEndpoints::test_get_order_by_number
FAILED backend\tests\api\test_orders.py::TestOrderEndpoints::test_cancel_pending_order
FAILED backend\tests\api\test_orders.py::TestOrderEndpoints::test_cannot_cancel_completed_order
FAILED backend\tests\api\test_orders.py::TestOrderEndpoints::test_process_order_creates_enrollments
FAILED backend\tests\api\test_question_banks.py::test_create_question_bank - ...
FAILED backend\tests\api\test_question_banks.py::test_list_question_banks - a...
FAILED backend\tests\api\test_question_banks.py::test_update_question_bank - ...
FAILED backend\tests\api\test_question_banks.py::test_delete_question_bank - ...
FAILED backend\tests\api\test_question_banks.py::test_create_bank_question - ...
FAILED backend\tests\api\test_question_banks.py::test_generate_quiz_from_banks
FAILED backend\tests\integration\test_2fa_login_flow.py::test_2fa_login_flow_integration
FAILED backend\tests\integration\test_subscription_lifecycle.py::test_subscription_lifecycle_integration
FAILED backend\tests\integration\test_websocket.py::TestDiscussionWebSocket::test_websocket_connection_authorized
FAILED backend\tests\integration\test_websocket.py::TestDiscussionWebSocket::test_typing_indicator
FAILED backend\tests\integration\test_websocket.py::TestDiscussionWebSocket::test_multiple_users_discussion
FAILED backend\tests\integration\test_websocket.py::TestNotificationsWebSocket::test_notifications_connection
FAILED backend\tests\integration\test_websocket.py::TestQuizWebSocket::test_quiz_connection
FAILED backend\tests\integration\test_websocket.py::TestQuizWebSocket::test_answer_submission_broadcast
FAILED backend\tests\integration\test_websocket.py::TestWebSocketConnectionManager::test_heartbeat_mechanism
FAILED backend\tests\integration\test_websocket.py::TestWebSocketConnectionManager::test_connection_cleanup_on_disconnect
FAILED backend\tests\test_reviews.py::test_course_reviews_workflow - sqlalche...
ERROR backend\tests\api\test_learning_paths.py::test_add_courses_to_path - sq...
ERROR backend\tests\api\test_learning_paths.py::test_add_course_with_prerequisite
ERROR backend\tests\api\test_learning_paths.py::test_enroll_in_path - sqlalch...
ERROR backend\tests\api\test_learning_paths.py::test_get_learning_path_by_slug
ERROR backend\tests\api\test_learning_paths.py::test_check_course_access_without_prerequisite_completion
ERROR backend\tests\api\test_learning_paths.py::test_get_my_path_enrollments
ERROR backend\tests\api\test_learning_paths.py::test_update_path_course_order
ERROR backend\tests\api\test_live_classes.py::test_create_live_class - sqlalc...
ERROR backend\tests\api\test_live_classes.py::test_get_course_live_classes - ...
ERROR backend\tests\api\test_live_classes.py::test_start_live_class - sqlalch...
ERROR backend\tests\api\test_live_classes.py::test_join_live_class - sqlalche...
ERROR backend\tests\api\test_live_classes.py::test_complete_live_class_with_recording
ERROR backend\tests\api\test_live_classes.py::test_get_live_class_attendance
ERROR backend\tests\api\test_live_classes.py::test_filter_upcoming_live_classes
ERROR backend\tests\api\test_notes.py::test_create_lesson_note - sqlalchemy.e...
ERROR backend\tests\api\test_notes.py::test_get_lesson_notes - sqlalchemy.exc...
ERROR backend\tests\api\test_notes.py::test_search_notes - sqlalchemy.exc.Int...
ERROR backend\tests\api\test_notes.py::test_bookmark_lesson - sqlalchemy.exc....
ERROR backend\tests\api\test_notes.py::test_unbookmark_lesson - sqlalchemy.ex...
ERROR backend\tests\api\test_notes.py::test_bookmark_course - sqlalchemy.exc....
ERROR backend\tests\api\test_notes.py::test_get_my_bookmarks - sqlalchemy.exc...
ERROR backend\tests\api\test_orders.py::TestOrderEndpoints::test_order_unauthorized_access
ERROR backend\tests\api\test_peer_reviews.py::test_create_peer_review_assignment
ERROR backend\tests\api\test_peer_reviews.py::test_peer_review_flow - Asserti...
ERROR backend\tests\integration\test_websocket.py::TestLiveClassWebSocket::test_live_class_connection
ERROR backend\tests\integration\test_websocket.py::TestLiveClassWebSocket::test_chat_message_broadcast
ERROR backend\tests\integration\test_websocket.py::TestLiveClassWebSocket::test_reaction_broadcast
ERROR backend\tests\integration\test_websocket.py::TestLiveClassWebSocket::test_participant_tracking
ERROR backend\tests\test_sso_oauth.py::test_oauth_login_flow
ERROR backend\tests\test_subscriptions_flow.py::test_subscribe_user
ERROR backend\tests\test_subscriptions_flow.py::test_subscribe_with_trial
ERROR backend\tests\test_subscriptions_flow.py::test_subscribe_yearly
ERROR backend\tests\test_subscriptions_flow.py::test_duplicate_subscription
ERROR backend\tests\test_subscriptions_flow.py::test_cancel_subscription_at_period_end
ERROR backend\tests\test_subscriptions_flow.py::test_cancel_subscription_immediately
ERROR backend\tests\test_subscriptions_flow.py::test_check_access
ERROR backend\tests\test_subscriptions_flow.py::test_get_user_subscription
ERROR backend\tests\test_tax_service.py::test_calculate_tax_no_exemption
ERROR backend\tests\test_tax_service.py::test_calculate_tax_inclusive
ERROR backend\tests\test_tax_service.py::test_no_tax_for_region
ERROR backend\tests\test_two_factor_flow.py::test_2fa_setup_flow
ERROR backend\tests\test_two_factor_flow.py::test_2fa_verify_setup_invalid_code
ERROR backend\tests\test_two_factor_flow.py::test_2fa_login_verification
ERROR backend\tests\test_two_factor_flow.py::test_2fa_backup_code_usage
ERROR backend\tests\test_two_factor_flow.py::test_2fa_disable_flow
ERROR backend\tests\test_two_factor_flow.py::test_2fa_status_endpoint
ERROR backend\tests\test_two_factor_flow.py::test_2fa_already_enabled_setup
= 62 failed, 115 passed, 6 skipped, 766 warnings, 47 errors in 140.09s (0:02:20) =
